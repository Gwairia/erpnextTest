{"version":3,"file":"form.min.js","sources":["../../../apps/frappe/frappe/public/js/frappe/form/document_follow.js","../../../apps/frappe/frappe/public/js/frappe/views/formview.js","../../../apps/frappe/frappe/public/js/legacy/form.js","../../../apps/frappe/frappe/public/js/legacy/client_script_helpers.js","../../../apps/frappe/frappe/public/js/frappe/form/toolbar.js","../../../apps/frappe/frappe/public/js/frappe/form/dashboard.js","../../../apps/frappe/frappe/public/js/frappe/form/document_flow.js","../../../apps/frappe/frappe/public/js/frappe/form/save.js","../../../apps/frappe/frappe/public/js/frappe/form/script_manager.js","../../../apps/frappe/frappe/public/js/frappe/form/linked_with.js","../../../apps/frappe/frappe/public/js/frappe/form/workflow.js","../../../apps/frappe/frappe/public/js/frappe/form/print.js","../../../apps/frappe/frappe/public/js/frappe/form/form_sidebar.js","../../../apps/frappe/frappe/public/js/frappe/form/user_image.js","../../../apps/frappe/frappe/public/js/frappe/form/share.js","../../../apps/frappe/frappe/public/js/frappe/form/review.js","../../../apps/frappe/frappe/public/js/frappe/form/form_viewers.js","../../../apps/frappe/frappe/public/js/frappe/form/footer/footer.js","../../../apps/frappe/frappe/public/js/frappe/form/footer/attachments.js","../../../apps/frappe/frappe/public/js/frappe/form/footer/timeline.js","../../../apps/frappe/frappe/public/js/frappe/form/footer/assign_to.js","../../../apps/frappe/frappe/public/js/frappe/form/quick_entry.js","../../../apps/frappe/frappe/public/js/frappe/form/success_action.js","../../../apps/frappe/frappe/public/js/frappe/meta_tag.js"],"sourcesContent":["// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.ui.form');\n\nfrappe.ui.form.DocumentFollow = class DocumentFollow {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.follow_document_link = this.parent.find('.follow-document-link');\n\t\tthis.unfollow_document_link = this.parent.find('.unfollow-document-link');\n\t\tthis.follow_span = this.parent.find('.anchor-document-follow > span');\n\t\tthis.followed_by = this.parent.find('.followed-by');\n\t\tthis.followed_by_label = this.parent.find('.followed-by-label');\n\t}\n\n\trefresh() {\n\t\tthis.set_followers();\n\t\tthis.render_sidebar();\n\t}\n\n\trender_sidebar() {\n\t\tconst docinfo = this.frm.get_docinfo();\n\t\tconst document_follow_enabled = frappe.boot.user.document_follow_notify;\n\t\tconst document_can_be_followed = frappe.get_meta(this.frm.doctype).track_changes;\n\t\tif (frappe.session.user === 'Administrator'\n\t\t\t|| !document_follow_enabled\n\t\t\t|| !document_can_be_followed\n\t\t) {\n\t\t\tthis.hide_follow_section();\n\t\t\treturn;\n\t\t}\n\t\tthis.bind_events();\n\n\t\tconst is_followed = docinfo && docinfo.is_document_followed;\n\n\t\tif(is_followed > 0) {\n\t\t\tthis.unfollow_document_link.removeClass('hidden');\n\t\t\tthis.follow_document_link.addClass('hidden');\n\t\t} else {\n\t\t\tthis.followed_by_label.addClass('hidden');\n\t\t\tthis.followed_by.addClass('hidden');\n\t\t\tthis.unfollow_document_link.addClass('hidden');\n\t\t\tthis.follow_document_link.removeClass('hidden');\n\t\t}\n\t}\n\n\tbind_events() {\n\t\tthis.follow_document_link.on('click', () => {\n\t\t\tthis.follow_document_link.addClass('text-muted disable-click');\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.desk.form.document_follow.follow_document',\n\t\t\t\targs: {\n\t\t\t\t\t'doctype': this.frm.doctype,\n\t\t\t\t\t'doc_name': this.frm.doc.name,\n\t\t\t\t\t'user': frappe.session.user,\n\t\t\t\t\t'force': true\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\tthis.follow_action();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.unfollow_document_link.on('click', () => {\n\t\t\tthis.unfollow_document_link.addClass('text-muted disable-click');\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.desk.form.document_follow.unfollow_document',\n\t\t\t\targs: {\n\t\t\t\t\t'doctype': this.frm.doctype,\n\t\t\t\t\t'doc_name': this.frm.doc.name,\n\t\t\t\t\t'user': frappe.session.user\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tif(r.message) {\n\t\t\t\t\t\tthis.unfollow_action();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\thide_follow_section() {\n\t\tthis.parent.hide();\n\t}\n\n\tset_followers() {\n\t\tthis.followed_by.removeClass('hidden');\n\t\tthis.followed_by_label.removeClass('hidden');\n\t\tthis.followed_by.empty();\n\t\tthis.get_followed_user().then(user => {\n\t\t\t$(user).appendTo(this.followed_by);\n\t\t});\n\t}\n\n\tget_followed_user() {\n\t\tvar html = '';\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: 'frappe.desk.form.document_follow.get_follow_users',\n\t\t\t\targs: {\n\t\t\t\t\t'doctype': this.frm.doctype,\n\t\t\t\t\t'doc_name': this.frm.doc.name,\n\t\t\t\t},\n\t\t\t}).then(r => {\n\t\t\t\tthis.count_others = 0;\n\t\t\t\tfor (var d in r.message) {\n\t\t\t\t\tthis.count_others++;\n\t\t\t\t\tif(this.count_others < 4){\n\t\t\t\t\t\thtml += frappe.avatar(r.message[d].user, 'avatar-small');\n\t\t\t\t\t}\n\t\t\t\t\tif(this.count_others === 0){\n\t\t\t\t\t\tthis.followed_by.addClass('hidden');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tresolve(html);\n\t\t\t});\n\t\t});\n\t}\n\n\tfollow_action() {\n\t\tfrappe.show_alert({\n\t\t\tmessage: __('You are now following this document. You will receive daily updates via email. You can change this in User Settings.'),\n\t\t\tindicator: 'orange'\n\t\t});\n\t\tthis.follow_document_link.removeClass('text-muted disable-click');\n\t\tthis.follow_document_link.addClass('hidden');\n\t\tthis.unfollow_document_link.removeClass('hidden');\n\t\tthis.set_followers();\n\t}\n\n\tunfollow_action() {\n\t\tfrappe.show_alert({\n\t\t\tmessage: __('You unfollowed this document'),\n\t\t\tindicator: 'red'\n\t\t});\n\t\tthis.unfollow_document_link.removeClass('text-muted disable-click');\n\t\tthis.unfollow_document_link.addClass('hidden');\n\t\tthis.follow_document_link.removeClass('hidden');\n\t\tthis.followed_by.addClass('hidden');\n\t\tthis.followed_by_label.addClass('hidden');\n\t}\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.views.formview');\n\nfrappe.views.FormFactory = class FormFactory extends frappe.views.Factory {\n\tmake(route) {\n\t\tvar me = this,\n\t\t\tdt = route[1];\n\n\t\tif(!frappe.views.formview[dt]) {\n\t\t\tfrappe.model.with_doctype(dt, function() {\n\t\t\t\tme.page = frappe.container.add_page(\"Form/\" + dt);\n\t\t\t\tfrappe.views.formview[dt] = me.page;\n\t\t\t\tme.page.frm = new _f.Frm(dt, me.page, true);\n\t\t\t\tme.show_doc(route);\n\t\t\t});\n\t\t} else {\n\t\t\tme.show_doc(route);\n\t\t}\n\n\t\tif(!this.initialized) {\n\t\t\t$(document).on(\"page-change\", function() {\n\t\t\t\tfrappe.ui.form.close_grid_form();\n\t\t\t});\n\n\t\t\tfrappe.realtime.on(\"new_communication\", function(data) {\n\t\t\t\tfrappe.timeline.new_communication(data);\n\t\t\t});\n\n\t\t\tfrappe.realtime.on(\"delete_communication\", function(data) {\n\t\t\t\tfrappe.timeline.delete_communication(data);\n\t\t\t});\n\n\t\t\tfrappe.realtime.on('update_communication', function(data) {\n\t\t\t\tfrappe.timeline.update_communication(data);\n\t\t\t});\n\n\t\t\tfrappe.realtime.on(\"doc_viewers\", function(data) {\n\t\t\t\tfrappe.ui.form.set_viewers(data);\n\t\t\t});\n\t\t}\n\n\n\t\tthis.initialized = true;\n\t}\n\n\tshow_doc(route) {\n\t\tvar dt = route[1],\n\t\t\tdn = route.slice(2).join(\"/\"),\n\t\t\tme = this;\n\n\t\tif(frappe.model.new_names[dn]) {\n\t\t\tdn = frappe.model.new_names[dn];\n\t\t\tfrappe.set_route(\"Form\", dt, dn);\n\t\t\treturn;\n\t\t}\n\n\t\tfrappe.model.with_doc(dt, dn, function(dn, r) {\n\t\t\tif(r && r['403']) return; // not permitted\n\n\t\t\tif(!(locals[dt] && locals[dt][dn])) {\n\t\t\t\t// doc not found, but starts with New,\n\t\t\t\t// make a new doc and set it\n\t\t\t\tvar new_str = __(\"New\") + \" \";\n\t\t\t\tif(dn && dn.substr(0, new_str.length)==new_str) {\n\t\t\t\t\tvar new_name = frappe.model.make_new_doc_and_get_name(dt, true);\n\t\t\t\t\tif(new_name===dn) {\n\t\t\t\t\t\tme.load(dt, dn);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.set_route(\"Form\", dt, new_name)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.show_not_found(route);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme.load(dt, dn);\n\t\t});\n\t}\n\n\tload(dt, dn) {\n\t\tfrappe.container.change_to(\"Form/\" + dt);\n\t\tfrappe.views.formview[dt].frm.refresh(dn);\n\t}\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n/* Form page structure\n\n\t+ this.parent (either FormContainer or Dialog)\n\t\t+ this.wrapper\n\t\t\t+ this.toolbar\n\t\t\t+ this.form_wrapper\n\t\t\t\t\t+ this.head\n\t\t\t\t\t+ this.body\n\t\t\t\t\t\t+ this.layout\n\t\t\t\t+ this.sidebar\n\t\t\t+ this.footer\n*/\n\n/* eslint-disable no-console */\n\nfrappe.provide('_f');\nfrappe.provide('frappe.ui.form');\n\nfrappe.ui.form.Controller = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t}\n});\n\n_f.frms = {};\n\n_f.Frm = function(doctype, parent, in_form) {\n\tthis.docname = '';\n\tthis.doctype = doctype;\n\tthis.hidden = false;\n\tthis.refresh_if_stale_for = 120;\n\n\tvar me = this;\n\tthis.opendocs = {};\n\tthis.custom_buttons = {};\n\tthis.sections = [];\n\tthis.grids = [];\n\tthis.cscript = new frappe.ui.form.Controller({frm:this});\n\tthis.events = {};\n\tthis.pformat = {};\n\tthis.fetch_dict = {};\n\tthis.parent = parent;\n\tthis.tinymce_id_list = [];\n\n\tthis.setup_meta(doctype);\n\n\t// show in form instead of in dialog, when called using url (router.js)\n\tthis.in_form = in_form ? true : false;\n\n\t// notify on rename\n\t$(document).on('rename', function(event, dt, old_name, new_name) {\n\t\tif(dt==me.doctype)\n\t\t\tme.rename_notify(dt, old_name, new_name);\n\t});\n};\n\n_f.Frm.prototype.check_doctype_conflict = function(docname) {\n\tif(this.doctype=='DocType' && docname=='DocType') {\n\t\tfrappe.msgprint(__('Allowing DocType, DocType. Be careful!'));\n\t} else if(this.doctype=='DocType') {\n\t\tif (frappe.views.formview[docname] || frappe.pages['List/'+docname]) {\n\t\t\twindow.location.reload();\n\t\t\t//\tfrappe.msgprint(__(\"Cannot open {0} when its instance is open\", ['DocType']))\n\t\t\t// throw 'doctype open conflict'\n\t\t}\n\t} else {\n\t\tif (frappe.views.formview.DocType && frappe.views.formview.DocType.frm.opendocs[this.doctype]) {\n\t\t\twindow.location.reload();\n\t\t\t//\tfrappe.msgprint(__(\"Cannot open instance when its {0} is open\", ['DocType']))\n\t\t\t// throw 'doctype open conflict'\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.setup = function() {\n\tthis.fields = [];\n\tthis.fields_dict = {};\n\tthis.state_fieldname = frappe.workflow.get_state_fieldname(this.doctype);\n\n\t// wrapper\n\tthis.wrapper = this.parent;\n\tthis.$wrapper = $(this.wrapper);\n\tfrappe.ui.make_app_page({\n\t\tparent: this.wrapper,\n\t\tsingle_column: this.meta.hide_toolbar\n\t});\n\tthis.page = this.wrapper.page;\n\tthis.layout_main = this.page.main.get(0);\n\n\tthis.toolbar = new frappe.ui.form.Toolbar({\n\t\tfrm: this,\n\t\tpage: this.page\n\t});\n\n\t// print layout\n\tthis.setup_print_layout();\n\n\t// 2 column layout\n\tthis.setup_std_layout();\n\n\t// client script must be called after \"setup\" - there are no fields_dict attached to the frm otherwise\n\tthis.script_manager = new frappe.ui.form.ScriptManager({\n\t\tfrm: this\n\t});\n\tthis.script_manager.setup();\n\tthis.watch_model_updates();\n\n\tif(!this.meta.hide_toolbar) {\n\t\tthis.footer = new frappe.ui.form.Footer({\n\t\t\tfrm: this,\n\t\t\tparent: $('<div>').appendTo(this.page.main.parent())\n\t\t});\n\t\t$(\"body\").attr(\"data-sidebar\", 1);\n\t}\n\tthis.setup_drag_drop();\n\n\tthis.setup_done = true;\n};\n\n_f.Frm.prototype.setup_drag_drop = function() {\n\tvar me = this;\n\tthis.$wrapper.on('dragenter dragover', false)\n\t\t.on('drop', function(e) {\n\t\t\tvar dataTransfer = e.originalEvent.dataTransfer;\n\t\t\tif (!(dataTransfer && dataTransfer.files && dataTransfer.files.length > 0)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tif(me.doc.__islocal) {\n\t\t\t\tfrappe.msgprint(__(\"Please save before attaching.\"));\n\t\t\t\tthrow \"attach error\";\n\t\t\t}\n\n\t\t\tif(me.attachments.max_reached()) {\n\t\t\t\tfrappe.msgprint(__(\"Maximum Attachment Limit for this record reached.\"));\n\t\t\t\tthrow \"attach error\";\n\t\t\t}\n\n\t\t\tnew frappe.ui.FileUploader({\n\t\t\t\tdoctype: me.doctype,\n\t\t\t\tdocname: me.docname,\n\t\t\t\tfiles: dataTransfer.files,\n\t\t\t\ton_success(file_doc) {\n\t\t\t\t\tme.attachments.attachment_uploaded(file_doc);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n};\n\n_f.Frm.prototype.setup_print_layout = function() {\n\tvar me = this;\n\tthis.print_preview = new frappe.ui.form.PrintPreview({\n\t\tfrm: this\n\t});\n\n\t// show edit button for print view\n\tthis.page.wrapper.on('view-change', function() {\n\t\tme.toolbar.set_primary_action();\n\t});\n};\n\n_f.Frm.prototype.print_doc = function() {\n\tif(this.print_preview.wrapper.is(\":visible\")) {\n\t\tthis.hide_print();\n\t\treturn;\n\t}\n\tif(!frappe.model.can_print(this.doc.doctype, this)) {\n\t\tfrappe.msgprint(__(\"You are not allowed to print this document\"));\n\t\treturn;\n\t}\n\n\tthis.print_preview.refresh_print_options().trigger(\"change\");\n\tthis.page.set_view(\"print\");\n\tthis.print_preview.set_user_lang();\n\tthis.print_preview.set_default_print_language();\n\tthis.print_preview.preview();\n};\n\n_f.Frm.prototype.hide_print = function() {\n\tif(this.setup_done && this.page.current_view_name===\"print\") {\n\t\tthis.page.set_view(this.page.previous_view_name===\"print\" ?\n\t\t\t\"main\" : (this.page.previous_view_name || \"main\"));\n\t}\n};\n\n_f.Frm.prototype.watch_model_updates = function() {\n\t// watch model updates\n\tvar me = this;\n\n\t// on main doc\n\tfrappe.model.on(me.doctype, \"*\", function(fieldname, value, doc) {\n\t\t// set input\n\t\tif(doc.name===me.docname) {\n\t\t\tif ((value==='' || value===null) && !doc[fieldname]) {\n\t\t\t\t// both the incoming and outgoing values are falsy\n\t\t\t\t// the texteditor, summernote, changes nulls to empty strings on render,\n\t\t\t\t// so ignore those changes\n\t\t\t} else {\n\t\t\t\tme.dirty();\n\t\t\t}\n\t\t\tme.fields_dict[fieldname]\n\t\t\t\t&& me.fields_dict[fieldname].refresh(fieldname);\n\n\t\t\tme.layout.refresh_dependency();\n\t\t\tlet object = me.script_manager.trigger(fieldname, doc.doctype, doc.name);\n\t\t\treturn object;\n\t\t}\n\t});\n\n\t// on table fields\n\tvar table_fields = frappe.get_children(\"DocType\", me.doctype, \"fields\", {\n\t\tfieldtype: [\"in\", frappe.model.table_fields]\n\t});\n\n\t// using $.each to preserve df via closure\n\t$.each(table_fields, function(i, df) {\n\t\tfrappe.model.on(df.options, \"*\", function(fieldname, value, doc) {\n\t\t\tif(doc.parent===me.docname && doc.parentfield===df.fieldname) {\n\t\t\t\tme.dirty();\n\t\t\t\tme.fields_dict[df.fieldname].grid.set_value(fieldname, value, doc);\n\t\t\t\tme.script_manager.trigger(fieldname, doc.doctype, doc.name);\n\t\t\t}\n\t\t});\n\t});\n};\n\n_f.Frm.prototype.setup_std_layout = function() {\n\tthis.form_wrapper \t= $('<div></div>').appendTo(this.layout_main);\n\tthis.body \t\t\t= $('<div></div>').appendTo(this.form_wrapper);\n\n\t// only tray\n\tthis.meta.section_style='Simple'; // always simple!\n\n\t// layout\n\tthis.layout = new frappe.ui.form.Layout({\n\t\tparent: this.body,\n\t\tdoctype: this.doctype,\n\t\tfrm: this,\n\t\twith_dashboard: true\n\t});\n\tthis.layout.make();\n\n\tthis.fields_dict = this.layout.fields_dict;\n\tthis.fields = this.layout.fields_list;\n\n\tthis.document_flow = new frappe.ui.form.DocumentFlow({\n\t\tfrm: this\n\t});\n\n\tthis.dashboard = new frappe.ui.form.Dashboard({\n\t\tfrm: this,\n\t});\n\n\t// state\n\tthis.states = new frappe.ui.form.States({\n\t\tfrm: this\n\t});\n};\n\n// email the form\n_f.Frm.prototype.email_doc = function(message) {\n\tnew frappe.views.CommunicationComposer({\n\t\tdoc: this.doc,\n\t\tfrm: this,\n\t\tsubject: __(this.meta.name) + ': ' + this.docname,\n\t\trecipients: this.doc.email || this.doc.email_id || this.doc.contact_email,\n\t\tattach_document_print: true,\n\t\tmessage: message,\n\t\treal_name: this.doc.real_name || this.doc.contact_display || this.doc.contact_name\n\t});\n};\n\n// rename the form\n_f.Frm.prototype.rename_doc = function() {\n\tfrappe.model.rename_doc(this.doctype, this.docname);\n};\n\n_f.Frm.prototype.share_doc = function() {\n\tthis.shared.show();\n};\n\n// notify this form of renamed records\n_f.Frm.prototype.rename_notify = function(dt, old, name) {\n\t// from form\n\tif(this.meta.istable)\n\t\treturn;\n\n\tif(this.docname == old)\n\t\tthis.docname = name;\n\telse\n\t\treturn;\n\n\t// cleanup\n\tif(this && this.opendocs[old] && frappe.meta.docfield_copy[dt]) {\n\t\t// delete docfield copy\n\t\tfrappe.meta.docfield_copy[dt][name] = frappe.meta.docfield_copy[dt][old];\n\t\tdelete frappe.meta.docfield_copy[dt][old];\n\t}\n\n\tdelete this.opendocs[old];\n\tthis.opendocs[name] = true;\n\n\tif(this.meta.in_dialog || !this.in_form) {\n\t\treturn;\n\t}\n\n\tfrappe.re_route[window.location.hash] = '#Form/' + encodeURIComponent(this.doctype) + '/' + encodeURIComponent(name);\n\tfrappe.set_route('Form', this.doctype, name);\n};\n\n// SETUP\n\n_f.Frm.prototype.setup_meta = function() {\n\tthis.meta = frappe.get_doc('DocType', this.doctype);\n\tthis.perm = frappe.perm.get_perm(this.doctype); // for create\n\tif(this.meta.istable) {\n\t\tthis.meta.in_dialog = 1;\n\t}\n};\n\n_f.Frm.prototype.refresh_header = function(is_a_different_doc) {\n\t// set title\n\t// main title\n\tif(!this.meta.in_dialog || this.in_form) {\n\t\tfrappe.utils.set_title(this.meta.issingle ? this.doctype : this.docname);\n\t}\n\n\t// show / hide buttons\n\tif(this.toolbar) {\n\t\tif (is_a_different_doc) {\n\t\t\tthis.toolbar.current_status = undefined;\n\t\t}\n\n\t\tthis.toolbar.refresh();\n\t}\n\n\tthis.document_flow.refresh();\n\tthis.dashboard.refresh();\n\n\tif(this.meta.is_submittable\n\t\t&& this.perm[0] && this.perm[0].submit\n\t\t&& !this.is_dirty()\n\t\t&& !this.is_new()\n\t\t&& !frappe.model.has_workflow(this.doctype) // show only if no workflow\n\t\t&& this.doc.docstatus===0) {\n\t\tthis.dashboard.add_comment(__('Submit this document to confirm'), 'blue', true);\n\t}\n\n\tthis.clear_custom_buttons();\n\n\tthis.show_web_link();\n};\n\n_f.Frm.prototype.show_web_link = function() {\n\tvar doc = this.doc, me = this;\n\tif(!doc.__islocal && doc.__onload && doc.__onload.is_website_generator) {\n\t\tme.web_link && me.web_link.remove();\n\t\tif(doc.__onload.published) {\n\t\t\tme.add_web_link(\"/\" + doc.route);\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.add_web_link = function(path, label) {\n\tlabel = label || \"See on Website\";\n\tthis.web_link = this.sidebar.add_user_action(__(label),\n\t\tfunction() {}).attr(\"href\", path || this.doc.route).attr(\"target\", \"_blank\");\n};\n\n_f.Frm.prototype.check_doc_perm = function() {\n\t// get perm\n\tvar dt = this.parent_doctype?this.parent_doctype : this.doctype;\n\tthis.perm = frappe.perm.get_perm(dt, this.doc);\n\n\tif(!this.perm[0].read) {\n\t\treturn 0;\n\t}\n\treturn 1;\n};\n\n_f.Frm.prototype.refresh = function(docname) {\n\tvar is_a_different_doc = docname ? true : false;\n\n\tif(docname) {\n\t\t// record switch\n\t\tif(this.docname != docname && (!this.meta.in_dialog || this.in_form) && !this.meta.istable) {\n\t\t\tfrappe.utils.scroll_to(0);\n\t\t\tthis.hide_print();\n\t\t}\n\t\t// reset visible columns, since column headings can change in different docs\n\t\tthis.grids.forEach(grid_obj => grid_obj.grid.visible_columns = null);\n\t\tfrappe.ui.form.close_grid_form();\n\t\tthis.docname = docname;\n\t}\n\n\tcur_frm = this;\n\n\tif(this.docname) { // document to show\n\n\t\t// set the doc\n\t\tthis.doc = frappe.get_doc(this.doctype, this.docname);\n\n\t\t// check permissions\n\t\tif(!this.check_doc_perm()) {\n\t\t\tfrappe.show_not_permitted(__(this.doctype) + \" \" + __(this.docname));\n\t\t\treturn;\n\t\t}\n\n\t\t// read only (workflow)\n\t\tthis.read_only = frappe.workflow.is_read_only(this.doctype, this.docname);\n\t\tif (this.read_only) this.set_read_only(true);\n\n\t\t// check if doctype is already open\n\t\tif (!this.opendocs[this.docname]) {\n\t\t\tthis.check_doctype_conflict(this.docname);\n\t\t} else {\n\t\t\tif(this.doc && (!this.doc.__unsaved) && this.doc.__last_sync_on &&\n\t\t\t\t(new Date() - this.doc.__last_sync_on) > (this.refresh_if_stale_for * 1000)) {\n\t\t\t\tthis.reload_doc();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// do setup\n\t\tif(!this.setup_done) {\n\t\t\tthis.setup();\n\t\t}\n\n\t\t// load the record for the first time, if not loaded (call 'onload')\n\t\tthis.cscript.is_onload = false;\n\t\tif(!this.opendocs[this.docname]) {\n\t\t\tvar me = this;\n\t\t\tthis.cscript.is_onload = true;\n\t\t\tthis.setnewdoc();\n\t\t\t$(document).trigger(\"form-load\", [this]);\n\t\t\t$(this.page.wrapper).on('hide',  function() {\n\t\t\t\t$(document).trigger(\"form-unload\", [me]);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.render_form(is_a_different_doc);\n\t\t\tif (this.doc.localname) {\n\t\t\t\t// trigger form-rename and remove .localname\n\t\t\t\tdelete this.doc.localname;\n\t\t\t\t$(document).trigger(\"form-rename\", [this]);\n\t\t\t}\n\t\t}\n\n\t\t// if print format is shown, refresh the format\n\t\tif(this.print_preview.wrapper.is(\":visible\")) {\n\t\t\tthis.print_preview.preview();\n\t\t}\n\n\t\tif(is_a_different_doc) {\n\t\t\tif(this.show_print_first && this.doc.docstatus===1) {\n\t\t\t\t// show print view\n\t\t\t\tthis.print_doc();\n\t\t\t}\n\t\t}\n\n\t\t// set status classes\n\t\tthis.$wrapper.removeClass('validated-form')\n\t\t\t.toggleClass('editable-form', this.doc.docstatus===0)\n\t\t\t.toggleClass('submitted-form', this.doc.docstatus===1)\n\t\t\t.toggleClass('cancelled-form', this.doc.docstatus===2);\n\n\t\tthis.show_if_needs_refresh();\n\t}\n};\n\n_f.Frm.prototype.show_if_needs_refresh = function() {\n\tif(this.doc.__needs_refresh) {\n\t\tif(this.doc.__unsaved) {\n\t\t\tthis.dashboard.clear_headline();\n\t\t\tthis.dashboard.set_headline_alert(__(\"This form has been modified after you have loaded it\")\n\t\t\t\t+ '<a class=\"btn btn-xs btn-primary pull-right\" onclick=\"cur_frm.reload_doc()\">'\n\t\t\t\t+ __(\"Refresh\") + '</a>', \"alert-warning\");\n\t\t} else {\n\t\t\tthis.reload_doc();\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.render_form = function(is_a_different_doc) {\n\tif(!this.meta.istable) {\n\t\tthis.layout.doc = this.doc;\n\t\tthis.layout.attach_doc_and_docfields();\n\n\t\tthis.sidebar = new frappe.ui.form.Sidebar({\n\t\t\tfrm: this,\n\t\t\tpage: this.page\n\t\t});\n\t\tthis.sidebar.make();\n\n\t\t// clear layout message\n\t\tthis.layout.show_message();\n\n\t\tfrappe.run_serially([\n\t\t\t// header must be refreshed before client methods\n\t\t\t// because add_custom_button\n\t\t\t() => this.refresh_header(is_a_different_doc),\n\t\t\t// trigger global trigger\n\t\t\t// to use this\n\t\t\t() => $(document).trigger('form-refresh', [this]),\n\t\t\t// fields\n\t\t\t() => this.refresh_fields(),\n\t\t\t// call trigger\n\t\t\t() => this.script_manager.trigger(\"refresh\"),\n\t\t\t// call onload post render for callbacks to be fired\n\t\t\t() => {\n\t\t\t\tif(this.cscript.is_onload) {\n\t\t\t\t\treturn this.script_manager.trigger(\"onload_post_render\");\n\t\t\t\t}\n\t\t\t},\n\t\t\t() => this.dashboard.after_refresh()\n\t\t]);\n\t\t// focus on first input\n\n\t\tif(this.is_new()) {\n\t\t\tvar first = this.form_wrapper.find('.form-layout input:first');\n\t\t\tif(!in_list([\"Date\", \"Datetime\"], first.attr(\"data-fieldtype\"))) {\n\t\t\t\tfirst.focus();\n\t\t\t}\n\t\t}\n\t} else {\n\t\tthis.refresh_header(is_a_different_doc);\n\t}\n\n\tthis.$wrapper.trigger('render_complete');\n\n\tif(!this.hidden) {\n\t\tthis.layout.show_empty_form_message();\n\t}\n\n\tthis.scroll_to_element();\n};\n\n_f.Frm.prototype.refresh_field = function(fname) {\n\tif(this.fields_dict[fname] && this.fields_dict[fname].refresh) {\n\t\tthis.fields_dict[fname].refresh();\n\t\tthis.layout.refresh_dependency();\n\t}\n};\n\n_f.Frm.prototype.refresh_fields = function() {\n\tthis.layout.refresh(this.doc);\n\tthis.layout.primary_button = this.$wrapper.find(\".btn-primary\");\n\n\t// cleanup activities after refresh\n\tthis.cleanup_refresh(this);\n};\n\n\n_f.Frm.prototype.cleanup_refresh = function() {\n\tvar me = this;\n\tif(me.fields_dict['amended_from']) {\n\t\tif (me.doc.amended_from) {\n\t\t\tunhide_field('amended_from');\n\t\t\tif (me.fields_dict['amendment_date']) unhide_field('amendment_date');\n\t\t} else {\n\t\t\thide_field('amended_from');\n\t\t\tif (me.fields_dict['amendment_date']) hide_field('amendment_date');\n\t\t}\n\t}\n\n\tif(me.fields_dict['trash_reason']) {\n\t\tif(me.doc.trash_reason && me.doc.docstatus == 2) {\n\t\t\tunhide_field('trash_reason');\n\t\t} else {\n\t\t\thide_field('trash_reason');\n\t\t}\n\t}\n\n\tif(me.meta.autoname && me.meta.autoname.substr(0,6)=='field:' && !me.doc.__islocal) {\n\t\tvar fn = me.meta.autoname.substr(6);\n\n\t\tif (me.doc[fn]) {\n\t\t\tme.toggle_display(fn, false);\n\t\t}\n\t}\n\n\tif(me.meta.autoname==\"naming_series:\" && !me.doc.__islocal) {\n\t\tme.toggle_display(\"naming_series\", false);\n\t}\n};\n\n_f.Frm.prototype.setnewdoc = function() {\n\t// moved this call to refresh function\n\t// this.check_doctype_conflict(docname);\n\tvar me = this;\n\n\t// hide any open grid\n\tthis.script_manager.trigger(\"before_load\", this.doctype, this.docname)\n\t\t.then(() => {\n\t\t\tme.script_manager.trigger(\"onload\");\n\t\t\tme.opendocs[me.docname] = true;\n\t\t\tme.render_form();\n\n\t\t\tfrappe.after_ajax(function() {\n\t\t\t\tme.trigger_link_fields();\n\t\t\t});\n\n\t\t\tfrappe.breadcrumbs.add(me.meta.module, me.doctype);\n\t\t});\n\n\t// update seen\n\tif(this.meta.track_seen) {\n\t\t$('.list-id[data-name=\"'+ me.docname +'\"]').addClass('seen');\n\t}\n};\n\n_f.Frm.prototype.trigger_link_fields = function() {\n\t// trigger link fields which have default values set\n\tif (this.is_new() && this.doc.__run_link_triggers) {\n\t\t$.each(this.fields_dict, function(fieldname, field) {\n\t\t\tif (field.df.fieldtype==\"Link\" && this.doc[fieldname]) {\n\t\t\t\t// triggers add fetch, sets value in model and runs triggers\n\t\t\t\tfield.set_value(this.doc[fieldname]);\n\t\t\t}\n\t\t});\n\n\t\tdelete this.doc.__run_link_triggers;\n\t}\n};\n\n_f.Frm.prototype.runscript = function(scriptname, callingfield, onrefresh) {\n\tvar me = this;\n\tif(this.docname) {\n\t\t// send to run\n\t\tif(callingfield)\n\t\t\t$(callingfield.input).set_working();\n\n\t\tfrappe.call({\n\t\t\tmethod: \"runserverobj\",\n\t\t\targs: {'docs':this.doc, 'method':scriptname },\n\t\t\tbtn: callingfield.$input,\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tif(onrefresh) {\n\t\t\t\t\t\tonrefresh(r);\n\t\t\t\t\t}\n\n\t\t\t\t\tme.refresh_fields();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\n_f.Frm.prototype.copy_doc = function(onload, from_amend) {\n\tthis.validate_form_action(\"Create\");\n\tvar newdoc = frappe.model.copy_doc(this.doc, from_amend);\n\n\tnewdoc.idx = null;\n\tnewdoc.__run_link_triggers = false;\n\tif(onload) {\n\t\tonload(newdoc);\n\t}\n\tfrappe.set_route('Form', newdoc.doctype, newdoc.name);\n};\n\n_f.Frm.prototype.reload_doc = function() {\n\tthis.check_doctype_conflict(this.docname);\n\n\tvar me = this;\n\n\tif(!me.doc.__islocal) {\n\t\tfrappe.model.remove_from_locals(me.doctype, me.docname);\n\t\tfrappe.model.with_doc(me.doctype, me.docname, function() {\n\t\t\tme.refresh();\n\t\t});\n\t}\n};\n\nfrappe.validated = 0;\n// Proxy for frappe.validated\nObject.defineProperty(window, 'validated', {\n\tget: function() {\n\t\tconsole.warn('Please use `frappe.validated` instead of `validated`. It will be deprecated soon.');\n\t\treturn frappe.validated;\n\t},\n\tset: function(value) {\n\t\tconsole.warn('Please use `frappe.validated` instead of `validated`. It will be deprecated soon.');\n\t\tfrappe.validated = value;\n\t\treturn frappe.validated;\n\t}\n});\n\n_f.Frm.prototype.save = function(save_action, callback, btn, on_error) {\n\tlet me = this;\n\treturn new Promise((resolve, reject) => {\n\t\tbtn && $(btn).prop(\"disabled\", true);\n\t\t$(document.activeElement).blur();\n\n\t\tfrappe.ui.form.close_grid_form();\n\t\t// let any pending js process finish\n\t\tsetTimeout(function() {\n\t\t\tme._save(save_action, callback, btn, on_error, resolve, reject);\n\t\t}, 100);\n\t}).then(() => {\n\t\tme.show_success_action();\n\t}).catch((e) => {\n\t\tconsole.error(e);\n\t});\n};\n\n_f.Frm.prototype._save = function(save_action, callback, btn, on_error, resolve, reject) {\n\tvar me = this;\n\tif(!save_action) save_action = \"Save\";\n\tthis.validate_form_action(save_action, resolve);\n\n\tif((!this.meta.in_dialog || this.in_form) && !this.meta.istable) {\n\t\tfrappe.utils.scroll_to(0);\n\t}\n\tvar after_save = function(r) {\n\t\tif(!r.exc) {\n\t\t\tif ([\"Save\", \"Update\", \"Amend\"].indexOf(save_action)!==-1) {\n\t\t\t\tfrappe.utils.play_sound(\"click\");\n\t\t\t}\n\n\t\t\tme.script_manager.trigger(\"after_save\");\n\t\t\tme.refresh();\n\t\t} else {\n\t\t\tif(on_error) {\n\t\t\t\ton_error();\n\t\t\t\treject();\n\t\t\t}\n\t\t}\n\t\tcallback && callback(r);\n\t\tresolve();\n\t};\n\n\tvar fail = () => {\n\t\tbtn && $(btn).prop(\"disabled\", false);\n\t\tif(on_error) {\n\t\t\ton_error();\n\t\t\treject();\n\t\t}\n\t};\n\n\tif(save_action != \"Update\") {\n\t\t// validate\n\t\tfrappe.validated = true;\n\t\tfrappe.run_serially([\n\t\t\t() => this.script_manager.trigger(\"validate\"),\n\t\t\t() => this.script_manager.trigger(\"before_save\"),\n\t\t\t() => {\n\t\t\t\tif(!frappe.validated) {\n\t\t\t\t\tfail();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfrappe.ui.form.save(me, save_action, after_save, btn);\n\t\t\t}\n\t\t]).catch(fail);\n\t} else {\n\t\tfrappe.ui.form.save(me, save_action, after_save, btn);\n\t}\n};\n\n\n_f.Frm.prototype.savesubmit = function(btn, callback, on_error) {\n\tvar me = this;\n\n\tlet handle_fail = () => {\n\t\t$(btn).prop('disabled', false);\n\t\tif (on_error) {\n\t\t\ton_error();\n\t\t}\n\t};\n\n\treturn new Promise(resolve => {\n\t\tthis.validate_form_action(\"Submit\");\n\t\tfrappe.confirm(__(\"Permanently Submit {0}?\", [this.docname]), function() {\n\t\t\tfrappe.validated = true;\n\t\t\tme.script_manager.trigger(\"before_submit\").then(function() {\n\t\t\t\tif(!frappe.validated) {\n\t\t\t\t\thandle_fail();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tme.save('Submit', function(r) {\n\t\t\t\t\tif(r.exc) {\n\t\t\t\t\t\thandle_fail();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.utils.play_sound(\"submit\");\n\t\t\t\t\t\tcallback && callback();\n\t\t\t\t\t\tme.script_manager.trigger(\"on_submit\")\n\t\t\t\t\t\t\t.then(() => resolve(me));\n\t\t\t\t\t}\n\t\t\t\t}, btn, () => handle_fail(), resolve);\n\t\t\t});\n\t\t}, () => handle_fail() );\n\t});\n};\n\n_f.Frm.prototype.savecancel = function(btn, callback, on_error) {\n\tvar me = this;\n\n\tlet handle_fail = () => {\n\t\t$(btn).prop('disabled', false);\n\t\tif (on_error) {\n\t\t\ton_error();\n\t\t}\n\t};\n\n\tthis.validate_form_action('Cancel');\n\tfrappe.confirm(__(\"Permanently Cancel {0}?\", [this.docname]), function() {\n\t\tfrappe.validated = true;\n\t\tme.script_manager.trigger(\"before_cancel\").then(function() {\n\t\t\tif(!frappe.validated) {\n\t\t\t\thandle_fail();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar after_cancel = function(r) {\n\t\t\t\tif(r.exc) {\n\t\t\t\t\thandle_fail();\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.utils.play_sound(\"cancel\");\n\t\t\t\t\tme.refresh();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t\tme.script_manager.trigger(\"after_cancel\");\n\t\t\t\t}\n\t\t\t};\n\t\t\tfrappe.ui.form.save(me, \"cancel\", after_cancel, btn);\n\t\t});\n\t}, () => handle_fail());\n};\n\n// delete the record\n_f.Frm.prototype.savetrash = function() {\n\tthis.validate_form_action(\"Delete\");\n\tfrappe.model.delete_doc(this.doctype, this.docname, function() {\n\t\twindow.history.back();\n\t});\n};\n\n_f.Frm.prototype.amend_doc = function() {\n\tif(!this.fields_dict['amended_from']) {\n\t\talert('\"amended_from\" field must be present to do an amendment.');\n\t\treturn;\n\t}\n\tthis.validate_form_action(\"Amend\");\n\tvar me = this;\n\tvar fn = function(newdoc) {\n\t\tnewdoc.amended_from = me.docname;\n\t\tif(me.fields_dict && me.fields_dict['amendment_date'])\n\t\t\tnewdoc.amendment_date = frappe.datetime.obj_to_str(new Date());\n\t};\n\tthis.copy_doc(fn, 1);\n\tfrappe.utils.play_sound(\"click\");\n};\n\n_f.Frm.prototype.disable_save = function() {\n\t// IMPORTANT: this function should be called in refresh event\n\tthis.save_disabled = true;\n\tthis.toolbar.current_status = null;\n\tthis.page.clear_primary_action();\n};\n\n_f.Frm.prototype.enable_save = function() {\n\tthis.save_disabled = false;\n\tthis.toolbar.set_primary_action();\n};\n\n_f.Frm.prototype.save_or_update = function() {\n\tif(this.save_disabled) return;\n\n\tif(this.doc.docstatus===0) {\n\t\tthis.save();\n\t} else if(this.doc.docstatus===1 && this.doc.__unsaved) {\n\t\tthis.save(\"Update\");\n\t}\n};\n\n_f.Frm.prototype.dirty = function() {\n\tthis.doc.__unsaved = 1;\n\tthis.$wrapper.trigger('dirty');\n};\n\n_f.Frm.prototype.get_docinfo = function() {\n\treturn frappe.model.docinfo[this.doctype][this.docname];\n};\n\n_f.Frm.prototype.is_dirty = function() {\n\treturn this.doc.__unsaved;\n};\n\n_f.Frm.prototype.is_new = function() {\n\treturn this.doc.__islocal;\n};\n\n\n_f.Frm.prototype.reload_docinfo = function(callback) {\n\tvar me = this;\n\tfrappe.call({\n\t\tmethod: \"frappe.desk.form.load.get_docinfo\",\n\t\targs: {\n\t\t\tdoctype: me.doctype,\n\t\t\tname: me.doc.name\n\t\t},\n\t\tcallback: function(r) {\n\t\t\t// docinfo will be synced\n\t\t\tif(callback) callback(r.docinfo);\n\t\t\tme.timeline.refresh();\n\t\t\tme.assign_to.refresh();\n\t\t\tme.attachments.refresh();\n\t\t}\n\t});\n};\n\n\n_f.Frm.prototype.get_perm = function(permlevel, access_type) {\n\treturn this.perm[permlevel] ? this.perm[permlevel][access_type] : null;\n};\n\n\n_f.Frm.prototype.set_intro = function(txt, color) {\n\tthis.dashboard.set_headline_alert(txt, color);\n};\n\n_f.Frm.prototype.set_footnote = function(txt) {\n\tthis.footnote_area = frappe.utils.set_footnote(this.footnote_area, this.body, txt);\n};\n\n\n_f.Frm.prototype.add_custom_button = function(label, fn, group) {\n\t// temp! old parameter used to be icon\n\tif(group && group.indexOf(\"fa fa-\")!==-1) group = null;\n\tvar btn = this.page.add_inner_button(label, fn, group);\n\tif(btn) {\n\t\tthis.custom_buttons[label] = btn;\n\t}\n\treturn btn;\n};\n\n//Remove all custom buttons\n_f.Frm.prototype.clear_custom_buttons = function() {\n\tthis.page.clear_inner_toolbar();\n\tthis.page.clear_user_actions();\n\tthis.custom_buttons = {};\n};\n\n//Remove specific custom button by button Label\n_f.Frm.prototype.remove_custom_button = function(label, group) {\n\tthis.page.remove_inner_button(label, group);\n};\n\n_f.Frm.prototype.add_fetch = function(link_field, src_field, tar_field) {\n\tif(!this.fetch_dict[link_field]) {\n\t\tthis.fetch_dict[link_field] = {'columns':[], 'fields':[]};\n\t}\n\tthis.fetch_dict[link_field].columns.push(src_field);\n\tthis.fetch_dict[link_field].fields.push(tar_field);\n};\n\n_f.Frm.prototype.set_print_heading = function(txt) {\n\tthis.pformat[this.docname] = txt;\n};\n\n_f.Frm.prototype.action_perm_type_map = {\n\t\"Create\": \"create\",\n\t\"Save\": \"write\",\n\t\"Submit\": \"submit\",\n\t\"Update\": \"submit\",\n\t\"Cancel\": \"cancel\",\n\t\"Amend\": \"amend\",\n\t\"Delete\": \"delete\"\n};\n\n_f.Frm.prototype.validate_form_action = function(action, resolve) {\n\tvar perm_to_check = this.action_perm_type_map[action];\n\tvar allowed_for_workflow = false;\n\tvar perms = frappe.perm.get_perm(this.doc.doctype)[0];\n\n\t// Allow submit, write, cancel and create permissions for read only documents that are assigned by\n\t// workflows if the user already have those permissions. This is to allow for users to\n\t// continue through the workflow states and to allow execution of functions like Duplicate.\n\tif ((frappe.workflow.is_read_only(this.doctype, this.docname) && (perms[\"write\"] ||\n\t\tperms[\"create\"] || perms[\"submit\"] || perms[\"cancel\"])) || !frappe.workflow.is_read_only(this.doctype, this.docname)) {\n\t\tallowed_for_workflow = true;\n\t}\n\n\tif (!this.perm[0][perm_to_check] && !allowed_for_workflow) {\n\t\tif(resolve) {\n\t\t\t// re-enable buttons\n\t\t\tresolve();\n\t\t}\n\t\tfrappe.throw (__(\"No permission to '{0}' {1}\", [__(action), __(this.doc.doctype)]));\n\t}\n};\n\n_f.Frm.prototype.has_perm = function(ptype) {\n\treturn frappe.perm.has_perm(this.doctype, 0, ptype, this.doc);\n};\n\n_f.Frm.prototype.scroll_to_element = function() {\n\tif (frappe.route_options && frappe.route_options.scroll_to) {\n\t\tvar scroll_to = frappe.route_options.scroll_to;\n\t\tdelete frappe.route_options.scroll_to;\n\n\t\tvar selector = [];\n\t\tfor (var key in scroll_to) {\n\t\t\tvar value = scroll_to[key];\n\t\t\tselector.push(repl('[data-%(key)s=\"%(value)s\"]', {key: key, value: value}));\n\t\t}\n\n\t\tselector = $(selector.join(\" \"));\n\t\tif (selector.length) {\n\t\t\tfrappe.utils.scroll_to(selector);\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.show_success_action = function() {\n\tconst route = frappe.get_route();\n\tif (route[0] !== 'Form') return;\n\tif (this.meta.is_submittable && this.doc.docstatus !== 1) return;\n\n\tconst success_action = new frappe.ui.form.SuccessAction(this);\n\tsuccess_action.show();\n};\n\n_f.Frm.prototype.is_first_creation = function() {\n\tlet { modified, creation } = this.doc;\n\n\t// strip out milliseconds\n\tmodified = modified.split('.')[0];\n\tcreation = creation.split('.')[0];\n\n\treturn modified === creation;\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n/* eslint-disable no-console */\n\nwindow.get_server_fields = function(method, arg, table_field, doc, dt, dn, allow_edit, call_back) {\n\tconsole.warn(\"This function 'get_server_fields' has been deprecated and will be removed soon.\");\n\tfrappe.dom.freeze();\n\tif($.isPlainObject(arg)) arg = JSON.stringify(arg);\n\treturn $c('runserverobj', {'method': method, 'docs': JSON.stringify(doc), 'arg': arg },\n\t\tfunction(r) {\n\t\t\tfrappe.dom.unfreeze();\n\t\t\tif (r.message)  {\n\t\t\t\tvar d = locals[dt][dn];\n\t\t\t\tvar field_dict = r.message;\n\t\t\t\tfor(var key in field_dict) {\n\t\t\t\t\td[key] = field_dict[key];\n\t\t\t\t\tif (table_field)\n\t\t\t\t\t\trefresh_field(key, d.name, table_field);\n\t\t\t\t\telse\n\t\t\t\t\t\trefresh_field(key);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(call_back){\n\t\t\t\tdoc = locals[doc.doctype][doc.name];\n\t\t\t\tcall_back(doc, dt, dn);\n\t\t\t}\n\t\t});\n};\n\n\nwindow.set_multiple = function(dt, dn, dict, table_field) {\n\tvar d = locals[dt][dn];\n\tfor(var key in dict) {\n\t\td[key] = dict[key];\n\t\tif (table_field)\n\t\t\trefresh_field(key, d.name, table_field);\n\t\telse\n\t\t\trefresh_field(key);\n\t}\n};\n\nwindow.refresh_many = function(flist, dn, table_field) {\n\tfor(var i in flist) {\n\t\tif (table_field)\n\t\t\trefresh_field(flist[i], dn, table_field);\n\t\telse\n\t\t\trefresh_field(flist[i]);\n\t}\n};\n\nwindow.set_field_tip = function(n,txt) {\n\tvar df = frappe.meta.get_docfield(cur_frm.doctype, n, cur_frm.docname);\n\tif(df)df.description = txt;\n\n\tif(cur_frm && cur_frm.fields_dict) {\n\t\tif(cur_frm.fields_dict[n])\n\t\t\tcur_frm.fields_dict[n].comment_area.innerHTML = frappe.utils.replace_newlines(txt);\n\t\telse\n\t\t\tconsole.log('[set_field_tip] Unable to set field tip: ' + n);\n\t}\n};\n\nwindow.refresh_field = function(n, docname, table_field) {\n\t// multiple\n\tif(typeof n==typeof [])\n\t\trefresh_many(n, docname, table_field);\n\n\tif (n && typeof n==='string' && table_field){\n\t\tvar grid = cur_frm.fields_dict[table_field].grid,\n\t\t\tfield = frappe.utils.filter_dict(grid.docfields, {fieldname: n});\n\t\tif (field && field.length){\n\t\t\tfield = field[0];\n\t\t\tvar meta = frappe.meta.get_docfield(field.parent, field.fieldname, docname);\n\t\t\t$.extend(field, meta);\n\t\t\tif (docname){\n\t\t\t\tcur_frm.fields_dict[table_field].grid.grid_rows_by_docname[docname].refresh_field(n);\n\t\t\t} else {\n\t\t\t\tcur_frm.fields_dict[table_field].grid.refresh();\n\t\t\t}\n\t\t}\n\t} else if(cur_frm) {\n\t\tcur_frm.refresh_field(n);\n\t}\n};\n\nwindow.set_field_options = function(n, txt) {\n\tcur_frm.set_df_property(n, 'options', txt);\n};\n\nwindow.set_field_permlevel = function(n, level) {\n\tcur_frm.set_df_property(n, 'permlevel', level);\n};\n\nwindow.toggle_field = function(n, hidden) {\n\tvar df = frappe.meta.get_docfield(cur_frm.doctype, n, cur_frm.docname);\n\tif(df) {\n\t\tdf.hidden = hidden;\n\t\trefresh_field(n);\n\t} else {\n\t\tconsole.log((hidden ? \"hide_field\" : \"unhide_field\") + \" cannot find field \" + n);\n\t}\n};\n\nwindow.hide_field = function(n) {\n\tif(cur_frm) {\n\t\tif(n.substr) toggle_field(n, 1);\n\t\telse {\n\t\t\tfor(var i in n) toggle_field(n[i], 1);\n\t\t}\n\t}\n};\n\nwindow.unhide_field = function(n) {\n\tif(cur_frm) {\n\t\tif(n.substr) toggle_field(n, 0);\n\t\telse {\n\t\t\tfor(var i in n) toggle_field(n[i], 0);\n\t\t}\n\t}\n};\n\nwindow.get_field_obj = function(fn) {\n\treturn cur_frm.fields_dict[fn];\n};\n\n_f.Frm.prototype.get_doc = function() {\n\treturn locals[this.doctype][this.docname];\n};\n\n_f.Frm.prototype.set_currency_labels = function(fields_list, currency, parentfield) {\n\t// To set the currency in the label\n\t// For example Total Cost(INR), Total Cost(USD)\n\n\tvar me = this;\n\tvar doctype = parentfield ? this.fields_dict[parentfield].grid.doctype : this.doc.doctype;\n\tvar field_label_map = {};\n\tvar grid_field_label_map = {};\n\n\t$.each(fields_list, function(i, fname) {\n\t\tvar docfield = frappe.meta.docfield_map[doctype][fname];\n\t\tif(docfield) {\n\t\t\tvar label = __(docfield.label || \"\").replace(/\\([^\\)]*\\)/g, \"\"); // eslint-disable-line\n\t\t\tif(parentfield) {\n\t\t\t\tgrid_field_label_map[doctype + \"-\" + fname] =\n\t\t\t\t\tlabel.trim() + \" (\" + __(currency) + \")\";\n\t\t\t} else {\n\t\t\t\tfield_label_map[fname] = label.trim() + \" (\" + currency + \")\";\n\t\t\t}\n\t\t}\n\t});\n\n\t$.each(field_label_map, function(fname, label) {\n\t\tme.fields_dict[fname].set_label(label);\n\t});\n\n\t$.each(grid_field_label_map, function(fname, label) {\n\t\tfname = fname.split(\"-\");\n\t\tvar df = frappe.meta.get_docfield(fname[0], fname[1], me.doc.name);\n\t\tif(df) df.label = label;\n\t});\n};\n\n_f.Frm.prototype.field_map = function(fnames, fn) {\n\tif(typeof fnames==='string') {\n\t\tif(fnames == '*') {\n\t\t\tfnames = Object.keys(this.fields_dict);\n\t\t} else {\n\t\t\tfnames = [fnames];\n\t\t}\n\t}\n\tfor (var i=0, l=fnames.length; i<l; i++) {\n\t\tvar fieldname = fnames[i];\n\t\tvar field = frappe.meta.get_docfield(cur_frm.doctype, fieldname, this.docname);\n\t\tif(field) {\n\t\t\tfn(field);\n\t\t\tthis.refresh_field(fieldname);\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.get_docfield = function(fieldname1, fieldname2) {\n\tif(fieldname2) {\n\t\t// for child\n\t\tvar doctype = this.get_docfield(fieldname1).options;\n\t\treturn frappe.meta.get_docfield(doctype, fieldname2, this.docname);\n\t} else {\n\t\t// for parent\n\t\treturn frappe.meta.get_docfield(this.doctype, fieldname1, this.docname);\n\t}\n};\n\n_f.Frm.prototype.set_df_property = function(fieldname, property, value, docname, table_field) {\n\tvar df;\n\tif (!docname && !table_field){\n\t\tdf = this.get_docfield(fieldname);\n\t} else {\n\t\tvar grid = this.fields_dict[table_field].grid,\n\t\t\tfname = frappe.utils.filter_dict(grid.docfields, {'fieldname': fieldname});\n\t\tif (fname && fname.length)\n\t\t\tdf = frappe.meta.get_docfield(fname[0].parent, fieldname, docname);\n\t}\n\tif(df && df[property] != value) {\n\t\tdf[property] = value;\n\t\trefresh_field(fieldname, table_field);\n\t}\n};\n\n_f.Frm.prototype.toggle_enable = function(fnames, enable) {\n\tthis.field_map(fnames, function(field) {\n\t\tfield.read_only = enable ? 0 : 1;\n\t});\n};\n\n_f.Frm.prototype.toggle_reqd = function(fnames, mandatory) {\n\tthis.field_map(fnames, function(field) {\n\t\tfield.reqd = mandatory ? true : false;\n\t});\n};\n\n_f.Frm.prototype.toggle_display = function(fnames, show) {\n\tthis.field_map(fnames, function(field) {\n\t\tfield.hidden = show ? 0 : 1;\n\t});\n};\n\n_f.Frm.prototype.call_server = function(method, args, callback) {\n\treturn $c_obj(this.doc, method, args, callback);\n};\n\n_f.Frm.prototype.get_files = function() {\n\treturn this.attachments\n\t\t? frappe.utils.sort(this.attachments.get_attachments(), \"file_name\", \"string\")\n\t\t: [] ;\n};\n\n_f.Frm.prototype.set_query = function(fieldname, opt1, opt2) {\n\tif(opt2) {\n\t\t// on child table\n\t\t// set_query(fieldname, parent fieldname, query)\n\t\tthis.fields_dict[opt1].grid.get_field(fieldname).get_query = opt2;\n\t} else {\n\t\t// on parent table\n\t\t// set_query(fieldname, query)\n\t\tif(this.fields_dict[fieldname]) {\n\t\t\tthis.fields_dict[fieldname].get_query = opt1;\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.set_value_if_missing = function(field, value) {\n\treturn this.set_value(field, value, true);\n};\n\n_f.Frm.prototype.clear_table = function(fieldname) {\n\tfrappe.model.clear_table(this.doc, fieldname);\n};\n\n_f.Frm.prototype.add_child = function(fieldname, values) {\n\tvar doc = frappe.model.add_child(this.doc, frappe.meta.get_docfield(this.doctype, fieldname).options, fieldname);\n\tif(values) {\n\t\t// Values of unique keys should not be overridden\n\t\tvar d = {};\n\t\tvar unique_keys = [\"idx\", \"name\"];\n\n\t\tObject.keys(values).map((key) => {\n\t\t\tif(!unique_keys.includes(key)) {\n\t\t\t\td[key] = values[key];\n\t\t\t}\n\t\t});\n\n\t\t$.extend(doc, d);\n\t}\n\treturn doc;\n};\n\n_f.Frm.prototype.set_value = function(field, value, if_missing) {\n\tvar me = this;\n\tvar _set = function(f, v) {\n\t\tvar fieldobj = me.fields_dict[f];\n\t\tif(fieldobj) {\n\t\t\tif(!if_missing || !frappe.model.has_value(me.doctype, me.doc.name, f)) {\n\t\t\t\tif(frappe.model.table_fields.includes(fieldobj.df.fieldtype) && $.isArray(v)) {\n\n\t\t\t\t\tfrappe.model.clear_table(me.doc, fieldobj.df.fieldname);\n\n\t\t\t\t\tfor (var i=0, j=v.length; i < j; i++) {\n\t\t\t\t\t\tvar d = v[i];\n\t\t\t\t\t\tvar child = frappe.model.add_child(me.doc, fieldobj.df.options,\n\t\t\t\t\t\t\tfieldobj.df.fieldname, i+1);\n\t\t\t\t\t\t$.extend(child, d);\n\t\t\t\t\t}\n\n\t\t\t\t\tme.refresh_field(f);\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t} else {\n\t\t\t\t\treturn frappe.model.set_value(me.doctype, me.doc.name, f, v);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfrappe.msgprint(__(\"Field {0} not found.\",[f]));\n\t\t\tthrow \"frm.set_value\";\n\t\t}\n\t};\n\n\tif(typeof field==\"string\") {\n\t\treturn _set(field, value);\n\t} else if($.isPlainObject(field)) {\n\t\tlet tasks = [];\n\t\tfor (let f in field) {\n\t\t\tlet v = field[f];\n\t\t\tif(me.get_field(f)) {\n\t\t\t\ttasks.push(() => _set(f, v));\n\t\t\t}\n\t\t}\n\t\treturn frappe.run_serially(tasks);\n\t}\n};\n\n_f.Frm.prototype.call = function(opts, args, callback) {\n\tvar me = this;\n\tif(typeof opts==='string') {\n\t\t// called as frm.call('do_this', {with_arg: 'arg'});\n\t\topts = {\n\t\t\tmethod: opts,\n\t\t\tdoc: this.doc,\n\t\t\targs: args,\n\t\t\tcallback: callback\n\t\t};\n\t}\n\tif(!opts.doc) {\n\t\tif(opts.method.indexOf(\".\")===-1)\n\t\t\topts.method = frappe.model.get_server_module_name(me.doctype) + \".\" + opts.method;\n\t\topts.original_callback = opts.callback;\n\t\topts.callback = function(r) {\n\t\t\tif($.isPlainObject(r.message)) {\n\t\t\t\tif(opts.child) {\n\t\t\t\t\t// update child doc\n\t\t\t\t\topts.child = locals[opts.child.doctype][opts.child.name];\n\n\t\t\t\t\tvar std_field_list = [\"doctype\"].concat(frappe.model.std_fields_list);\n\t\t\t\t\tfor (var key in r.message) {\n\t\t\t\t\t\tif (std_field_list.indexOf(key)===-1) {\n\t\t\t\t\t\t\topts.child[key] = r.message[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tme.fields_dict[opts.child.parentfield].refresh();\n\t\t\t\t} else {\n\t\t\t\t\t// update parent doc\n\t\t\t\t\tme.set_value(r.message);\n\t\t\t\t}\n\t\t\t}\n\t\t\topts.original_callback && opts.original_callback(r);\n\t\t};\n\t} else {\n\t\topts.original_callback = opts.callback;\n\t\topts.callback = function(r) {\n\t\t\tif(!r.exc) me.refresh_fields();\n\n\t\t\topts.original_callback && opts.original_callback(r);\n\t\t};\n\n\t}\n\treturn frappe.call(opts);\n};\n\n_f.Frm.prototype.get_field = function(field) {\n\treturn this.fields_dict[field];\n};\n\n\n_f.Frm.prototype.set_read_only = function() {\n\tvar perm = [];\n\tvar docperms = frappe.perm.get_perm(this.doc.doctype);\n\tfor (var i=0, l=docperms.length; i<l; i++) {\n\t\tvar p = docperms[i];\n\t\tperm[p.permlevel || 0] = {read:1, print:1, cancel:1};\n\t}\n\tthis.perm = perm;\n};\n\n_f.Frm.prototype.trigger = function(event) {\n\treturn this.script_manager.trigger(event);\n};\n\n_f.Frm.prototype.get_formatted = function(fieldname) {\n\treturn frappe.format(this.doc[fieldname],\n\t\tfrappe.meta.get_docfield(this.doctype, fieldname, this.docname),\n\t\t{no_icon:true}, this.doc);\n};\n\n_f.Frm.prototype.open_grid_row = function() {\n\treturn frappe.ui.form.get_open_grid_form();\n};\n\n_f.Frm.prototype.is_new = function() {\n\treturn this.doc.__islocal;\n};\n\n_f.Frm.prototype.get_title = function() {\n\tif(this.meta.title_field) {\n\t\treturn this.doc[this.meta.title_field];\n\t} else {\n\t\treturn this.doc.name;\n\t}\n};\n\n_f.Frm.prototype.get_selected = function() {\n\t// returns list of children that are selected. returns [parentfield, name] for each\n\tvar selected = {}, me = this;\n\tfrappe.meta.get_table_fields(this.doctype).forEach(function(df) {\n\t\t// handle TableMultiselect child fields\n\t\tlet _selected = [];\n\n\t\tif(me.fields_dict[df.fieldname].grid) {\n\t\t\t_selected = me.fields_dict[df.fieldname].grid.get_selected();\n\t\t}\n\n\t\tif(_selected.length) {\n\t\t\tselected[df.fieldname] = _selected;\n\t\t}\n\t});\n\treturn selected;\n};\n\n_f.Frm.prototype.has_mapper = function() {\n\t// hackalert!\n\t// if open_mapped_doc is mentioned in the custom script, then mapper exists\n\tif(this._has_mapper === undefined) {\n\t\tthis._has_mapper = (this.meta.__js && this.meta.__js.search('open_mapped_doc')!==-1) ?\n\t\t\ttrue: false;\n\t}\n\treturn this._has_mapper;\n};\n\n_f.Frm.prototype.set_indicator_formatter = function(fieldname, get_color, get_text) {\n\t// get doctype from parent\n\tvar doctype;\n\tif(frappe.meta.docfield_map[this.doctype][fieldname]) {\n\t\tdoctype = this.doctype;\n\t} else {\n\t\tfrappe.meta.get_table_fields(this.doctype).every(function(df) {\n\t\t\tif(frappe.meta.docfield_map[df.options][fieldname]) {\n\t\t\t\tdoctype = df.options;\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t}\n\n\tfrappe.meta.docfield_map[doctype][fieldname].formatter =\n\t\tfunction(value, df, options, doc) {\n\t\t\tif(value) {\n\t\t\t\tvar label;\n\t\t\t\tif(get_text) {\n\t\t\t\t\tlabel = get_text(doc);\n\t\t\t\t} else if(frappe.form.link_formatters[df.options]) {\n\t\t\t\t\tlabel = frappe.form.link_formatters[df.options](value, doc);\n\t\t\t\t} else {\n\t\t\t\t\tlabel = value;\n\t\t\t\t}\n\n\t\t\t\tconst escaped_name = encodeURIComponent(value);\n\n\t\t\t\treturn repl('<a class=\"indicator %(color)s\" href=\"#Form/%(doctype)s/%(name)s\">%(label)s</a>', {\n\t\t\t\t\tcolor: get_color(doc || {}),\n\t\t\t\t\tdoctype: df.options,\n\t\t\t\t\tname: escaped_name,\n\t\t\t\t\tlabel: label\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t};\n};\n\n_f.Frm.prototype.can_create = function(doctype) {\n\t// return true or false if the user can make a particlar doctype\n\t// will check permission, `can_make_methods` if exists, or will decided on\n\t// basis of whether the document is submittable\n\tif(!frappe.model.can_create(doctype)) {\n\t\treturn false;\n\t}\n\n\tif(this.custom_make_buttons && this.custom_make_buttons[doctype]) {\n\t\t// custom buttons are translated and so are the keys\n\t\tconst key = __(this.custom_make_buttons[doctype]);\n\t\t// if the button is present, then show make\n\t\treturn !!this.custom_buttons[key];\n\t}\n\n\tif(this.can_make_methods && this.can_make_methods[doctype]) {\n\t\treturn this.can_make_methods[doctype](this);\n\t} else {\n\t\tif(this.meta.is_submittable && !this.doc.docstatus==1) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.make_new = function(doctype) {\n\t// make new doctype from the current form\n\t// will handover to `make_methods` if defined\n\t// or will create and match link fields\n\tvar me = this;\n\tif(this.make_methods && this.make_methods[doctype]) {\n\t\treturn this.make_methods[doctype](this);\n\t} else if(this.custom_make_buttons && this.custom_make_buttons[doctype]) {\n\t\tthis.custom_buttons[__(this.custom_make_buttons[doctype])].trigger('click');\n\t} else {\n\t\tfrappe.model.with_doctype(doctype, function() {\n\t\t\tvar new_doc = frappe.model.get_new_doc(doctype);\n\n\t\t\t// set link fields (if found)\n\t\t\tfrappe.get_meta(doctype).fields.forEach(function(df) {\n\t\t\t\tif(df.fieldtype==='Link' && df.options===me.doctype) {\n\t\t\t\t\tnew_doc[df.fieldname] = me.doc.name;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfrappe.ui.form.make_quick_entry(doctype, null, null, new_doc);\n\t\t\t// frappe.set_route('Form', doctype, new_doc.name);\n\t\t});\n\t}\n};\n\n_f.Frm.prototype.update_in_all_rows = function(table_fieldname, fieldname, value) {\n\t// update the child value in all tables where it is missing\n\tif(!value) return;\n\tvar cl = this.doc[table_fieldname] || [];\n\tfor(var i = 0; i < cl.length; i++){\n\t\tif(!cl[i][fieldname]) cl[i][fieldname] = value;\n\t}\n\trefresh_field(\"items\");\n};\n\n_f.Frm.prototype.get_sum = function(table_fieldname, fieldname) {\n\tlet sum = 0;\n\tfor (let d of (this.doc[table_fieldname] || [])) {\n\t\tsum += d[fieldname];\n\t}\n\treturn sum;\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\nfrappe.ui.form.Toolbar = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.refresh();\n\t\tthis.add_update_button_on_dirty();\n\t\tthis.setup_editable_title();\n\t},\n\trefresh: function() {\n\t\tthis.make_menu();\n\t\tthis.set_title();\n\t\tthis.page.clear_user_actions();\n\t\tthis.show_title_as_dirty();\n\t\tthis.set_primary_action();\n\n\t\tif(this.frm.meta.hide_toolbar) {\n\t\t\tthis.page.hide_menu();\n\t\t} else {\n\t\t\tif(this.frm.doc.__islocal) {\n\t\t\t\tthis.page.hide_menu();\n\t\t\t\tthis.print_icon && this.print_icon.addClass(\"hide\");\n\t\t\t} else {\n\t\t\t\tthis.page.show_menu();\n\t\t\t\tthis.print_icon && this.print_icon.removeClass(\"hide\");\n\t\t\t}\n\t\t}\n\t},\n\tset_title: function() {\n\t\tif(this.frm.meta.title_field) {\n\t\t\tvar title = strip_html((this.frm.doc[this.frm.meta.title_field] || \"\").trim() || this.frm.docname);\n\t\t\tif(this.frm.doc.__islocal || title === this.frm.docname || this.frm.meta.autoname===\"hash\") {\n\t\t\t\tthis.page.set_title_sub(\"\");\n\t\t\t} else {\n\t\t\t\tthis.page.set_title_sub(this.frm.docname);\n\t\t\t}\n\t\t} else {\n\t\t\tvar title = this.frm.docname;\n\t\t}\n\n\t\tvar me = this;\n\t\ttitle = __(title);\n\t\tthis.page.set_title(title);\n\t\tif(this.frm.meta.title_field) {\n\t\t\tfrappe.utils.set_title(title + \" - \" + this.frm.docname);\n\t\t}\n\t\tthis.page.$title_area.toggleClass(\"editable-title\",\n\t\t\t!!(this.is_title_editable() || this.can_rename()));\n\n\t\tthis.set_indicator();\n\t},\n\tis_title_editable: function() {\n\t\tif (this.frm.meta.title_field===\"title\"\n\t\t\t&& this.frm.perm[0].write\n\t\t\t&& !this.frm.get_docfield(\"title\").options\n\t\t\t&& !this.frm.doc.__islocal) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tcan_rename: function() {\n\t\treturn this.frm.perm[0].write && this.frm.meta.allow_rename && !this.frm.doc.__islocal;\n\t},\n\tsetup_editable_title: function() {\n\t\tvar me = this;\n\t\tthis.page.$title_area.find(\".title-text\").on(\"click\", function() {\n\t\t\tif(me.is_title_editable()) {\n\t\t\t\tfrappe.prompt({fieldname: \"title\", fieldtype:\"Data\",\n\t\t\t\t\tlabel: __(\"Title\"), reqd: 1, \"default\": me.frm.doc.title },\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tif(data.title) {\n\t\t\t\t\t\t\tme.frm.set_value(\"title\", data.title);\n\t\t\t\t\t\t\tif(!me.frm.doc.__islocal) {\n\t\t\t\t\t\t\t\tme.frm.save_or_update();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tme.set_title();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, __(\"Edit Title\"), __(\"Update\"));\n\t\t\t}\n\t\t\tif(me.can_rename()) {\n\t\t\t\tme.frm.rename_doc();\n\t\t\t}\n\t\t});\n\t},\n\tget_dropdown_menu: function(label) {\n\t\treturn this.page.add_dropdown(label);\n\t},\n\tset_indicator: function() {\n\t\tif(this.frm.save_disabled)\n\t\t\treturn;\n\n\t\tvar indicator = frappe.get_indicator(this.frm.doc);\n\t\tif(indicator) {\n\t\t\tthis.page.set_indicator(indicator[0], indicator[1]);\n\t\t} else {\n\t\t\tthis.page.clear_indicator();\n\t\t}\n\t},\n\tmake_menu: function() {\n\t\tthis.page.clear_icons();\n\t\tthis.page.clear_menu();\n\t\tvar me = this;\n\t\tvar p = this.frm.perm[0];\n\t\tvar docstatus = cint(this.frm.doc.docstatus);\n\t\tvar is_submittable = frappe.model.is_submittable(this.frm.doc.doctype)\n\t\tvar issingle = this.frm.meta.issingle;\n\t\tvar print_settings = frappe.model.get_doc(\":Print Settings\", \"Print Settings\")\n\t\tvar allow_print_for_draft = cint(print_settings.allow_print_for_draft);\n\t\tvar allow_print_for_cancelled = cint(print_settings.allow_print_for_cancelled);\n\n\t\t// Print\n\t\tif(!is_submittable || docstatus == 1  ||\n\t\t\t(allow_print_for_cancelled && docstatus == 2)||\n\t\t\t(allow_print_for_draft && docstatus == 0)) {\n\t\t\tif(frappe.model.can_print(null, me.frm) && !issingle) {\n\t\t\t\tthis.page.add_menu_item(__(\"Print\"), function() {\n\t\t\t\t\tme.frm.print_doc();}, true);\n\t\t\t\tthis.print_icon = this.page.add_action_icon(\"fa fa-print\", function() {\n\t\t\t\t\tme.frm.print_doc();});\n\t\t\t}\n\t\t}\n\n\t\t// email\n\t\tif(frappe.model.can_email(null, me.frm) && me.frm.doc.docstatus < 2) {\n\t\t\tthis.page.add_menu_item(__(\"Email\"), function() {\n\t\t\t\tme.frm.email_doc();}, true);\n\t\t}\n\n\t\t// Linked With\n\t\tif(!me.frm.meta.issingle) {\n\t\t\tthis.page.add_menu_item(__('Links'), function() {\n\t\t\t\tme.show_linked_with();\n\t\t\t}, true)\n\t\t}\n\n\t\t// copy\n\t\tif(in_list(frappe.boot.user.can_create, me.frm.doctype) && !me.frm.meta.allow_copy) {\n\t\t\tthis.page.add_menu_item(__(\"Duplicate\"), function() {\n\t\t\t\tme.frm.copy_doc();}, true);\n\t\t}\n\n\t\t// rename\n\t\tif(this.can_rename()) {\n\t\t\tthis.page.add_menu_item(__(\"Rename\"), function() {\n\t\t\t\tme.frm.rename_doc();}, true);\n\t\t}\n\n\t\t// reload\n\t\tthis.page.add_menu_item(__(\"Reload\"), function() {\n\t\t\tme.frm.reload_doc();}, true);\n\n\t\t// delete\n\t\tif((cint(me.frm.doc.docstatus) != 1) && !me.frm.doc.__islocal\n\t\t\t&& frappe.model.can_delete(me.frm.doctype)) {\n\t\t\tthis.page.add_menu_item(__(\"Delete\"), function() {\n\t\t\t\tme.frm.savetrash();}, true);\n\t\t}\n\n\t\tif(frappe.user_roles.includes(\"System Manager\")) {\n\t\t\tthis.page.add_menu_item(__(\"Customize\"), function() {\n\t\t\t\tfrappe.set_route(\"Form\", \"Customize Form\", {\n\t\t\t\t\tdoc_type: me.frm.doctype\n\t\t\t\t})\n\t\t\t}, true);\n\n\t\t\tif (frappe.boot.developer_mode===1 && me.frm.meta.issingle) {\n\t\t\t\t// edit doctype\n\t\t\t\tthis.page.add_menu_item(__(\"Edit DocType\"), function() {\n\t\t\t\t\tfrappe.set_route('Form', 'DocType', me.frm.doctype);\n\t\t\t\t}, true);\n\t\t\t}\n\t\t}\n\n\t\t// feedback\n\t\tif(!this.frm.doc.__unsaved) {\n\t\t\tif(is_submittable && docstatus == 1) {\n\t\t\t\tthis.page.add_menu_item(__(\"Request Feedback\"), function() {\n\t\t\t\t\tvar feedback = new frappe.utils.Feedback();\n\t\t\t\t\tfeedback.manual_feedback_request(me.frm.doc);\n\t\t\t\t}, true)\n\t\t\t}\n\t\t}\n\n\t\t// New\n\t\tif(p[CREATE] && !this.frm.meta.issingle) {\n\t\t\tthis.page.add_menu_item(__(\"New {0} (Ctrl+B)\", [__(me.frm.doctype)]), function() {\n\t\t\t\tfrappe.new_doc(me.frm.doctype, true);}, true);\n\t\t}\n\t},\n\tcan_save: function() {\n\t\treturn this.get_docstatus()===0;\n\t},\n\tcan_submit: function() {\n\t\treturn this.get_docstatus()===0\n\t\t\t&& !this.frm.doc.__islocal\n\t\t\t&& !this.frm.doc.__unsaved\n\t\t\t&& this.frm.perm[0].submit\n\t\t\t&& !this.has_workflow();\n\t},\n\tcan_update: function() {\n\t\treturn this.get_docstatus()===1\n\t\t\t&& !this.frm.doc.__islocal\n\t\t\t&& this.frm.perm[0].submit\n\t\t\t&& this.frm.doc.__unsaved\n\t},\n\tcan_cancel: function() {\n\t\treturn this.get_docstatus()===1\n\t\t\t&& this.frm.perm[0].cancel\n\t\t\t&& !this.read_only;\n\t},\n\tcan_amend: function() {\n\t\treturn this.get_docstatus()===2\n\t\t\t&& this.frm.perm[0].amend\n\t\t\t&& !this.read_only;\n\t},\n\thas_workflow: function() {\n\t\tif(this._has_workflow === undefined)\n\t\t\tthis._has_workflow = frappe.get_list(\"Workflow\", {document_type: this.frm.doctype}).length;\n\t\treturn this._has_workflow;\n\t},\n\tget_docstatus: function() {\n\t\treturn cint(this.frm.doc.docstatus);\n\t},\n\tshow_linked_with: function() {\n\t\tif(!this.frm.linked_with) {\n\t\t\tthis.frm.linked_with = new frappe.ui.form.LinkedWith({\n\t\t\t\tfrm: this.frm\n\t\t\t});\n\t\t}\n\t\tthis.frm.linked_with.show();\n\t},\n\tset_primary_action: function(dirty) {\n\t\tif (!dirty) {\n\t\t\t// don't clear actions menu if dirty\n\t\t\tthis.page.clear_user_actions();\n\t\t}\n\n\t\tvar status = this.get_action_status();\n\t\tif (status) {\n\t\t\tif (status !== this.current_status) {\n\t\t\t\tthis.set_page_actions(status);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.page.clear_actions();\n\t\t\tthis.current_status = null\n\t\t}\n\t},\n\tget_action_status: function() {\n\t\tvar status = null;\n\t\tif (this.frm.page.current_view_name==='print' || this.frm.hidden) {\n\t\t\tstatus = \"Edit\";\n\t\t} else if (this.can_submit()) {\n\t\t\tstatus = \"Submit\";\n\t\t} else if (this.can_save()) {\n\t\t\tif (!this.frm.save_disabled) {\n\t\t\t\t//Show the save button if there is no workflow or if there is a workflow and there are changes\n\t\t\t\tif (this.has_workflow() ? this.frm.doc.__unsaved : true) {\n\t\t\t\t\tstatus = \"Save\";\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this.can_update()) {\n\t\t\tstatus = \"Update\";\n\t\t} else if (this.can_cancel()) {\n\t\t\tstatus = \"Cancel\";\n\t\t} else if (this.can_amend()) {\n\t\t\tstatus = \"Amend\";\n\t\t}\n\t\treturn status;\n\t},\n\tset_page_actions: function(status) {\n\t\tvar me = this;\n\t\tthis.page.clear_actions();\n\n\t\tif(status!== 'Edit') {\n\t\t\tvar perm_to_check = this.frm.action_perm_type_map[status];\n\t\t\tif(!this.frm.perm[0][perm_to_check]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif(status === \"Edit\") {\n\t\t\tthis.page.set_primary_action(__(\"Edit\"), function() {\n\t\t\t\tme.frm.page.set_view('main');\n\t\t\t}, 'octicon octicon-pencil');\n\t\t} else if(status === \"Cancel\") {\n\t\t\tthis.page.set_secondary_action(__(status), function() {\n\t\t\t\tme.frm.savecancel(this);\n\t\t\t}, \"octicon octicon-circle-slash\");\n\t\t} else {\n\t\t\tvar click = {\n\t\t\t\t\"Save\": function() {\n\t\t\t\t\treturn me.frm.save('Save', null, this);\n\t\t\t\t},\n\t\t\t\t\"Submit\": function() {\n\t\t\t\t\treturn me.frm.savesubmit(this);\n\t\t\t\t},\n\t\t\t\t\"Update\": function() {\n\t\t\t\t\treturn me.frm.save('Update', null, this);\n\t\t\t\t},\n\t\t\t\t\"Amend\": function() {\n\t\t\t\t\treturn me.frm.amend_doc();\n\t\t\t\t}\n\t\t\t}[status];\n\n\t\t\tvar icon = {\n\t\t\t\t\"Save\": \"octicon octicon-check\",\n\t\t\t\t\"Submit\": \"octicon octicon-lock\",\n\t\t\t\t\"Update\": \"octicon octicon-check\",\n\t\t\t\t\"Amend\": \"octicon octicon-split\"\n\t\t\t}[status];\n\n\t\t\tthis.page.set_primary_action(__(status), click, icon);\n\t\t}\n\n\t\tthis.current_status = status;\n\t},\n\tmake_cancel_amend_button: function() {\n\t\tvar me = this;\n\t\tvar docstatus = cint(this.frm.doc.docstatus);\n\t\tvar p = this.frm.perm[0];\n\t\tvar has_workflow = this.has_workflow();\n\n\t\tif(has_workflow) {\n\t\t\treturn;\n\t\t} else if(docstatus==1 && p[CANCEL]) {\n\t\t\tthis.page.set_secondary_action(__('Cancel'), function() {\n\t\t\t\tme.frm.savecancel(this) }, 'fa fa-ban-circle');\n\t\t} else if(docstatus==2 && p[AMEND]) {\n\t\t\tthis.page.set_secondary_action(__('Amend'), function() {\n\t\t\t\tme.frm.amend_doc() }, 'fa fa-pencil', true);\n\t\t}\n\t},\n\tadd_update_button_on_dirty: function() {\n\t\tvar me = this;\n\t\t$(this.frm.wrapper).on(\"dirty\", function() {\n\t\t\tme.show_title_as_dirty();\n\n\t\t\t// clear workflow actions\n\t\t\tme.frm.page.clear_actions_menu();\n\n\t\t\t// enable save action\n\t\t\tif(!me.frm.save_disabled) {\n\t\t\t\tme.set_primary_action(true);\n\t\t\t}\n\t\t});\n\t},\n\tshow_title_as_dirty: function() {\n\t\tif(this.frm.save_disabled)\n\t\t\treturn;\n\n\t\tif(this.frm.doc.__unsaved) {\n\t\t\tthis.page.set_indicator(__(\"Not Saved\"), \"orange\");\n\t\t}\n\n\t\t$(this.frm.wrapper).attr(\"data-state\", this.frm.doc.__unsaved ? \"dirty\" : \"clean\");\n\t}\n})\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.form.Dashboard = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.section = this.frm.fields_dict._form_dashboard.wrapper;\n\t\tthis.parent = this.section.find('.section-body');\n\t\tthis.wrapper = $(frappe.render_template('form_dashboard',\n\t\t\t{frm: this.frm})).appendTo(this.parent);\n\n\t\tthis.progress_area = this.wrapper.find(\".progress-area\");\n\t\tthis.heatmap_area = this.wrapper.find('.form-heatmap');\n\t\tthis.chart_area = this.wrapper.find('.form-graph');\n\t\tthis.stats_area = this.wrapper.find('.form-stats');\n\t\tthis.stats_area_row = this.stats_area.find('.row');\n\t\tthis.links_area = this.wrapper.find('.form-links');\n\t\tthis.transactions_area = this.links_area.find('.transactions');\n\n\t},\n\treset: function() {\n\t\tthis.section.addClass('hidden');\n\t\tthis.clear_headline();\n\n\t\t// clear progress\n\t\tthis.progress_area.empty().addClass('hidden');\n\n\t\t// clear links\n\t\tthis.links_area.addClass('hidden');\n\t\tthis.links_area.find('.count, .open-notification').addClass('hidden');\n\n\t\t// clear stats\n\t\tthis.stats_area.addClass('hidden')\n\t\tthis.stats_area_row.empty();\n\n\t\t// clear custom\n\t\tthis.wrapper.find('.custom').remove();\n\t},\n\tset_headline: function(html, color) {\n\t\tthis.frm.layout.show_message(html, color);\n\t},\n\tclear_headline: function() {\n\t\tthis.frm.layout.show_message();\n\t},\n\n\tadd_comment: function(text, alert_class, permanent) {\n\t\tvar me = this;\n\t\tthis.set_headline_alert(text, alert_class);\n\t\tif(!permanent) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tme.clear_headline();\n\t\t\t}, 10000);\n\t\t}\n\t},\n\n\tclear_comment: function() {\n\t\tthis.clear_headline();\n\t},\n\n\tset_headline_alert: function(text, color) {\n\t\tif(text) {\n\t\t\tthis.set_headline(`<div>${text}</div>`, color);\n\t\t} else {\n\t\t\tthis.clear_headline();\n\t\t}\n\t},\n\n\tadd_section: function(html) {\n\t\treturn $('<div class=\"form-dashboard-section custom\">'+html+'</div>').appendTo(this.wrapper);\n\t},\n\n\tadd_progress: function(title, percent, message) {\n\t\tvar progress_chart = this.make_progress_chart(title);\n\n\t\tif(!$.isArray(percent)) {\n\t\t\tpercent = this.format_percent(title, percent);\n\t\t}\n\n\t\tvar progress = $('<div class=\"progress\"></div>').appendTo(progress_chart);\n\t\t$.each(percent, function(i, opts) {\n\t\t\t$(repl('<div class=\"progress-bar %(progress_class)s\" style=\"width: %(width)s\" \\\n\t\t\t\ttitle=\"%(title)s\"></div>', opts)).appendTo(progress);\n\t\t});\n\n\t\tif (!message) message = '';\n\t\t$(`<p class=\"progress-message text-muted small\">${message}</p>`).appendTo(progress_chart);\n\n\t\tthis.show();\n\n\t\treturn progress_chart;\n\t},\n\n\tshow_progress: function(title, percent, message) {\n\t\tthis._progress_map = this._progress_map || {};\n\t\tif (!this._progress_map[title]) {\n\t\t\tconst progress_chart = this.add_progress(title, percent, message);\n\t\t\tthis._progress_map[title] = progress_chart;\n\t\t}\n\t\tlet progress_chart = this._progress_map[title];\n\t\tif (!$.isArray(percent)) {\n\t\t\tpercent = this.format_percent(title, percent);\n\t\t}\n\t\tprogress_chart.find('.progress-bar').each((i, progress_bar) => {\n\t\t\tconst { progress_class, width } = percent[i];\n\t\t\t$(progress_bar).css('width', width)\n\t\t\t\t.removeClass('progress-bar-danger progress-bar-success')\n\t\t\t\t.addClass(progress_class);\n\t\t});\n\n\t\tif (!message) message = '';\n\t\tprogress_chart.find('.progress-message').text(message);\n\t},\n\n\thide_progress: function(title) {\n\t\tif (title){\n\t\t\tthis._progress_map[title].remove();\n\t\t\tdelete this._progress_map[title];\n\t\t} else {\n\t\t\tthis._progress_map = {};\n\t\t\tthis.progress_area.empty();\n\t\t}\n\t},\n\n\tformat_percent: function(title, percent) {\n\t\tvar width = cint(percent) < 1 ? 1 : cint(percent);\n\t\tvar progress_class = \"\";\n\t\tif(width < 10)\n\t\t\tprogress_class = \"progress-bar-danger\";\n\t\tif(width > 99.9)\n\t\t\tprogress_class = \"progress-bar-success\";\n\n\t\treturn [{\n\t\t\ttitle: title,\n\t\t\twidth: width + '%',\n\t\t\tprogress_class: progress_class\n\t\t}];\n\t},\n\tmake_progress_chart: function(title) {\n\t\tvar progress_chart = $('<div class=\"progress-chart\" title=\"'+(title || '')+'\"></div>')\n\t\t\t.appendTo(this.progress_area.removeClass('hidden'));\n\t\treturn progress_chart;\n\t},\n\n\trefresh: function() {\n\t\tthis.reset();\n\t\tif(this.frm.doc.__islocal) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(!this.data) {\n\t\t\tthis.init_data();\n\t\t}\n\n\t\tvar show = false;\n\n\t\tif(this.data && (this.data.transactions || []).length) {\n\t\t\tif(this.data.docstatus && this.frm.doc.docstatus !== this.data.docstatus) {\n\t\t\t\t// limited docstatus\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.render_links();\n\t\t\tthis.set_open_count();\n\t\t\tshow = true;\n\t\t}\n\n\t\tif(this.data.heatmap) {\n\t\t\tthis.render_heatmap();\n\t\t\tshow = true;\n\t\t}\n\n\t\tif(this.data.graph) {\n\t\t\tthis.setup_graph();\n\t\t\tshow = true;\n\t\t}\n\n\t\tif(show) {\n\t\t\tthis.show();\n\t\t}\n\t},\n\n\tafter_refresh: function() {\n\t\tvar me = this;\n\t\t// show / hide new buttons (if allowed)\n\t\tthis.links_area.find('.btn-new').each(function() {\n\t\t\tif(me.frm.can_create($(this).attr('data-doctype'))) {\n\t\t\t\t$(this).removeClass('hidden');\n\t\t\t}\n\t\t});\n\t},\n\n\tinit_data: function() {\n\t\tthis.data = this.frm.meta.__dashboard || {};\n\t\tif(!this.data.transactions) this.data.transactions = [];\n\t\tif(!this.data.internal_links) this.data.internal_links = {};\n\t\tthis.filter_permissions();\n\t},\n\n\tadd_transactions: function(opts) {\n\t\t// add additional data on dashboard\n\t\tlet group_added = [];\n\n\t\tif(!Array.isArray(opts)) opts=[opts];\n\n\t\tif(!this.data) {\n\t\t\tthis.init_data();\n\t\t}\n\n\t\tif(this.data && (this.data.transactions || []).length) {\n\t\t\t// check if label already exists, add items to it\n\t\t\tthis.data.transactions.map(group => {\n\t\t\t\topts.map(d => {\n\t\t\t\t\tif(d.label == group.label) {\n\t\t\t\t\t\tgroup_added.push(d.label);\n\t\t\t\t\t\tgroup.items.push(...d.items);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// if label not already present, add new label and items under it\n\t\t\topts.map(d => {\n\t\t\t\tif(!group_added.includes(d.label)) {\n\t\t\t\t\tthis.data.transactions.push(d);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.filter_permissions();\n\t\t}\n\t},\n\n\tfilter_permissions: function() {\n\t\t// filter out transactions for which the user\n\t\t// does not have permission\n\t\tvar transactions = [];\n\t\t(this.data.transactions || []).forEach(function(group) {\n\t\t\tvar items = [];\n\t\t\tgroup.items.forEach(function(doctype) {\n\t\t\t\tif(frappe.model.can_read(doctype)) {\n\t\t\t\t\titems.push(doctype);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// only add thie group, if there is atleast\n\t\t\t// one item with permission\n\t\t\tif(items.length) {\n\t\t\t\tgroup.items = items;\n\t\t\t\ttransactions.push(group);\n\t\t\t}\n\t\t});\n\t\tthis.data.transactions = transactions;\n\t},\n\trender_links: function() {\n\t\tvar me = this;\n\t\tthis.links_area.removeClass('hidden');\n\t\tthis.links_area.find('.btn-new').addClass('hidden');\n\t\tif(this.data_rendered) {\n\t\t\treturn;\n\t\t}\n\n\t\t//this.transactions_area.empty();\n\n\t\tthis.data.frm = this.frm;\n\n\t\t$(frappe.render_template('form_links', this.data))\n\t\t\t.appendTo(this.transactions_area)\n\n\t\t// bind links\n\t\tthis.transactions_area.find(\".badge-link\").on('click', function() {\n\t\t\tme.open_document_list($(this).parent());\n\t\t});\n\n\t\t// bind open notifications\n\t\tthis.transactions_area.find('.open-notification').on('click', function() {\n\t\t\tme.open_document_list($(this).parent(), true);\n\t\t});\n\n\t\t// bind new\n\t\tthis.transactions_area.find('.btn-new').on('click', function() {\n\t\t\tme.frm.make_new($(this).attr('data-doctype'));\n\t\t});\n\n\t\tthis.data_rendered = true;\n\t},\n\topen_document_list: function($link, show_open) {\n\t\t// show document list with filters\n\t\tvar doctype = $link.attr('data-doctype'),\n\t\t\tnames = $link.attr('data-names') || [];\n\n\t\tif(this.data.internal_links[doctype]) {\n\t\t\tif(names.length) {\n\t\t\t\tfrappe.route_options = {'name': ['in', names]};\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(this.data.fieldname) {\n\t\t\tfrappe.route_options = this.get_document_filter(doctype);\n\t\t\tif(show_open) {\n\t\t\t\tfrappe.ui.notifications.show_open_count_list(doctype);\n\t\t\t}\n\t\t}\n\n\t\tfrappe.set_route(\"List\", doctype, \"List\");\n\t},\n\tget_document_filter: function(doctype) {\n\t\t// return the default filter for the given document\n\t\t// like {\"customer\": frm.doc.name}\n\t\tvar filter = {};\n\t\tvar fieldname = this.data.non_standard_fieldnames\n\t\t\t? (this.data.non_standard_fieldnames[doctype] || this.data.fieldname)\n\t\t\t: this.data.fieldname;\n\t\tfilter[fieldname] = this.frm.doc.name;\n\t\treturn filter;\n\t},\n\tset_open_count: function() {\n\t\tif(!this.data.transactions || !this.data.fieldname) {\n\t\t\treturn;\n\t\t}\n\n\t\t// list all items from the transaction list\n\t\tvar items = [],\n\t\t\tme = this;\n\n\t\tthis.data.transactions.forEach(function(group) {\n\t\t\tgroup.items.forEach(function(item) { items.push(item); });\n\t\t});\n\n\t\tvar method = this.data.method || 'frappe.desk.notifications.get_open_count';\n\t\tfrappe.call({\n\t\t\ttype: \"GET\",\n\t\t\tmethod: method,\n\t\t\targs: {\n\t\t\t\tdoctype: this.frm.doctype,\n\t\t\t\tname: this.frm.doc.name,\n\t\t\t\titems: items\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tif(r.message.timeline_data) {\n\t\t\t\t\tme.update_heatmap(r.message.timeline_data);\n\t\t\t\t}\n\n\t\t\t\t// update badges\n\t\t\t\t$.each(r.message.count, function(i, d) {\n\t\t\t\t\tme.frm.dashboard.set_badge_count(d.name, cint(d.open_count), cint(d.count));\n\t\t\t\t});\n\n\t\t\t\t// update from internal links\n\t\t\t\t$.each(me.data.internal_links, function(doctype, link) {\n\t\t\t\t\tvar table_fieldname = link[0], link_fieldname = link[1];\n\t\t\t\t\tvar names = [];\n\t\t\t\t\t(me.frm.doc[table_fieldname] || []).forEach(function(d) {\n\t\t\t\t\t\tvar value = d[link_fieldname];\n\t\t\t\t\t\tif(value && names.indexOf(value)===-1) {\n\t\t\t\t\t\t\tnames.push(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tme.frm.dashboard.set_badge_count(doctype, 0, names.length, names);\n\t\t\t\t});\n\n\t\t\t\tme.frm.dashboard_data = r.message;\n\t\t\t\tme.frm.trigger('dashboard_update');\n\t\t\t}\n\t\t});\n\n\t},\n\tset_badge_count: function(doctype, open_count, count, names) {\n\t\tvar $link = $(this.transactions_area)\n\t\t\t.find('.document-link[data-doctype=\"'+doctype+'\"]');\n\n\t\tif(open_count) {\n\t\t\t$link.find('.open-notification')\n\t\t\t\t.removeClass('hidden')\n\t\t\t\t.html((open_count > 99) ? '99+' : open_count);\n\t\t}\n\n\t\tif(count) {\n\t\t\t$link.find('.count')\n\t\t\t\t.removeClass('hidden')\n\t\t\t\t.html((count > 99) ? '99+' : count);\n\t\t}\n\n\t\tif(this.data.internal_links[doctype]) {\n\t\t\tif(names && names.length) {\n\t\t\t\t$link.attr('data-names', names ? names.join(',') : '');\n\t\t\t} else {\n\t\t\t\t$link.find('a').attr('disabled', true);\n\t\t\t}\n\t\t}\n\t},\n\n\tupdate_heatmap: function(data) {\n\t\tif(this.heatmap) {\n\t\t\tthis.heatmap.update(data);\n\t\t}\n\t},\n\n\t// heatmap\n\trender_heatmap: function() {\n\t\tif(!this.heatmap) {\n\t\t\tthis.heatmap = new Chart(\"#heatmap-\" + frappe.model.scrub(this.frm.doctype), {\n\t\t\t\ttype: 'heatmap',\n\t\t\t\theight: 120,\n\t\t\t\tstart: new Date(moment().subtract(1, 'year').toDate()),\n\t\t\t\tcount_label: \"interactions\",\n\t\t\t\tdiscreteDomains: 0,\n\t\t\t\tdata: {}\n\t\t\t});\n\n\t\t\t// center the heatmap\n\t\t\tthis.heatmap_area.removeClass('hidden').find('svg').css({'margin': 'auto'});\n\n\t\t\t// message\n\t\t\tvar heatmap_message = this.heatmap_area.find('.heatmap-message');\n\t\t\tif(this.data.heatmap_message) {\n\t\t\t\theatmap_message.removeClass('hidden').html(this.data.heatmap_message);\n\t\t\t} else {\n\t\t\t\theatmap_message.addClass('hidden');\n\t\t\t}\n\t\t}\n\t},\n\n\tadd_indicator: function(label, color) {\n\t\tthis.show();\n\t\tthis.stats_area.removeClass('hidden');\n\n\n\t\t// set colspan\n\t\tvar indicators = this.stats_area_row.find('.indicator-column');\n\t\tvar n_indicators = indicators.length + 1;\n\t\tvar colspan;\n\t\tif(n_indicators > 4) { colspan = 3 }\n\t\telse { colspan = 12 / n_indicators; }\n\n\t\t// reset classes in existing indicators\n\t\tif(indicators.length) {\n\t\t\tindicators.removeClass().addClass('col-sm-'+colspan).addClass('indicator-column');\n\t\t}\n\n\t\tvar indicator = $('<div class=\"col-sm-'+colspan+' indicator-column\"><span class=\"indicator '+color+'\">'\n\t\t\t+label+'</span></div>').appendTo(this.stats_area_row);\n\n\t\treturn indicator;\n\t},\n\n\t// graphs\n\tsetup_graph: function() {\n\t\tvar me = this;\n\t\tvar method = this.data.graph_method;\n\t\tvar args = {\n\t\t\tdoctype: this.frm.doctype,\n\t\t\tdocname: this.frm.doc.name,\n\t\t};\n\t\t$.extend(args, this.data.graph_method_args);\n\n\t\tfrappe.call({\n\t\t\ttype: \"GET\",\n\t\t\tmethod: method,\n\t\t\targs: args,\n\n\t\t\tcallback: function(r) {\n\t\t\t\tif(r.message) {\n\t\t\t\t\tme.render_graph(r.message);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\trender_graph: function(args) {\n\t\tvar me = this;\n\t\tthis.chart_area.empty().removeClass('hidden');\n\t\t$.extend(args, {\n\t\t\ttype: 'line',\n\t\t\tcolors: ['green']\n\t\t});\n\t\tthis.show();\n\n\t\tthis.chart = new Chart('.form-graph', args);\n\t\tif(!this.chart) {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\n\tshow: function() {\n\t\tthis.section.removeClass('hidden');\n\t},\n\n\thide: function() {\n\t\tthis.section.addClass('hidden');\n\t}\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.document_flow');\n\nfrappe.ui.form.DocumentFlow = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\n\t\tthis.module = frappe.get_meta(this.frm.doctype).module\n\t\tif (!frappe.document_flow || !frappe.document_flow[this.module]) {\n\t\t\treturn;\n\t\t}\n\t\tthis.doctypes = frappe.document_flow[this.module][this.frm.doctype];\n\t\tif (!this.doctypes) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.wrapper = $('<div class=\"document-flow-wrapper hidden\"></div>').prependTo(this.frm.layout.wrapper);\n\t},\n\n\trefresh: function() {\n\t\tif(this.doctypes) {\n\t\t\tthis.reset();\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\treset: function() {\n\t\tthis.wrapper.empty().addClass('hidden');\n\t\tthis.linked_with = {};\n\t},\n\n\trender: function() {\n\t\tvar me = this;\n\n\t\t$(frappe.render_template('form_document_flow', {\n\t\t\tfrm: this.frm,\n\t\t\tdoctypes: this.doctypes,\n\t\t})).appendTo(this.wrapper.removeClass('hidden'));\n\n\t\tthis.wrapper.on('click', '.document-flow-link', function() {\n\t\t\tvar doctype = $(this).attr(\"data-doctype\");\n\t\t\tif (me.frm.doctype != doctype) {\n\t\t\t\tme.get_linked_docs(doctype);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tif (!this.frm.doc.__islocal) {\n\t\t\tthis.mark_completed_flow()\n\t\t}\n\n\t},\n\n\tget_linked_docs: function(for_doctype) {\n\t\tif(!this.linked_with[for_doctype]) {\n\t\t\tthis.linked_with[for_doctype] = new frappe.ui.form.LinkedWith({\n\t\t\t\tfrm: this.frm,\n\t\t\t\tfor_doctype: for_doctype\n\t\t\t});\n\t\t}\n\n\t\tthis.linked_with[for_doctype].show();\n\t},\n\n\tmark_completed_flow: function() {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.desk.form.document_flow.get_document_completion_status\",\n\t\t\targs: {\n\t\t\t\tdoctypes: me.doctypes,\n\t\t\t\tfrm_doctype: me.frm.doctype,\n\t\t\t\tfrm_docname: me.frm.docname\n\t\t\t},\n\t\t\tcallback: function(r){\n\t\t\t\tif(!r.message) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$.each(me.doctypes, function(i, doctype) {\n\t\t\t\t\tif (r.message[doctype] && me.frm.doctype!=doctype) {\n\t\t\t\t\t\tme.wrapper.find(\"[data-doctype='\"+doctype+\"']a .indicator\")\n\t\t\t\t\t\t\t.removeClass(\"darkgrey\")\n\t\t\t\t\t\t\t.addClass(\"black\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.save = function (frm, action, callback, btn) {\n\t$(btn).prop(\"disabled\", true);\n\n\t// specified here because there are keyboard shortcuts to save\n\tvar working_label = {\n\t\t\"Save\": __(\"Saving\"),\n\t\t\"Submit\": __(\"Submitting\"),\n\t\t\"Update\": __(\"Updating\"),\n\t\t\"Amend\": __(\"Amending\"),\n\t\t\"Cancel\": __(\"Cancelling\")\n\t}[toTitle(action)];\n\n\tvar freeze_message = working_label ? __(working_label) : \"\";\n\n\tvar save = function () {\n\t\tremove_empty_rows();\n\n\t\t$(frm.wrapper).addClass('validated-form');\n\t\tif (check_mandatory()) {\n\t\t\t_call({\n\t\t\t\tmethod: \"frappe.desk.form.save.savedocs\",\n\t\t\t\targs: { doc: frm.doc, action: action },\n\t\t\t\tcallback: function (r) {\n\t\t\t\t\t$(document).trigger(\"save\", [frm.doc]);\n\t\t\t\t\tcallback(r);\n\t\t\t\t},\n\t\t\t\terror: function (r) {\n\t\t\t\t\tcallback(r);\n\t\t\t\t},\n\t\t\t\tbtn: btn,\n\t\t\t\tfreeze_message: freeze_message\n\t\t\t});\n\t\t} else {\n\t\t\t$(btn).prop(\"disabled\", false);\n\t\t}\n\t};\n\n\tvar remove_empty_rows = function() {\n\t\t/**\n\t\tThis function removes empty rows. Note that in this function, a row is considered\n\t\tempty if the fields with `in_list_view: 1` are undefined or falsy because that's\n\t\twhat users also consider to be an empty row\n\t\t */\n\t\tconst docs = frappe.model.get_all_docs(frm.doc);\n\n\t\t// we should only worry about table data\n\t\tconst tables = docs.filter(function(d){\n\t\t\treturn frappe.model.is_table(d.doctype);\n\t\t});\n\n\t\ttables.map(\n\t\t\tfunction(doc){\n\t\t\t\tconst cells = frappe.meta.docfield_list[doc.doctype] || [];\n\n\t\t\t\tconst in_list_view_cells = cells.filter(function(df) {\n\t\t\t\t\treturn cint(df.in_list_view) === 1;\n\t\t\t\t});\n\n\t\t\t\tvar is_empty_row = function(cells) {\n\t\t\t\t\tfor (var i=0; i < cells.length; i++){\n\t\t\t\t\t\tif(locals[doc.doctype][doc.name][cells[i].fieldname]){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (is_empty_row(in_list_view_cells)) {\n\t\t\t\t\tfrappe.model.clear_doc(doc.doctype, doc.name);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tvar cancel = function () {\n\t\tvar args = {\n\t\t\tdoctype: frm.doc.doctype,\n\t\t\tname: frm.doc.name\n\t\t};\n\n\t\t// update workflow state value if workflow exists\n\t\tvar workflow_state_fieldname = frappe.workflow.get_state_fieldname(frm.doctype);\n\t\tif (workflow_state_fieldname) {\n\t\t\t$.extend(args, {\n\t\t\t\tworkflow_state_fieldname: workflow_state_fieldname,\n\t\t\t\tworkflow_state: frm.doc[workflow_state_fieldname]\n\n\t\t\t});\n\t\t}\n\n\t\t_call({\n\t\t\tmethod: \"frappe.desk.form.save.cancel\",\n\t\t\targs: args,\n\t\t\tcallback: function (r) {\n\t\t\t\t$(document).trigger(\"save\", [frm.doc]);\n\t\t\t\tcallback(r);\n\t\t\t},\n\t\t\tbtn: btn,\n\t\t\tfreeze_message: freeze_message\n\t\t});\n\t};\n\n\tvar check_mandatory = function () {\n\t\tvar me = this;\n\t\tvar has_errors = false;\n\t\tfrm.scroll_set = false;\n\n\t\tif (frm.doc.docstatus == 2) return true; // don't check for cancel\n\n\t\t$.each(frappe.model.get_all_docs(frm.doc), function (i, doc) {\n\t\t\tvar error_fields = [];\n\t\t\tvar folded = false;\n\n\t\t\t$.each(frappe.meta.docfield_list[doc.doctype] || [], function (i, docfield) {\n\t\t\t\tif (docfield.fieldname) {\n\t\t\t\t\tvar df = frappe.meta.get_docfield(doc.doctype,\n\t\t\t\t\t\tdocfield.fieldname, frm.doc.name);\n\n\t\t\t\t\tif (df.fieldtype === \"Fold\") {\n\t\t\t\t\t\tfolded = frm.layout.folded;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (df.reqd && !frappe.model.has_value(doc.doctype, doc.name, df.fieldname)) {\n\t\t\t\t\t\thas_errors = true;\n\t\t\t\t\t\terror_fields[error_fields.length] = __(df.label);\n\t\t\t\t\t\t// scroll to field\n\t\t\t\t\t\tif (!frm.scroll_set) {\n\t\t\t\t\t\t\tscroll_to(doc.parentfield || df.fieldname);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (folded) {\n\t\t\t\t\t\t\tfrm.layout.unfold();\n\t\t\t\t\t\t\tfolded = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (error_fields.length) {\n\t\t\t\tif (doc.parenttype) {\n\t\t\t\t\tvar message = __('Mandatory fields required in table {0}, Row {1}',\n\t\t\t\t\t\t[__(frappe.meta.docfield_map[doc.parenttype][doc.parentfield].label).bold(), doc.idx]);\n\t\t\t\t} else {\n\t\t\t\t\tvar message = __('Mandatory fields required in {0}', [__(doc.doctype)]);\n\n\t\t\t\t}\n\t\t\t\tmessage = message + '<br><br><ul><li>' + error_fields.join('</li><li>') + \"</ul>\";\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\tmessage: message,\n\t\t\t\t\tindicator: 'red',\n\t\t\t\t\ttitle: __('Missing Fields')\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn !has_errors;\n\t};\n\n\tvar scroll_to = function (fieldname) {\n\t\tvar f = cur_frm.fields_dict[fieldname];\n\t\tif (f) {\n\t\t\t$(document).scrollTop($(f.wrapper).offset().top - 60);\n\t\t}\n\t\tfrm.scroll_set = true;\n\t};\n\n\tvar _call = function (opts) {\n\t\t// opts = {\n\t\t// \tmethod: \"some server method\",\n\t\t// \targs: {args to be passed},\n\t\t// \tcallback: callback,\n\t\t// \tbtn: btn\n\t\t// }\n\n\t\tif (frappe.ui.form.is_saving) {\n\t\t\t// this is likely to happen if the user presses the shortcut cmd+s for a longer duration or uses double click\n\t\t\t// no need to show this to user, as they can see \"Saving\" in freeze message\n\t\t\tconsole.log(\"Already saving. Please wait a few moments.\")\n\t\t\tthrow \"saving\";\n\t\t}\n\n\t\tfrappe.ui.form.remove_old_form_route();\n\t\tfrappe.ui.form.is_saving = true;\n\n\t\treturn frappe.call({\n\t\t\tfreeze: true,\n\t\t\t// freeze_message: opts.freeze_message,\n\t\t\tmethod: opts.method,\n\t\t\targs: opts.args,\n\t\t\tbtn: opts.btn,\n\t\t\tcallback: function (r) {\n\t\t\t\topts.callback && opts.callback(r);\n\t\t\t},\n\t\t\terror: opts.error,\n\t\t\talways: function (r) {\n\t\t\t\t$(btn).prop(\"disabled\", false);\n\t\t\t\tfrappe.ui.form.is_saving = false;\n\n\t\t\t\tif (!r.exc) {\n\t\t\t\t\tfrappe.show_alert({message: __('Saved'), indicator: 'green'});\n\t\t\t\t}\n\n\t\t\t\tif (r) {\n\t\t\t\t\tvar doc = r.docs && r.docs[0];\n\t\t\t\t\tif (doc) {\n\t\t\t\t\t\tfrappe.ui.form.update_calling_link(doc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t};\n\n\tif (action === \"cancel\") {\n\t\tcancel();\n\t} else {\n\t\tsave();\n\t}\n}\n\nfrappe.ui.form.remove_old_form_route = () => {\n\tlet index = -1;\n\tlet current_route = frappe.get_route();\n\tfrappe.route_history.map((arr, i) => {\n\t\tif (arr.join(\"/\") === current_route.join(\"/\")) {\n\t\t\tindex = i;\n\t\t}\n\t});\n\tfrappe.route_history.splice(index, 1);\n}\n\nfrappe.ui.form.update_calling_link = (newdoc) => {\n\tif (frappe._from_link && newdoc.doctype === frappe._from_link.df.options) {\n\t\tvar doc = frappe.get_doc(frappe._from_link.doctype, frappe._from_link.docname);\n\t\t// set value\n\t\tif (doc && doc.parentfield) {\n\t\t\t//update values for child table\n\t\t\t$.each(frappe._from_link.frm.fields_dict[doc.parentfield].grid.grid_rows, function (index, field) {\n\t\t\t\tif (field.doc && field.doc.name === frappe._from_link.docname) {\n\t\t\t\t\tfrappe._from_link.set_value(newdoc.name);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tfrappe._from_link.set_value(newdoc.name);\n\t\t}\n\n\t\t// refresh field\n\t\tfrappe._from_link.refresh();\n\n\t\t// if from form, switch\n\t\tif (frappe._from_link.frm) {\n\t\t\tfrappe.set_route(\"Form\",\n\t\t\t\tfrappe._from_link.frm.doctype, frappe._from_link.frm.docname)\n\t\t\t\t.then(() => {\n\t\t\t\t\tfrappe.utils.scroll_to(frappe._from_link_scrollY);\n\t\t\t\t});\n\t\t}\n\n\t\tfrappe._from_link = null;\n\t}\n}\n\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form.handlers\");\n\nfrappe.ui.form.get_event_handler_list = function(doctype, fieldname) {\n\tif(!frappe.ui.form.handlers[doctype]) {\n\t\tfrappe.ui.form.handlers[doctype] = {};\n\t}\n\tif(!frappe.ui.form.handlers[doctype][fieldname]) {\n\t\tfrappe.ui.form.handlers[doctype][fieldname] = [];\n\t}\n\treturn frappe.ui.form.handlers[doctype][fieldname];\n}\n\nfrappe.ui.form.on = frappe.ui.form.on_change = function(doctype, fieldname, handler) {\n\tvar add_handler = function(fieldname, handler) {\n\t\tvar handler_list = frappe.ui.form.get_event_handler_list(doctype, fieldname);\n\t\thandler_list.push(handler);\n\n\t\t// add last handler to events so it can be called as\n\t\t// frm.events.handler(frm)\n\t\tif(cur_frm && cur_frm.doctype===doctype) {\n\t\t\tcur_frm.events[fieldname] = handler;\n\t\t}\n\t}\n\n\tif (!handler && $.isPlainObject(fieldname)) {\n\t\t// a dict of handlers {fieldname: handler, ...}\n\t\tfor (var key in fieldname) {\n\t\t\tvar fn = fieldname[key];\n\t\t\tif (typeof fn === \"function\") {\n\t\t\t\tadd_handler(key, fn);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tadd_handler(fieldname, handler);\n\t}\n}\n\n// remove standard event handlers\nfrappe.ui.form.off = function(doctype, fieldname, handler) {\n\tvar handler_list = frappe.ui.form.get_event_handler_list(doctype, fieldname);\n\tif(handler_list.length) {\n\t\tfrappe.ui.form.handlers[doctype][fieldname] = [];\n\t}\n\n\tif(cur_frm && cur_frm.doctype===doctype && cur_frm.events[fieldname]) {\n\t\tdelete cur_frm.events[fieldname];\n\t}\n\n\tif(cur_frm && cur_frm.cscript && cur_frm.cscript[fieldname]) {\n\t\tdelete cur_frm.cscript[fieldname];\n\t}\n}\n\n\nfrappe.ui.form.trigger = function(doctype, fieldname) {\n\tcur_frm.script_manager.trigger(fieldname, doctype);\n}\n\nfrappe.ui.form.ScriptManager = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t},\n\tmake: function(ControllerClass) {\n\t\tthis.frm.cscript = $.extend(this.frm.cscript,\n\t\t\tnew ControllerClass({frm: this.frm}));\n\t},\n\ttrigger: function(event_name, doctype, name) {\n\t\t// trigger all the form level events that\n\t\t// are bound to this event_name\n\t\tlet me = this;\n\t\tdoctype = doctype || this.frm.doctype;\n\t\tname = name || this.frm.docname;\n\n\t\tlet tasks = [];\n\t\tlet handlers = this.get_handlers(event_name, doctype);\n\n\t\t// helper for child table\n\t\tthis.frm.selected_doc = frappe.get_doc(doctype, name);\n\n\t\tlet runner = (_function, is_old_style) => {\n\t\t\tlet _promise = null;\n\t\t\tif(is_old_style) {\n\t\t\t\t// old style arguments (doc, cdt, cdn)\n\t\t\t\t_promise = me.frm.cscript[_function](me.frm.doc, doctype, name);\n\t\t\t} else {\n\t\t\t\t// new style (frm, doctype, name)\n\t\t\t\t_promise = _function(me.frm, doctype, name);\n\t\t\t}\n\n\t\t\t// if the trigger returns a promise, return it,\n\t\t\t// or use the default promise frappe.after_ajax\n\t\t\tif (_promise && _promise.then) {\n\t\t\t\treturn _promise;\n\t\t\t} else {\n\t\t\t\treturn frappe.after_server_call();\n\t\t\t}\n\t\t};\n\n\t\t// make list of functions to be run serially\n\t\thandlers.new_style.forEach((_function) => {\n\t\t\tif(event_name==='setup') {\n\t\t\t\t// setup must be called immediately\n\t\t\t\trunner(_function, false);\n\t\t\t} else {\n\t\t\t\ttasks.push(() => runner(_function, false));\n\t\t\t}\n\t\t});\n\n\t\thandlers.old_style.forEach((_function) => {\n\t\t\tif(event_name==='setup') {\n\t\t\t\t// setup must be called immediately\n\t\t\t\trunner(_function, true);\n\t\t\t} else {\n\t\t\t\ttasks.push(() => runner(_function, true));\n\t\t\t}\n\t\t});\n\n\t\t// run them serially\n\t\treturn frappe.run_serially(tasks);\n\t},\n\thas_handlers: function(event_name, doctype) {\n\t\tlet handlers = this.get_handlers(event_name, doctype);\n\t\treturn handlers && (handlers.old_style.length || handlers.new_style.length);\n\t},\n\tget_handlers: function(event_name, doctype) {\n\t\t// returns list of all functions to be called (old style and new style)\n\t\tlet me = this;\n\t\tlet handlers = {\n\t\t\told_style: [],\n\t\t\tnew_style: []\n\t\t};\n\t\tif(frappe.ui.form.handlers[doctype] && frappe.ui.form.handlers[doctype][event_name]) {\n\t\t\t$.each(frappe.ui.form.handlers[doctype][event_name], function(i, fn) {\n\t\t\t\thandlers.new_style.push(fn);\n\t\t\t});\n\t\t}\n\t\tif(this.frm.cscript[event_name]) {\n\t\t\thandlers.old_style.push(event_name);\n\t\t}\n\t\tif(this.frm.cscript[\"custom_\" + event_name]) {\n\t\t\thandlers.old_style.push(\"custom_\" + event_name);\n\t\t}\n\t\treturn handlers;\n\t},\n\tsetup: function() {\n\t\tvar doctype = this.frm.meta;\n\t\tvar me = this;\n\n\t\t// js\n\t\tvar cs = doctype.__js;\n\t\tif(cs) {\n\t\t\tvar tmp = eval(cs);\n\t\t}\n\n\t\tif(doctype.__custom_js) {\n\t\t\ttry {\n\t\t\t\teval(doctype.__custom_js);\n\t\t\t} catch(e) {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\ttitle: __('Error in Custom Script'),\n\t\t\t\t\tindicator: 'orange',\n\t\t\t\t\tmessage: '<pre class=\"small\"><code>' + e.stack  + '</code></pre>'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction setup_add_fetch(df) {\n\t\t\tif((['Data', 'Read Only', 'Text', 'Small Text', 'Currency',\n\t\t\t\t'Text Editor', 'Code', 'Link', 'Float', 'Int', 'Date'].includes(df.fieldtype) || df.read_only==1)\n\t\t\t\t&& df.fetch_from && df.fetch_from.indexOf(\".\")!=-1) {\n\t\t\t\tvar parts = df.fetch_from.split(\".\");\n\t\t\t\tme.frm.add_fetch(parts[0], parts[1], df.fieldname);\n\t\t\t}\n\t\t}\n\n\t\t// setup add fetch\n\t\t$.each(this.frm.fields, function(i, field) {\n\t\t\tsetup_add_fetch(field.df);\n\t\t\tif(frappe.model.table_fields.includes(field.df.fieldtype)) {\n\t\t\t\t$.each(frappe.meta.get_docfields(field.df.options, me.frm.docname), function(i, df) {\n\t\t\t\t\tsetup_add_fetch(df);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// css\n\t\tdoctype.__css && frappe.dom.set_style(doctype.__css);\n\n\t\tthis.trigger('setup');\n\t},\n\tlog_error: function(caller, e) {\n\t\tfrappe.show_alert(\"Error in Client Script.\");\n\t\tconsole.group && console.group();\n\t\tconsole.log(\"----- error in client script -----\");\n\t\tconsole.log(\"method: \" + caller);\n\t\tconsole.log(e);\n\t\tconsole.log(\"error message: \" + e.message);\n\t\tconsole.trace && console.trace();\n\t\tconsole.log(\"----- end of error message -----\");\n\t\tconsole.group && console.groupEnd();\n\t},\n\tcopy_from_first_row: function(parentfield, current_row, fieldnames) {\n\t\tvar data = this.frm.doc[parentfield];\n\t\tif(data.length===1 || data[0]===current_row) return;\n\n\t\tif(typeof fieldnames==='string') {\n\t\t\tfieldnames = [fieldnames];\n\t\t}\n\n\t\t$.each(fieldnames, function(i, fieldname) {\n\t\t\tfrappe.model.set_value(current_row.doctype, current_row.name, fieldname,\n\t\t\t\tdata[0][fieldname]);\n\t\t});\n\t}\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.LinkedWith = class LinkedWith {\n\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t}\n\n\tshow() {\n\t\tif(!this.dialog)\n\t\t\tthis.make_dialog();\n\n\t\t$(this.dialog.body).html(\n\t\t\t`<div class=\"text-muted text-center\" style=\"padding: 30px 0px\">\n\t\t\t\t${__(\"Loading\")}...\n\t\t\t</div>`);\n\n\t\tthis.dialog.show();\n\t}\n\n\tmake_dialog() {\n\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\thide_on_page_refresh: true,\n\t\t\ttitle: __(\"Linked With\")\n\t\t});\n\n\t\tthis.dialog.on_page_show = () => {\n\t\t\t// execute ajax calls sequentially\n\t\t\t// 1. get linked doctypes\n\t\t\t// 2. load all doctypes\n\t\t\t// 3. load linked docs\n\t\t\tthis.get_linked_doctypes()\n\t\t\t\t.then(() => this.load_doctypes())\n\t\t\t\t.then(() => this.links_not_permitted_or_missing())\n\t\t\t\t.then(() => this.get_linked_docs())\n\t\t\t\t.then(() => this.make_html());\n\t\t};\n\t}\n\n\tmake_html() {\n\t\tconst linked_docs = this.frm.__linked_docs;\n\n\t\tlet html = '';\n\n\t\tconst linked_doctypes = Object.keys(linked_docs);\n\n\t\tif (linked_doctypes.length === 0) {\n\t\t\thtml = __(\"Not Linked to any record\");\n\t\t} else {\n\t\t\thtml = linked_doctypes.map(doctype => {\n\t\t\t\tconst docs = linked_docs[doctype];\n\t\t\t\treturn `\n\t\t\t\t\t<div class=\"list-item-table margin-bottom\">\n\t\t\t\t\t\t${this.make_doc_head(doctype)}\n\t\t\t\t\t\t${docs.map(doc => this.make_doc_row(doc, doctype)).join('')}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}).join('');\n\t\t}\n\n\t\t$(this.dialog.body).html(html);\n\t}\n\n\tload_doctypes() {\n\t\tconst already_loaded = Object.keys(locals.DocType);\n\t\tlet doctypes_to_load = [];\n\n\t\tif (this.frm.__linked_doctypes) {\n\t\t\tdoctypes_to_load =\n\t\t\t\tObject.keys(this.frm.__linked_doctypes)\n\t\t\t\t\t.filter(doctype => !already_loaded.includes(doctype));\n\t\t}\n\n\t\t// load all doctypes asynchronously using with_doctype\n\t\tconst promises = doctypes_to_load.map(dt => {\n\t\t\treturn frappe.model.with_doctype(dt, () => {\n\t\t\t\tif(frappe.listview_settings[dt]) {\n\t\t\t\t\t// add additional fields to __linked_doctypes\n\t\t\t\t\tthis.frm.__linked_doctypes[dt].add_fields =\n\t\t\t\t\t\tfrappe.listview_settings[dt].add_fields;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn Promise.all(promises);\n\t}\n\n\tlinks_not_permitted_or_missing() {\n\t\tlet links = null;\n\n\t\tif (this.frm.__linked_doctypes) {\n\t\t\tlinks =\n\t\t\t\tObject.keys(this.frm.__linked_doctypes)\n\t\t\t\t\t.filter(frappe.model.can_get_report);\n\t\t}\n\n\t\tlet flag;\n\t\tif(!links) {\n\t\t\t$(this.dialog.body).html(`${this.frm.__linked_doctypes\n\t\t\t\t? __(\"Not enough permission to see links\")\n\t\t\t\t: __(\"Not Linked to any record\")}`);\n\t\t\tflag = true;\n\t\t}\n\t\tflag = false;\n\n\t\t// reject Promise if not_permitted or missing\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => flag ? reject() : resolve()\n\t\t);\n\t}\n\n\tget_linked_doctypes() {\n\t\treturn new Promise((resolve) => {\n\t\t\tif (this.frm.__linked_doctypes) {\n\t\t\t\tresolve();\n\t\t\t}\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.desk.form.linked_with.get_linked_doctypes\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: this.frm.doctype\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tthis.frm.__linked_doctypes = r.message;\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tget_linked_docs() {\n\t\treturn frappe.call({\n\t\t\tmethod: \"frappe.desk.form.linked_with.get_linked_docs\",\n\t\t\targs: {\n\t\t\t\tdoctype: this.frm.doctype,\n\t\t\t\tname: this.frm.docname,\n\t\t\t\tlinkinfo: this.frm.__linked_doctypes,\n\t\t\t\tfor_doctype: this.for_doctype\n\t\t\t},\n\t\t\tcallback: (r) => {\n\t\t\t\tthis.frm.__linked_docs = r.message || {};\n\t\t\t}\n\t\t});\n\t}\n\n\tmake_doc_head(heading) {\n\t\treturn `\n\t\t\t<header class=\"level list-row list-row-head text-muted small\">\n\t\t\t\t<div>${__(heading)}</div>\n\t\t\t</header>\n\t\t`;\n\t}\n\n\tmake_doc_row(doc, doctype) {\n\t\treturn `<div class=\"list-row-container\">\n\t\t\t<div class=\"level list-row small\">\n\t\t\t\t<div class=\"level-left bold\">\n\t\t\t\t\t<a href=\"#Form/${doctype}/${doc.name}\">${doc.name}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`;\n\t}\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.form.States = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.state_fieldname = frappe.workflow.get_state_fieldname(this.frm.doctype);\n\n\t\t// no workflow?\n\t\tif(!this.state_fieldname)\n\t\t\treturn;\n\n\t\tthis.update_fields = frappe.workflow.get_update_fields(this.frm.doctype);\n\n\t\tvar me = this;\n\t\t$(this.frm.wrapper).bind(\"render_complete\", function() {\n\t\t\tme.refresh();\n\t\t});\n\t},\n\n\tsetup_help: function() {\n\t\tvar me = this;\n\t\tthis.frm.page.add_action_item(__(\"Help\"), function() {\n\t\t\tfrappe.workflow.setup(me.frm.doctype);\n\t\t\tvar state = me.get_state();\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: \"Workflow: \"\n\t\t\t\t\t+ frappe.workflow.workflows[me.frm.doctype].name\n\t\t\t});\n\n\t\t\tfrappe.workflow.get_transitions(me.frm.doc).then((transitions) => {\n\t\t\t\tvar next_html = $.map(transitions,\n\t\t\t\t\tfunction(d) {\n\t\t\t\t\t\treturn d.action.bold() + __(\" by Role \") + d.allowed;\n\t\t\t\t\t}).join(\", \") || __(\"None: End of Workflow\").bold();\n\n\t\t\t\t$(d.body).html(\"<p>\"+__(\"Current status\")+\": \" + state.bold() + \"</p>\"\n\t\t\t\t\t+ \"<p>\"+__(\"Document is only editable by users of role\")+\": \"\n\t\t\t\t\t\t+ frappe.workflow.get_document_state(me.frm.doctype,\n\t\t\t\t\t\t\tstate).allow_edit.bold() + \"</p>\"\n\t\t\t\t\t+ \"<p>\"+__(\"Next actions\")+\": \"+ next_html +\"</p>\"\n\t\t\t\t\t+ (me.frm.doc.__islocal ? (\"<div class='alert alert-info'>\"\n\t\t\t\t\t\t+__(\"Workflow will start after saving.\")+\"</div>\") : \"\")\n\t\t\t\t\t+ \"<p class='help'>\"+__(\"Note: Other permission rules may also apply\")+\"</p>\"\n\t\t\t\t).css({padding: '15px'});\n\t\t\t\td.show();\n\t\t\t});\n\t\t}, true);\n\t},\n\n\trefresh: function() {\n\t\tconst me = this;\n\t\t// hide if its not yet saved\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.set_default_state();\n\t\t\treturn;\n\t\t}\n\n\t\t// state text\n\t\tconst state = this.get_state();\n\n\t\tlet doctype = this.frm.doctype;\n\n\t\tif(state) {\n\t\t\t// show actions from that state\n\t\t\tthis.show_actions(state);\n\t\t}\n\t},\n\n\tshow_actions: function() {\n\t\tvar added = false;\n\t\tvar me = this;\n\n\t\tthis.frm.page.clear_actions_menu();\n\n\t\t// if the loaded doc is dirty, don't show workflow buttons\n\t\tif (this.frm.doc.__unsaved===1) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction has_approval_access(transition) {\n\t\t\tlet approval_access = false;\n\t\t\tconst user = frappe.session.user;\n\t\t\tif (user === 'Administrator'\n\t\t\t\t|| transition.allow_self_approval\n\t\t\t\t|| user !== me.frm.doc.owner) {\n\t\t\t\tapproval_access = true;\n\t\t\t}\n\t\t\treturn approval_access;\n\t\t}\n\n\t\tfrappe.workflow.get_transitions(this.frm.doc).then(transitions => {\n\t\t\t$.each(transitions, function(i, d) {\n\t\t\t\tif(frappe.user_roles.includes(d.allowed) && has_approval_access(d)) {\n\t\t\t\t\tadded = true;\n\t\t\t\t\tme.frm.page.add_action_item(__(d.action), function() {\n\t\t\t\t\t\tfrappe.xcall('frappe.model.workflow.apply_workflow',\n\t\t\t\t\t\t\t{doc: me.frm.doc, action: d.action})\n\t\t\t\t\t\t\t.then((doc) => {\n\t\t\t\t\t\t\t\tfrappe.model.sync(doc);\n\t\t\t\t\t\t\t\tme.frm.refresh();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.setup_btn(added);\n\t\t});\n\n\t},\n\n\tsetup_btn: function(action_added) {\n\t\tif(action_added) {\n\t\t\tthis.frm.page.btn_primary.addClass(\"hide\");\n\t\t\tthis.frm.page.btn_secondary.addClass(\"hide\");\n\t\t\tthis.frm.toolbar.current_status = \"\";\n\t\t\tthis.setup_help();\n\t\t}\n\t},\n\n\tset_default_state: function() {\n\t\tvar default_state = frappe.workflow.get_default_state(this.frm.doctype, this.frm.doc.docstatus);\n\t\tif(default_state) {\n\t\t\tthis.frm.set_value(this.state_fieldname, default_state);\n\t\t}\n\t},\n\n\tget_state: function() {\n\t\tif(!this.frm.doc[this.state_fieldname]) {\n\t\t\tthis.set_default_state();\n\t\t}\n\t\treturn this.frm.doc[this.state_fieldname];\n\t}\n});\n","frappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.PrintPreview = Class.extend({\n\tinit: function (opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t\tthis.bind_events();\n\t},\n\tmake: function () {\n\t\tthis.wrapper = this.frm.page.add_view(\"print\", frappe.render_template(\"print_layout\", {}));\n\n\t\t// only system manager can edit\n\t\tthis.wrapper.find(\".btn-print-edit\").toggle(frappe.user.has_role(\"System Manager\"));\n\t\tif (frappe.model.get_doc(\":Print Settings\", \"Print Settings\").enable_raw_printing == \"1\") {\n\t\t\tthis.wrapper.find(\".btn-printer-setting\").toggle(true);\n\t\t}\n\t},\n\tbind_events: function () {\n\t\tvar me = this;\n\t\tthis.wrapper.find(\".btn-print-close\").click(function () {\n\t\t\tme.frm.hide_print();\n\t\t});\n\n\t\t// hide print view on pressing escape, only if there is no focus on any input\n\t\t$(document).on(\"keydown\", function (e) {\n\t\t\tif (e.which === 27 && me.frm && e.target === document.body) {\n\t\t\t\tme.frm.hide_print();\n\t\t\t}\n\t\t});\n\n\t\tthis.print_formats = frappe.meta.get_print_formats(this.frm.meta.name);\n\t\tthis.print_letterhead = this.wrapper\n\t\t\t.find(\".print-letterhead\")\n\t\t\t.on(\"change\", function () { me.print_sel.trigger(\"change\"); })\n\t\t\t.prop(\"checked\", cint(\n\t\t\t\t(frappe.model.get_doc(\":Print Settings\", \"Print Settings\")\n\t\t\t\t\t|| { with_letterhead: 1 }).with_letterhead) ? true : false);\n\t\tthis.print_sel = this.wrapper\n\t\t\t.find(\".print-preview-select\")\n\t\t\t.on(\"change\", function () {\n\t\t\t\tme.set_default_print_language();\n\t\t\t\tme.multilingual_preview();\n\t\t\t});\n\n\t\t//On selection of language get code and pass it to preview method\n\t\tthis.language_sel = this.wrapper\n\t\t\t.find(\".languages\")\n\t\t\t.on(\"change\", function () {\n\t\t\t\tme.lang_code = me.language_sel.val()\n\t\t\t\tme.multilingual_preview()\n\t\t\t});\n\n\t\tthis.wrapper.find(\".btn-printer-setting\").click(function () {\n\t\t\tme.printer_setting_dialog();\n\t\t});\n\n\t\tthis.wrapper.find(\".btn-print-print\").click(function () {\n\t\t\tif (me.is_old_style()) {\n\t\t\t\tme.print_old_style();\n\t\t\t} else {\n\t\t\t\tme.printit();\n\t\t\t}\n\t\t});\n\n\t\tthis.wrapper.find(\".btn-print-preview\").click(function () {\n\t\t\tif (me.is_old_style()) {\n\t\t\t\tme.new_page_preview_old_style();\n\t\t\t} else {\n\t\t\t\tme.new_page_preview();\n\t\t\t}\n\t\t});\n\n\t\tthis.wrapper.find(\".btn-download-pdf\").click(function () {\n\t\t\tif (!me.is_old_style()) {\n\t\t\t\tvar w = window.open(\n\t\t\t\t\tfrappe.urllib.get_full_url(\"/api/method/frappe.utils.print_format.download_pdf?\"\n\t\t\t\t\t\t+ \"doctype=\" + encodeURIComponent(me.frm.doc.doctype)\n\t\t\t\t\t\t+ \"&name=\" + encodeURIComponent(me.frm.doc.name)\n\t\t\t\t\t\t+ \"&format=\" + me.selected_format()\n\t\t\t\t\t\t+ \"&no_letterhead=\" + (me.with_letterhead() ? \"0\" : \"1\")\n\t\t\t\t\t\t+ (me.lang_code ? (\"&_lang=\" + me.lang_code) : \"\"))\n\t\t\t\t);\n\t\t\t\tif (!w) {\n\t\t\t\t\tfrappe.msgprint(__(\"Please enable pop-ups\")); return;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.wrapper.find(\".btn-print-edit\").on(\"click\", function () {\n\t\t\tlet print_format = me.get_print_format();\n\t\t\tif (print_format && print_format.name) {\n\t\t\t\tif (print_format.print_format_builder) {\n\t\t\t\t\tfrappe.set_route(\"print-format-builder\", print_format.name);\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.set_route(\"Form\", \"Print Format\", print_format.name);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// start a new print format\n\t\t\t\tfrappe.prompt({\n\t\t\t\t\tfieldname: \"print_format_name\", fieldtype: \"Data\", reqd: 1,\n\t\t\t\t\tlabel: \"New Print Format Name\"\n\t\t\t\t}, function (data) {\n\t\t\t\t\tfrappe.route_options = {\n\t\t\t\t\t\tmake_new: true,\n\t\t\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\t\t\tname: data.print_format_name\n\t\t\t\t\t};\n\t\t\t\t\tfrappe.set_route(\"print-format-builder\");\n\t\t\t\t}, __(\"New Custom Print Format\"), __(\"Start\"));\n\t\t\t}\n\t\t});\n\n\t\t$(document).on('new-print-format', (e) => {\n\t\t\tthis.refresh_print_options();\n\t\t\tif (e.print_format) {\n\t\t\t\tthis.print_sel.val(e.print_format);\n\t\t\t}\n\t\t});\n\t},\n\tset_user_lang: function () {\n\t\tthis.lang_code = this.frm.doc.language;\n\t\t// Load all languages in the field\n\t\tthis.language_sel.empty()\n\t\t\t.add_options([{value:'', label:__(\"Select Language...\")}]\n\t\t\t\t.concat(frappe.get_languages()))\n\t\t\t.val(this.lang_code);\n\t\tthis.preview();\n\t},\n\tset_default_print_language: function () {\n \t\tvar print_format = this.get_print_format();\n\n \t\tif (print_format.default_print_language) {\n \t\t\tthis.lang_code = print_format.default_print_language;\n \t\t\tthis.language_sel.val(this.lang_code);\n \t\t} else {\n\t\t\tthis.language_sel.val(frappe.boot.lang);\n\t\t}\n \t},\n\tmultilingual_preview: function () {\n\t\tvar me = this;\n\t\tif (this.is_old_style()) {\n\t\t\tme.wrapper.find(\".btn-print-preview\").toggle(true);\n\t\t\tme.wrapper.find(\".btn-download-pdf\").toggle(false);\n\t\t\tme.set_style();\n\t\t\tme.preview_old_style();\n\t\t} else if (this.is_raw_printing()) {\n\t\t\tme.wrapper.find(\".btn-print-preview\").toggle(false);\n\t\t\tme.wrapper.find(\".btn-download-pdf\").toggle(false);\n\t\t\tme.preview();\n\t\t} else {\n\t\t\tme.wrapper.find(\".btn-print-preview\").toggle(true);\n\t\t\tme.wrapper.find(\".btn-download-pdf\").toggle(true);\n\t\t\tme.preview();\n\t\t}\n\t},\n\tpreview: function () {\n\t\tvar me = this;\n\t\tthis.get_print_html(function (out) {\n\t\t\tconst $print_format = me.wrapper.find(\".print-format\");\n\t\t\t$print_format.html(out.html);\n\t\t\tme.show_footer();\n\t\t\tme.set_style(out.style);\n\n\t\t\tconst print_height = $print_format.get(0).offsetHeight;\n\t\t\tconst $message = me.wrapper.find(\".page-break-message\");\n\n\t\t\tconst print_height_inches = frappe.dom.pixel_to_inches(print_height);\n\t\t\t// if contents are large enough, indicate that it will get printed on multiple pages\n\t\t\t// Maximum height for an A4 document is 11.69 inches\n\t\t\tif (print_height_inches > 11.69) {\n\t\t\t\t$message.text(__('This may get printed on multiple pages'));\n\t\t\t} else {\n\t\t\t\t$message.text('');\n\t\t\t}\n\t\t});\n\t},\n\tshow_footer: function() {\n\t\t// footer is hidden by default as reqd by pdf generation\n\t\t// simple hack to show it in print preview\n\t\tthis.wrapper.find('.print-format').css({\n\t\t\tdisplay: 'flex',\n\t\t\tflexDirection: 'column'\n\t\t});\n\t\tthis.wrapper.find('.page-break').css({\n\t\t\t'display': 'flex',\n\t\t\t'flex-direction': 'column',\n\t\t\t'flex': '1'\n\t\t});\n\t\tthis.wrapper.find('#footer-html').attr('style', `\n\t\t\tdisplay: block !important;\n\t\t\torder: 1;\n\t\t\tmargin-top: auto;\n\t\t`);\n\t},\n\tprintit: function () {\n\t\tlet print_server ;\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.printing.doctype.print_settings.print_settings.is_print_server_enabled\",\n\t\t\tcallback: function (data) {\n\t\t\t\tif (data.message) {\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\"method\": \"frappe.utils.print_format.print_by_server\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tdoctype: me.frm.doc.doctype,\n\t\t\t\t\t\t\tname: me.frm.doc.name,\n\t\t\t\t\t\t\tprint_format:  me.selected_format(),\n\t\t\t\t\t\t\tno_letterhead: me.with_letterhead()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcallback: function (data) {\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (me.get_mapped_printer().length === 1) {\n\t\t\t\t\t// printer is already mapped in localstorage (applies for both raw and pdf )\n\t\t\t\t\tif (me.is_raw_printing()) {\n\t\t\t\t\t\tme.get_raw_commands(function (out) {\n\t\t\t\t\t\t\tfrappe.ui.form.qz_connect().then(function () {\n\t\t\t\t\t\t\t\tlet printer_map = me.get_mapped_printer()[0];\n\t\t\t\t\t\t\t\tlet data = [out.raw_commands];\n\t\t\t\t\t\t\t\tlet config = qz.configs.create(printer_map.printer);\n\t\t\t\t\t\t\t\treturn qz.print(config, data);\n\t\t\t\t\t\t\t}).then(frappe.ui.form.qz_success).catch((err) => {\n\t\t\t\t\t\t\t\tfrappe.ui.form.qz_fail(err);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\t\tmessage: __('PDF printing via \"Raw Print\" is not yet supported. Please remove the printer mapping in Printer Settings and try again.'),\n\t\t\t\t\t\t\tindicator: 'blue'\n\t\t\t\t\t\t}, 14);\n\t\t\t\t\t\t//Note: need to solve \"Error: Cannot parse (FILE)<URL> as a PDF file\" to enable qz pdf printing.\n\t\t\t\t\t}\n\t\t\t\t} else if (me.is_raw_printing()) {\n\t\t\t\t\t// printer not mapped in localstorage and the current print format is raw printing\n\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\tmessage: __('Please set a printer mapping for this print format in the Printer Settings'),\n\t\t\t\t\t\tindicator: 'blue'\n\t\t\t\t\t}, 14);\n\t\t\t\t\tme.printer_setting_dialog();\n\t\t\t\t} else {\n\t\t\t\t\tme.new_page_preview(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tnew_page_preview: function (printit) {\n\t\tvar me = this;\n\t\tvar w = window.open(frappe.urllib.get_full_url(\"/printview?\"\n\t\t\t+ \"doctype=\" + encodeURIComponent(me.frm.doc.doctype)\n\t\t\t+ \"&name=\" + encodeURIComponent(me.frm.doc.name)\n\t\t\t+ (printit ? \"&trigger_print=1\" : \"\")\n\t\t\t+ \"&format=\" + me.selected_format()\n\t\t\t+ \"&no_letterhead=\" + (me.with_letterhead() ? \"0\" : \"1\")\n\t\t\t+ (me.lang_code ? (\"&_lang=\" + me.lang_code) : \"\")));\n\t\tif (!w) {\n\t\t\tfrappe.msgprint(__(\"Please enable pop-ups\")); return;\n\t\t}\n\t},\n\tget_print_html: function (callback) {\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.www.printview.get_html_and_style\",\n\t\t\targs: {\n\t\t\t\tdoc: this.frm.doc,\n\t\t\t\tprint_format: this.selected_format(),\n\t\t\t\tno_letterhead: !this.with_letterhead() ? 1 : 0,\n\t\t\t\t_lang: this.lang_code\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tif (!r.exc) {\n\t\t\t\t\tcallback(r.message);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tget_raw_commands: function (callback) {\n\t\t// fetches rendered raw commands from the server for the current print format.\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.www.printview.get_rendered_raw_commands\",\n\t\t\targs: {\n\t\t\t\tdoc: this.frm.doc,\n\t\t\t\tprint_format: this.selected_format(),\n\t\t\t\t_lang: this.lang_code\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tif (!r.exc) {\n\t\t\t\t\tcallback(r.message);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tget_mapped_printer: function () {\n\t\t// returns a list of \"print format: printer\" mapping filtered by the current print format \n\t\tlet print_format_printer_map = this.get_print_format_printer_map();\n\t\tif (print_format_printer_map[this.frm.doctype]) {\n\t\t\treturn print_format_printer_map[this.frm.doctype].filter(\n\t\t\t\t(printer_map) => printer_map.print_format == this.selected_format());\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t},\n\tget_print_format_printer_map: function () {\n\t\t// returns the whole object \"print_format_printer_map\" stored in the localStorage.\n\t\ttry {\n\t\t\tlet print_format_printer_map = JSON.parse(localStorage.print_format_printer_map);\n\t\t\treturn print_format_printer_map;\n\t\t} catch (e) {\n\t\t\treturn {};\n\t\t}\n\t},\n\tpreview_old_style: function () {\n\t\tvar me = this;\n\t\tthis.with_old_style({\n\t\t\tformat: me.print_sel.val(),\n\t\t\tcallback: function (html) {\n\t\t\t\tme.wrapper.find(\".print-format\").html('<div class=\"alert alert-warning\">'\n\t\t\t\t\t+ __(\"Warning: This Print Format is in old style and cannot be generated via the API.\")\n\t\t\t\t\t+ '</div>'\n\t\t\t\t\t+ html);\n\t\t\t},\n\t\t\tno_letterhead: !this.with_letterhead(),\n\t\t\tonly_body: true,\n\t\t\tno_heading: true\n\t\t});\n\t},\n\trefresh_print_options: function () {\n\t\tthis.print_formats = frappe.meta.get_print_formats(this.frm.doctype);\n\t\treturn this.print_sel\n\t\t\t.empty().add_options(this.print_formats);\n\n\t},\n\twith_old_style: function (opts) {\n\t\tfrappe.require(\"/assets/js/print_format_v3.min.js\", function () {\n\t\t\t_p.build(opts.format, opts.callback, opts.no_letterhead, opts.only_body, opts.no_heading);\n\t\t});\n\t},\n\tprint_old_style: function () {\n\t\tvar me = this;\n\t\tfrappe.require(\"/assets/js/print_format_v3.min.js\", function () {\n\t\t\t_p.build(me.print_sel.val(), _p.go,\n\t\t\t\t!me.with_letterhead());\n\t\t});\n\t},\n\tnew_page_preview_old_style: function () {\n\t\tvar me = this;\n\t\tfrappe.require(\"/assets/js/print_format_v3.min.js\", function () {\n\t\t\t_p.build(me.print_sel.val(), _p.preview, !me.with_letterhead());\n\t\t});\n\t},\n\tselected_format: function () {\n\t\treturn this.print_sel.val() || this.frm.meta.default_print_format || \"Standard\";\n\t},\n\tis_old_style: function (format) {\n\t\treturn this.get_print_format(format).print_format_type === \"Client\";\n\t},\n\tis_raw_printing: function (format) {\n\t\treturn this.get_print_format(format).raw_printing === 1;\n\t},\n\tget_print_format: function (format) {\n\t\tif (!format) {\n\t\t\tformat = this.selected_format();\n\t\t}\n\n\t\tif (locals[\"Print Format\"] && locals[\"Print Format\"][format]) {\n\t\t\treturn locals[\"Print Format\"][format]\n\t\t} else {\n\t\t\treturn {}\n\t\t}\n\t},\n\twith_letterhead: function () {\n\t\treturn this.print_letterhead.is(\":checked\") ? 1 : 0;\n\t},\n\tset_style: function (style) {\n\t\tfrappe.dom.set_style(style || frappe.boot.print_css, \"print-style\");\n\t},\n\tprinter_setting_dialog: function () {\n\t\t// dialog for the Printer Settings\n\t\tvar me = this;\n\t\tthis.print_format_printer_map = me.get_print_format_printer_map();\n\t\tthis.data = [];\n\t\tthis.data = this.print_format_printer_map[this.frm.doctype] || [];\n\t\tthis.printer_list = [];\n\t\tfrappe.ui.form.qz_get_printer_list().then((data) => {\n\t\t\tthis.printer_list = data;\n\t\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __(\"Printer Settings\"),\n\t\t\t\tfields: [{\n\t\t\t\t\tfieldtype: 'Section Break'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfieldname: \"printer_mapping\",\n\t\t\t\t\tfieldtype: \"Table\",\n\t\t\t\t\tlabel: __('Printer Mapping'),\n\t\t\t\t\tin_place_edit: true,\n\t\t\t\t\tdata: this.data,\n\t\t\t\t\tget_data: () => {\n\t\t\t\t\t\treturn this.data;\n\t\t\t\t\t},\n\t\t\t\t\tfields: [{\n\t\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\t\tfieldname: \"print_format\",\n\t\t\t\t\t\tdefault: 0,\n\t\t\t\t\t\toptions: this.print_formats,\n\t\t\t\t\t\tread_only: 0,\n\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\tlabel: __('Print Format')\n\t\t\t\t\t}, {\n\t\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\t\tfieldname: \"printer\",\n\t\t\t\t\t\tdefault: 0,\n\t\t\t\t\t\toptions: this.printer_list,\n\t\t\t\t\t\tread_only: 0,\n\t\t\t\t\t\tin_list_view: 1,\n\t\t\t\t\t\tlabel: __('Printer')\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tprimary_action: function () {\n\t\t\t\t\tlet printer_mapping = this.get_values()[\"printer_mapping\"];\n\t\t\t\t\tif (printer_mapping && printer_mapping.length) {\n\t\t\t\t\t\tlet print_format_list = printer_mapping.map(a => a.print_format);\n\t\t\t\t\t\tlet has_duplicate = print_format_list.some((item, idx) => print_format_list.indexOf(item) != idx);\n\t\t\t\t\t\tif (has_duplicate)\n\t\t\t\t\t\t\tfrappe.throw(__(\"Cannot have multiple printers mapped to a single print format.\"));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprinter_mapping = [];\n\t\t\t\t\t}\n\t\t\t\t\tthis.print_format_printer_map = me.get_print_format_printer_map();\n\t\t\t\t\tthis.print_format_printer_map[me.frm.doctype] = printer_mapping;\n\t\t\t\t\tlocalStorage.print_format_printer_map = JSON.stringify(this.print_format_printer_map);\n\t\t\t\t\tthis.hide();\n\t\t\t\t},\n\t\t\t\tprimary_action_label: __('Save')\n\t\t\t});\n\t\t\tdialog.show();\n\t\t\tif (!(this.printer_list && this.printer_list.length)) {\n\t\t\t\tfrappe.throw(__(\"No Printer is Available.\"));\n\t\t\t}\n\t\t});\n\t}\n});\n\nfrappe.ui.get_print_settings = function (pdf, callback, letter_head) {\n\tvar print_settings = locals[\":Print Settings\"][\"Print Settings\"];\n\n\tvar default_letter_head = locals[\":Company\"] && frappe.defaults.get_default('company')\n\t\t? locals[\":Company\"][frappe.defaults.get_default('company')][\"default_letter_head\"]\n\t\t: '';\n\n\tvar columns = [{\n\t\tfieldtype: \"Check\",\n\t\tfieldname: \"with_letter_head\",\n\t\tlabel: __(\"With Letter head\")\n\t}, {\n\t\tfieldtype: \"Select\",\n\t\tfieldname: \"letter_head\",\n\t\tlabel: __(\"Letter Head\"),\n\t\tdepends_on: \"with_letter_head\",\n\t\toptions: $.map(frappe.boot.letter_heads, function (i, d) { return d }),\n\t\tdefault: letter_head || default_letter_head\n\t}, {\n\t\tfieldtype: \"Select\",\n\t\tfieldname: \"orientation\",\n\t\tlabel: __(\"Orientation\"),\n\t\toptions: \"Landscape\\nPortrait\",\n\t\tdefault: \"Landscape\"\n\t}];\n\n\tfrappe.prompt(columns, function (data) {\n\t\tvar data = $.extend(print_settings, data);\n\t\tif (!data.with_letter_head) {\n\t\t\tdata.letter_head = null;\n\t\t}\n\t\tif (data.letter_head) {\n\t\t\tdata.letter_head = frappe.boot.letter_heads[print_settings.letter_head];\n\t\t}\n\t\tcallback(data);\n\t}, __(\"Print Settings\"));\n}\n\n\n// qz tray connection wrapper\n//  - allows active and inactive connections to resolve regardless\n//  - try to connect once before firing the mimetype launcher\n//  - if connection fails, catch the reject, fire the mimetype launcher\n//  - after mimetype launcher is fired, try to connect 3 more times\n//  - display success/fail message to user\nfrappe.ui.form.qz_connect = function () {\n\treturn new Promise(function (resolve, reject) {\n\t\tfrappe.ui.form.qz_init().then(() => {\n\t\t\tif (qz.websocket.isActive()) { // if already active, resolve immediately\n\t\t\t\t// frappe.show_alert({message: __('QZ Tray Connection Active!'), indicator: 'green'});\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\t// try to connect once before firing the mimetype launcher\n\t\t\t\tfrappe.show_alert({\n\t\t\t\t\tmessage: __('Attempting Connection to QZ Tray...'),\n\t\t\t\t\tindicator: 'blue'\n\t\t\t\t});\n\t\t\t\tqz.websocket.connect().then(() => {\n\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\tmessage: __('Connected to QZ Tray!'),\n\t\t\t\t\t\tindicator: 'green'\n\t\t\t\t\t});\n\t\t\t\t\tresolve();\n\t\t\t\t}, function retry(err) {\n\t\t\t\t\tif (err.message === 'Unable to establish connection with QZ') {\n\t\t\t\t\t\t// if a connect was not successful, launch the mimetype, try 3 more times\n\t\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\t\tmessage: __('Attempting to launch QZ Tray...'),\n\t\t\t\t\t\t\tindicator: 'blue'\n\t\t\t\t\t\t}, 14);\n\t\t\t\t\t\twindow.location.assign(\"qz:launch\");\n\t\t\t\t\t\tqz.websocket.connect({\n\t\t\t\t\t\t\tretries: 3,\n\t\t\t\t\t\t\tdelay: 1\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\t\t\tmessage: __('Connected to QZ Tray!'),\n\t\t\t\t\t\t\t\tindicator: 'green'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tfrappe.throw(__('Error connecting to QZ Tray Application...<br><br> You need to have QZ Tray application installed and running, to use the Raw Print feature.<br><br><a target=\"_blank\" href=\"https://qz.io/download/\">Click here to Download and install QZ Tray</a>.<br> <a target=\"_blank\" href=\"https://erpnext.com/docs/user/manual/en/setting-up/print/raw-printing\">Click here to learn more about Raw Printing</a>.'));\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\t\tmessage: 'QZ Tray ' + err.toString(),\n\t\t\t\t\t\t\tindicator: 'red'\n\t\t\t\t\t\t}, 14);\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n}\n\nfrappe.ui.form.qz_init = function () {\n\t// Initializing qz tray library\n\treturn new Promise((resolve) => {\n\t\tif (typeof qz === \"object\" && typeof qz.version === \"string\") {\n\t\t\t// resolve immediately if already Initialized\n\t\t\tresolve();\n\t\t} else {\n\t\t\tlet qz_required_assets = [\n\t\t\t\t\"/assets/frappe/node_modules/js-sha256/build/sha256.min.js\",\n\t\t\t\t\"/assets/frappe/node_modules/qz-tray/qz-tray.js\"\n\t\t\t];\n\t\t\tfrappe.require(qz_required_assets,() => {\n\t\t\t\tqz.api.setPromiseType(function promise(resolver) {\n\t\t\t\t\treturn new Promise(resolver);\n\t\t\t\t});\n\t\t\t\tqz.api.setSha256Type(function (data) {\n\t\t\t\t\t// Codacy fix\n\t\t\t\t\t/*global sha256*/ \n\t\t\t\t\treturn sha256(data);\n\t\t\t\t});\n\t\t\t\tresolve();\n\t\t\t});\n\t\t\t// note 'frappe.require' does not have callback on fail. Hence, any failure cannot be communicated to the user.\n\t\t}\n\n\t});\n}\n\nfrappe.ui.form.qz_get_printer_list = function () {\n\t// returns the list of printers that are available to the QZ Tray\n\treturn frappe.ui.form.qz_connect().then(function () {\n\t\treturn qz.printers.find();\n\t}).then((data) => {\n\t\treturn data;\n\t}).catch((err) => {\n\t\tfrappe.ui.form.qz_fail(err);\n\t});\n}\n\nfrappe.ui.form.qz_success = function () {\n\t// notify qz successful print\n\tfrappe.show_alert({\n\t\tmessage: __('Print Sent to the printer!'),\n\t\tindicator: 'green'\n\t});\n}\n\nfrappe.ui.form.qz_fail = function (e) {\n\t// notify qz errors\n\tfrappe.show_alert({\n\t\tmessage: __(\"QZ Tray Failed: \") + e.toString(),\n\t\tindicator: 'red'\n\t}, 20);\n}\n\n","frappe.provide(\"frappe.ui.form\");\nfrappe.ui.form.Sidebar = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t},\n\n\tmake: function() {\n\t\tvar sidebar_content = frappe.render_template(\"form_sidebar\", {doctype: this.frm.doctype, frm:this.frm});\n\n\t\tthis.sidebar = $('<div class=\"form-sidebar overlay-sidebar hidden-xs hidden-sm\"></div>')\n\t\t\t.html(sidebar_content)\n\t\t\t.appendTo(this.page.sidebar.empty());\n\n\t\tthis.ratings = this.sidebar.find(\".sidebar-rating\");\n\t\tthis.comments = this.sidebar.find(\".sidebar-comments\");\n\t\tthis.user_actions = this.sidebar.find(\".user-actions\");\n\t\tthis.image_section = this.sidebar.find(\".sidebar-image-section\");\n\t\tthis.image_wrapper = this.image_section.find('.sidebar-image-wrapper');\n\t\tthis.make_assignments();\n\t\tthis.make_attachments();\n\t\tthis.make_review();\n\t\tthis.make_shared();\n\t\tthis.make_viewers();\n\n\t\tthis.make_tags();\n\t\tthis.make_like();\n\t\tthis.make_follow();\n\n\t\tthis.bind_events();\n\t\tfrappe.ui.form.setup_user_image_event(this.frm);\n\n\t\tthis.refresh();\n\n\t},\n\n\tbind_events: function() {\n\t\tvar me = this;\n\n\t\t// scroll to comments\n\t\tthis.comments.on(\"click\", function() {\n\t\t\tfrappe.utils.scroll_to(me.frm.footer.wrapper.find(\".form-comments\"), true);\n\t\t});\n\n\t\tthis.like_icon.on(\"click\", function() {\n\t\t\tfrappe.ui.toggle_like(me.like_icon, me.frm.doctype, me.frm.doc.name, function() {\n\t\t\t\tme.refresh_like();\n\t\t\t});\n\t\t});\n\t},\n\n\trefresh: function() {\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.sidebar.toggle(false);\n\t\t} else {\n\t\t\tthis.sidebar.toggle(true);\n\t\t\tthis.frm.assign_to.refresh();\n\t\t\tthis.frm.attachments.refresh();\n\t\t\tthis.frm.shared.refresh();\n\t\t\tthis.frm.follow.refresh();\n\t\t\tthis.frm.viewers.refresh();\n\t\t\tthis.frm.tags && this.frm.tags.refresh(this.frm.doc._user_tags);\n\t\t\tthis.sidebar.find(\".modified-by\").html(__(\"{0} edited this {1}\",\n\t\t\t\t[\"<strong>\" + frappe.user.full_name(this.frm.doc.modified_by) + \"</strong>\",\n\t\t\t\t\t\"<br>\" + comment_when(this.frm.doc.modified)]));\n\t\t\tthis.sidebar.find(\".created-by\").html(__(\"{0} created this {1}\",\n\t\t\t\t[\"<strong>\" + frappe.user.full_name(this.frm.doc.owner) + \"</strong>\",\n\t\t\t\t\t\"<br>\" + comment_when(this.frm.doc.creation)]));\n\n\t\t\tthis.refresh_like();\n\t\t\tthis.setup_ratings();\n\t\t\tfrappe.ui.form.set_user_image(this.frm);\n\t\t}\n\t},\n\n\trefresh_comments: function() {\n\t\t$.map(this.frm.timeline.get_communications(), function(c) {\n\t\t\treturn (c.communication_type===\"Communication\" || (c.communication_type==\"Comment\" && c.comment_type===\"Comment\")) ? c : null;\n\t\t});\n\t\tthis.comments.find(\".n-comments\").html(this.frm.get_docinfo().total_comments);\n\t},\n\n\tmake_tags: function() {\n\t\tvar me = this;\n\t\tif (this.frm.meta.issingle) {\n\t\t\tthis.sidebar.find(\".form-tags\").toggle(false);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.frm.tags = new frappe.ui.TagEditor({\n\t\t\tparent: this.sidebar.find(\".tag-area\"),\n\t\t\tfrm: this.frm,\n\t\t\ton_change: function(user_tags) {\n\t\t\t\tme.frm.doc._user_tags = user_tags;\n\t\t\t}\n\t\t});\n\t},\n\tmake_attachments: function() {\n\t\tvar me = this;\n\t\tthis.frm.attachments = new frappe.ui.form.Attachments({\n\t\t\tparent: me.sidebar.find(\".form-attachments\"),\n\t\t\tfrm: me.frm\n\t\t});\n\t},\n\tmake_assignments: function() {\n\t\tthis.frm.assign_to = new frappe.ui.form.AssignTo({\n\t\t\tparent: this.sidebar.find(\".form-assignments\"),\n\t\t\tfrm: this.frm\n\t\t});\n\t},\n\tmake_shared: function() {\n\t\tthis.frm.shared = new frappe.ui.form.Share({\n\t\t\tfrm: this.frm,\n\t\t\tparent: this.sidebar.find(\".form-shared\")\n\t\t});\n\t},\n\tmake_viewers: function() {\n\t\tthis.frm.viewers = new frappe.ui.form.Viewers({\n\t\t\tfrm: this.frm,\n\t\t\tparent: this.sidebar.find(\".form-viewers\")\n\t\t});\n\t},\n\tadd_user_action: function(label, click) {\n\t\treturn $('<a>').html(label).appendTo($('<li class=\"user-action-row\">')\n\t\t\t.appendTo(this.user_actions.removeClass(\"hidden\"))).on(\"click\", click);\n\t},\n\tclear_user_actions: function() {\n\t\tthis.user_actions.addClass(\"hidden\")\n\t\tthis.user_actions.find(\".user-action-row\").remove();\n\t},\n\n\tmake_like: function() {\n\t\tthis.like_wrapper = this.sidebar.find(\".liked-by\");\n\t\tthis.like_icon = this.sidebar.find(\".liked-by .octicon-heart\");\n\t\tthis.like_count = this.sidebar.find(\".liked-by .likes-count\");\n\t\tfrappe.ui.setup_like_popover(this.sidebar.find(\".liked-by-parent\"), \".liked-by\");\n\t},\n\tmake_follow: function(){\n\t\tthis.frm.follow = new frappe.ui.form.DocumentFollow({\n\t\t\tfrm: this.frm,\n\t\t\tparent: this.sidebar.find(\".followed-by-section\")\n\t\t});\n\t},\n\trefresh_like: function() {\n\t\tif (!this.like_icon) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.like_wrapper.attr(\"data-liked-by\", this.frm.doc._liked_by);\n\n\t\tthis.like_icon.toggleClass(\"text-extra-muted not-liked\",\n\t\t\t!frappe.ui.is_liked(this.frm.doc))\n\t\t\t.attr(\"data-doctype\", this.frm.doctype)\n\t\t\t.attr(\"data-name\", this.frm.doc.name);\n\n\t\tthis.like_count.text(JSON.parse(this.frm.doc._liked_by || \"[]\").length);\n\t},\n\n\trefresh_image: function() {\n\t},\n\n\tsetup_ratings: function() {\n\t\tvar _ratings = this.frm.get_docinfo().rating || 0;\n\n\t\tif(_ratings) {\n\t\t\tthis.ratings.removeClass(\"hide\");\n\t\t\tvar rating_icons = frappe.render_template(\"rating_icons\", {rating: _ratings, show_label: false});\n\t\t\tthis.ratings.find(\".rating-icons\").html(rating_icons);\n\t\t}\n\t},\n\n\tmake_review: function() {\n\t\tif (frappe.boot.energy_points_enabled && !this.frm.is_new()) {\n\t\t\tthis.frm.reviews = new frappe.ui.form.Review({\n\t\t\t\tparent: this.sidebar.find(\".form-reviews\"),\n\t\t\t\tfrm: this.frm\n\t\t\t});\n\t\t}\n\t}\n});\n","frappe.ui.form.set_user_image = function(frm) {\n\n\tvar image_section = frm.sidebar.image_section;\n\tvar image_field = frm.meta.image_field;\n\tvar image = frm.doc[image_field];\n\tvar title_image = frm.page.$title_area.find('.title-image');\n\n\n\timage_section.toggleClass('hide', image_field ? false : true);\n\ttitle_image.toggleClass('hide', image_field ? false : true);\n\n\tif(!image_field) {\n\t\treturn;\n\t}\n\n\t// if image field has value\n\tif (image) {\n\t\timage = (window.cordova && image.indexOf('http')===-1) ?\n\t\t\tfrappe.base_url + image : image;\n\n\t\timage_section\n\t\t\t.find(\".sidebar-image\")\n\t\t\t.css(\"background-image\", 'url(\"' + image + '\")')\n\t\t\t.removeClass(\"hide\");\n\n\t\timage_section\n\t\t\t.find('.sidebar-standard-image')\n\t\t\t.addClass('hide');\n\n\t\ttitle_image\n\t\t\t.css('background-color', '')\n\t\t\t.css(\"background-image\", 'url(\"' + image + '\")')\n\t\t\t.html('');\n\n\t} else {\n\t\timage_section\n\t\t\t.find(\".sidebar-image\")\n\t\t\t.css(\"background-image\", null)\n\t\t\t.addClass(\"hide\");\n\n\t\tvar title = frm.get_title();\n\n\t\timage_section\n\t\t\t.find('.sidebar-standard-image')\n\t\t\t.removeClass('hide')\n\t\t\t.find('.standard-image')\n\t\t\t.css({'background-color': frappe.get_palette(title)})\n\t\t\t.html(frappe.get_abbr(title));\n\n\t\ttitle_image.css(\"background-image\", '')\n\t\t\t.css({'background-color': frappe.get_palette(title)})\n\t\t\t.html(frappe.get_abbr(title));\n\n\t}\n\n}\n\nfrappe.ui.form.setup_user_image_event = function(frm) {\n\t// re-draw image on change of user image\n\tif(frm.meta.image_field) {\n\t\tfrappe.ui.form.on(frm.doctype, frm.meta.image_field, function(frm) {\n\t\t\tfrappe.ui.form.set_user_image(frm);\n\t\t});\n\t}\n\n\t// bind click on image_wrapper\n\tfrm.sidebar.image_wrapper.on('click', function() {\n\t\tvar field = frm.get_field(frm.meta.image_field);\n\t\tif(!field.$input) {\n\t\t\tfield.make_input();\n\t\t}\n\t\tfield.$input.trigger('click');\n\t});\n}","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.Share = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t},\n\trefresh: function() {\n\t\tthis.render_sidebar();\n\t},\n\trender_sidebar: function() {\n\t\tvar me = this;\n\t\tthis.parent.empty();\n\n\t\tvar shared = this.shared || this.frm.get_docinfo().shared;\n\t\tshared = shared.filter(function(d) { return d });\n\t\tvar users = [];\n\t\tfor (var i=0, l=shared.length; i < l; i++) {\n\t\t\tvar s = shared[i];\n\n\t\t\tif (s.everyone) {\n\t\t\t\tusers.push({\n\t\t\t\t\ticon: \"octicon octicon-megaphone text-muted\",\n\t\t\t\t\tavatar_class: \"avatar-empty share-doc-btn shared-with-everyone\",\n\t\t\t\t\ttitle: __(\"Shared with everyone\")\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar user_info = frappe.user_info(s.user);\n\t\t\t\tusers.push({\n\t\t\t\t\timage: user_info.image,\n\t\t\t\t\tfullname: user_info.fullname,\n\t\t\t\t\tabbr: user_info.abbr,\n\t\t\t\t\tcolor: user_info.color,\n\t\t\t\t\ttitle: __(\"Shared with {0}\", [user_info.fullname])\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (!me.frm.doc.__islocal) {\n\t\t\tusers.push({\n\t\t\t\ticon: \"octicon octicon-plus text-muted\",\n\t\t\t\tavatar_class: \"avatar-empty share-doc-btn\",\n\t\t\t\ttitle: __(\"Share\")\n\t\t\t});\n\t\t}\n\n\t\tthis.parent.append(frappe.render_template(\"users_in_sidebar\", {\"users\": users}));\n\t\tthis.parent.find(\".avatar\").on(\"click\", function() {\n\t\t\tme.frm.share_doc();\n\t\t});\n\t},\n\tshow: function() {\n\t\tvar me = this;\n\t\tvar d = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Share {0} with\", [this.frm.doc.name]),\n\t\t});\n\n\t\tthis.dialog = d;\n\t\tthis.dirty = false;\n\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.share.get_users\",\n\t\t\targs: {\n\t\t\t\tdoctype: this.frm.doctype,\n\t\t\t\tname: this.frm.doc.name\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tme.render_shared(r.message || []);\n\t\t\t}\n\t\t});\n\n\t\t$(d.body).html('<p class=\"text-muted\">' + __(\"Loading...\") + '</p>');\n\n\t\td.onhide = function() {\n\t\t\t// reload comments\n\t\t\tif(me.dirty) me.frm.reload_docinfo();\n\t\t}\n\n\t\td.show();\n\t},\n\trender_shared: function(shared) {\n\t\tif(shared)\n\t\t\tthis.shared = shared;\n\t\tvar d = this.dialog;\n\t\t$(d.body).empty();\n\n\t\tvar everyone = {};\n\t\t$.each(this.shared, function(i, s) {\n\t\t\t// pullout everyone record from shared list\n\t\t\tif (s && s.everyone) {\n\t\t\t\teveryone = s;\n\t\t\t}\n\t\t});\n\n\t\t$(frappe.render_template(\"set_sharing\", {frm: this.frm, shared: this.shared, everyone: everyone}))\n\t\t\t.appendTo(d.body);\n\n\t\tif(frappe.model.can_share(null, this.frm)) {\n\t\t\tthis.make_user_input();\n\t\t\tthis.add_share_button();\n\t\t\tthis.set_edit_share_events();\n\t\t} else {\n\t\t\t// if cannot share, disable sharing settings.\n\t\t\t$(d.body).find(\".edit-share\").prop(\"disabled\", true);\n\t\t}\n\t},\n\tmake_user_input: function() {\n\t\t// make add-user input\n\t\tthis.dialog.share_with = frappe.ui.form.make_control({\n\t\t\tparent: $(this.dialog.body).find(\".input-wrapper-add-share\"),\n\t\t\tdf: {\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: __(\"Share With\"),\n\t\t\t\tfieldname: \"share_with\",\n\t\t\t\toptions: \"User\",\n\t\t\t\tfilters: {\n\t\t\t\t\t\"user_type\": \"System User\",\n\t\t\t\t\t\"name\": [\"!=\", frappe.session.user]\n\t\t\t\t}\n\t\t\t},\n\t\t\tonly_input: true,\n\t\t\trender_input: true\n\t\t});\n\n\t},\n\tadd_share_button: function() {\n\t\tvar me = this, d = this.dialog;\n\t\t$(d.body).find(\".btn-add-share\").on(\"click\", function() {\n\t\t\tvar user = d.share_with.get_value();\n\t\t\tif(!user) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.share.add\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\t\tname: me.frm.doc.name,\n\t\t\t\t\tuser: user,\n\t\t\t\t\tread: $(d.body).find(\".add-share-read\").prop(\"checked\") ? 1 : 0,\n\t\t\t\t\twrite: $(d.body).find(\".add-share-write\").prop(\"checked\") ? 1 : 0,\n\t\t\t\t\tshare: $(d.body).find(\".add-share-share\").prop(\"checked\") ? 1 : 0,\n\t\t\t\t\tnotify: $(d.body).find(\".add-share-notify\").prop(\"checked\") ? 1 : 0\n\t\t\t\t},\n\t\t\t\tbtn: this,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\t$.each(me.shared, function(i, s) {\n\t\t\t\t\t\tif(s && s.user===r.message.user) {\n\t\t\t\t\t\t\t// re-adding / remove the old share rule.\n\t\t\t\t\t\t\tdelete me.shared[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tme.dirty = true;\n\t\t\t\t\tme.shared.push(r.message);\n\t\t\t\t\tme.render_shared();\n\t\t\t\t\tme.frm.shared.refresh();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tset_edit_share_events: function() {\n\t\tvar me = this, d = this.dialog;\n\t\t$(d.body).find(\".edit-share\").on(\"click\", function() {\n\t\t\tvar user = $(this).parents(\".shared-user:first\").attr(\"data-user\") || \"\",\n\t\t\t\tvalue = $(this).prop(\"checked\") ? 1 : 0,\n\t\t\t\tproperty = $(this).attr(\"name\"),\n\t\t\t\teveryone = cint($(this).parents(\".shared-user:first\").attr(\"data-everyone\"));\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.share.set_permission\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\t\tname: me.frm.doc.name,\n\t\t\t\t\tuser: user,\n\t\t\t\t\tpermission_to: property,\n\t\t\t\t\tvalue: value,\n\t\t\t\t\teveryone: everyone\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tvar found = null;\n\t\t\t\t\t$.each(me.shared, function(i, s) {\n\t\t\t\t\t\t// update shared object\n\t\t\t\t\t\tif(s && (s.user===user || (everyone && s.everyone===1))) {\n\t\t\t\t\t\t\tif(!r.message) {\n\t\t\t\t\t\t\t\tdelete me.shared[i];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tme.shared[i] = $.extend(s, r.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!found) {\n\t\t\t\t\t\tme.shared.push(r.message);\n\t\t\t\t\t}\n\n\t\t\t\t\tme.dirty = true;\n\t\t\t\t\tme.render_shared();\n\t\t\t\t\tme.frm.shared.refresh();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n});\n","// Copyright (c) 2019, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.Review = class Review {\n\tconstructor({parent, frm}) {\n\t\tthis.parent = parent;\n\t\tthis.frm = frm;\n\t\tthis.points = frappe.boot.points;\n\t\tthis.make_review_container();\n\t\tthis.add_review_button();\n\t\tthis.update_reviewers();\n\t}\n\tupdate_points() {\n\t\treturn frappe.xcall('frappe.social.doctype.energy_point_log.energy_point_log.get_energy_points', {\n\t\t\tuser: frappe.session.user\n\t\t}).then(data => {\n\t\t\tfrappe.boot.points = data;\n\t\t\tthis.points = data;\n\t\t});\n\t}\n\tmake_review_container() {\n\t\tthis.review_list_wrapper = this.parent.find('.review-list');\n\t}\n\tadd_review_button() {\n\n\t\tthis.review_list_wrapper.append(`\n\t\t\t<span class=\"avatar avatar-small avatar-empty btn-add-review\" title=\"${__('Add Review')}\">\n\t\t\t\t<i class=\"octicon octicon-plus text-muted\"></i>\n\t\t\t</span>\n\t\t`);\n\n\t\tconst review_button = this.review_list_wrapper.find('.btn-add-review');\n\n\t\tif (!this.points.review_points) {\n\t\t\treview_button.click(false);\n\t\t\treview_button.popover({\n\t\t\t\ttrigger: 'hover',\n\t\t\t\tcontent: () => {\n\t\t\t\t\treturn `<div class=\"text-medium\">\n\t\t\t\t\t\t${__('You do not have enough review points')}\n\t\t\t\t\t</div>`;\n\t\t\t\t},\n\t\t\t\thtml: true\n\t\t\t});\n\t\t} else {\n\t\t\treview_button.click(() => this.show_review_dialog());\n\t\t}\n\t}\n\tget_involved_users() {\n\t\tconst user_fields = this.frm.meta.fields\n\t\t\t.filter(d => d.fieldtype === 'Link' && d.options === 'User')\n\t\t\t.map(d => d.fieldname);\n\n\t\tuser_fields.push('owner');\n\t\tlet involved_users = user_fields.map(field => this.frm.doc[field]);\n\n\t\tconst docinfo = this.frm.get_docinfo();\n\n\t\tinvolved_users = involved_users.concat(\n\t\t\tdocinfo.communications.map(d => d.sender && d.delivery_status==='sent'),\n\t\t\tdocinfo.comments.map(d => d.owner),\n\t\t\tdocinfo.versions.map(d => d.owner),\n\t\t\tdocinfo.assignments.map(d => d.owner)\n\t\t);\n\n\t\treturn involved_users\n\t\t\t.uniqBy(u => u)\n\t\t\t.filter(user => !['Administrator', frappe.session.user].includes(user))\n\t\t\t.filter(Boolean);\n\t}\n\tshow_review_dialog() {\n\t\tconst user_options = this.get_involved_users();\n\t\tconst doc_owner = this.frm.doc.owner;\n\t\tconst review_dialog = new frappe.ui.Dialog({\n\t\t\t'title': __('Add Review'),\n\t\t\t'fields': [{\n\t\t\t\tfieldname: 'to_user',\n\t\t\t\tfieldtype: 'Autocomplete',\n\t\t\t\tlabel: __('To User'),\n\t\t\t\toptions: user_options,\n\t\t\t\tdescription: __('Only users involved in the document are listed')\n\t\t\t}, {\n\t\t\t\tfieldname: 'review_type',\n\t\t\t\tfieldtype: 'Select',\n\t\t\t\tlabel: __('Action'),\n\t\t\t\toptions: [{\n\t\t\t\t\t'label': __('Appreciate'),\n\t\t\t\t\t'value': 'Appreciation'\n\t\t\t\t}, {\n\t\t\t\t\t'label': __('Criticize'),\n\t\t\t\t\t'value': 'Criticism'\n\t\t\t\t}],\n\t\t\t\tdefault: 'Appreciation'\n\t\t\t}, {\n\t\t\t\tfieldname: 'points',\n\t\t\t\tfieldtype: 'Int',\n\t\t\t\tlabel: __('Points'),\n\t\t\t\treqd: 1,\n\t\t\t\tdescription: __(`Currently you have ${this.points.review_points} review points`)\n\t\t\t}, {\n\t\t\t\tfieldtype: 'Small Text',\n\t\t\t\tfieldname: 'reason',\n\t\t\t\treqd: 1,\n\t\t\t\tlabel: __('Reason')\n\t\t\t}],\n\t\t\tprimary_action: (values) => {\n\t\t\t\treview_dialog.disable_primary_action();\n\t\t\t\tif (values.points > this.points.review_points) {\n\t\t\t\t\treturn frappe.msgprint(__('You do not have enough points'));\n\t\t\t\t}\n\t\t\t\tfrappe.xcall('frappe.social.doctype.energy_point_log.energy_point_log.review', {\n\t\t\t\t\tdoc: {\n\t\t\t\t\t\tdoctype: this.frm.doc.doctype,\n\t\t\t\t\t\tname: this.frm.doc.name,\n\t\t\t\t\t},\n\t\t\t\t\tto_user: values.to_user,\n\t\t\t\t\tpoints: values.points,\n\t\t\t\t\treview_type: values.review_type,\n\t\t\t\t\treason: values.reason\n\t\t\t\t}).then(review => {\n\t\t\t\t\treview_dialog.hide();\n\t\t\t\t\treview_dialog.clear();\n\t\t\t\t\tthis.frm.get_docinfo().energy_point_logs.unshift(review);\n\t\t\t\t\tthis.frm.timeline.refresh();\n\t\t\t\t\tthis.update_reviewers();\n\t\t\t\t\tthis.update_points();\n\t\t\t\t}).finally(() => {\n\t\t\t\t\treview_dialog.enable_primary_action();\n\t\t\t\t});\n\t\t\t},\n\t\t\tprimary_action_label: __('Submit')\n\t\t});\n\t\treview_dialog.show();\n\t}\n\tupdate_reviewers() {\n\t\tconst review_logs = this.frm.get_docinfo().energy_point_logs\n\t\t\t.filter(log => ['Appreciation', 'Criticism'].includes(log.type));\n\n\t\tthis.review_list_wrapper.find('.review-pill').remove();\n\t\treview_logs.forEach(log => {\n\t\t\tlet review_pill = $(`\n\t\t\t\t<span class=\"review-pill\">\n\t\t\t\t\t${frappe.avatar(log.owner)}\n\t\t\t\t\t${frappe.energy_points.get_points(log.points)}\n\t\t\t\t</span>\n\t\t\t`);\n\t\t\tthis.review_list_wrapper.prepend(review_pill);\n\t\t\tthis.setup_detail_popover(review_pill, log);\n\t\t});\n\t}\n\tsetup_detail_popover(el, data) {\n\t\tlet subject = '';\n\t\tlet fullname = frappe.user.full_name(data.user);\n\t\tlet timestamp = `<span class=\"text-muted\">${frappe.datetime.comment_when(data.creation)}</span>`;\n\t\tlet message_parts = [Math.abs(data.points), fullname, timestamp];\n\t\tif (data.type === 'Appreciation') {\n\t\t\tif (data.points == 1) {\n\t\t\t\tsubject = __('{0} appreciation point for {1} {2}', message_parts);\n\t\t\t} else {\n\t\t\t\tsubject = __('{0} appreciation points for {1} {2}', message_parts);\n\t\t\t}\n\t\t} else {\n\t\t\tif (data.points == -1) {\n\t\t\t\tsubject = __('{0} criticism point for {1} {2}', message_parts);\n\t\t\t} else {\n\t\t\t\tsubject = __('{0} criticism points for {1} {2}', message_parts);\n\t\t\t}\n\t\t}\n\t\tel.popover({\n\t\t\tanimation: true,\n\t\t\ttrigger: 'hover',\n\t\t\tdelay: 500,\n\t\t\tplacement: 'top',\n\t\t\ttemplate:`\n\t\t\t\t<div class=\"review-popover popover\">\n\t\t\t\t\t<div class=\"arrow\"></div>\n\t\t\t\t\t<div class=\"popover-content\"></div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tcontent: () => {\n\t\t\t\treturn `\n\t\t\t\t\t<div class=\"text-medium\">\n\t\t\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t\t\t${subject}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"body\">\n\t\t\t\t\t\t\t<div>${data.reason}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t},\n\t\t\thtml: true,\n\t\t\tcontainer: 'body'\n\t\t});\n\t\treturn el;\n\t}\n};\n","frappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.Viewers = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t},\n\tget_viewers: function() {\n\t\tlet docinfo = this.frm.get_docinfo();\n\t\tif (docinfo) {\n\t\t\treturn docinfo.viewers || {};\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t},\n\trefresh: function(data_updated) {\n\t\tthis.parent.empty();\n\n\t\tvar viewers = this.get_viewers();\n\n\t\tvar users = [];\n\t\tvar new_users = [];\n\t\tfor (var i=0, l=(viewers.current || []).length; i < l; i++) {\n\t\t\tvar username = viewers.current[i];\n\t\t\tif (username===frappe.session.user) {\n\t\t\t\t// current user\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar user_info = frappe.user_info(username);\n\t\t\tusers.push({\n\t\t\t\timage: user_info.image,\n\t\t\t\tfullname: user_info.fullname,\n\t\t\t\tabbr: user_info.abbr,\n\t\t\t\tcolor: user_info.color,\n\t\t\t\ttitle: __(\"{0} is currently viewing this document\", [user_info.fullname])\n\t\t\t});\n\n\t\t\tif (viewers.new.indexOf(username)!==-1) {\n\t\t\t\tnew_users.push(user_info.fullname);\n\t\t\t}\n\t\t}\n\n\t\tif (users.length) {\n\t\t\tthis.parent.parent().removeClass(\"hidden\");\n\t\t\tthis.parent.append(frappe.render_template(\"users_in_sidebar\", {\"users\": users}));\n\t\t} else {\n\t\t\tthis.parent.parent().addClass(\"hidden\");\n\t\t}\n\n\t\tif (data_updated && new_users.length) {\n\t\t\t// new user viewing this document, who wasn't viewing in the past\n\t\t\tif (new_users.length===1) {\n\t\t\t\tfrappe.show_alert(__(\"{0} is currently viewing this document\", [new_users[0]]));\n\t\t\t} else {\n\t\t\t\tfrappe.show_alert(__(\"{0} are currently viewing this document\", [frappe.utils.comma_and(new_users)]));\n\t\t\t}\n\n\t\t}\n\t}\n});\n\nfrappe.ui.form.set_viewers = function(data) {\n\tvar doctype = data.doctype;\n\tvar docname = data.docname;\n\tvar docinfo = frappe.model.get_docinfo(doctype, docname);\n\tvar past_viewers = ((docinfo && docinfo.viewers) || {}).past || [];\n\tvar viewers = data.viewers || [];\n\n\tvar new_viewers = viewers.filter(viewer => !past_viewers.includes(viewer));\n\n\tfrappe.model.set_docinfo(doctype, docname, \"viewers\", {\n\t\tpast: past_viewers.concat(new_viewers),\n\t\tnew: new_viewers,\n\t\tcurrent: viewers\n\t});\n\n\tif (cur_frm && cur_frm.doc && cur_frm.doc.doctype===doctype && cur_frm.doc.name==docname) {\n\t\tcur_frm.viewers.refresh(true);\n\t}\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.form.Footer = Class.extend({\n\tinit: function(opts) {\n\t\tvar me = this;\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t\tthis.make_comments();\n\t\t// render-complete\n\t\t$(this.frm.wrapper).on(\"render_complete\", function() {\n\t\t\tme.refresh();\n\t\t});\n\t},\n\tmake: function() {\n\t\tvar me = this;\n\t\tthis.wrapper = $(frappe.render_template(\"form_footer\", {}))\n\t\t\t.appendTo(this.parent);\n\t\tthis.wrapper.find(\".btn-save\").click(function() {\n\t\t\tme.frm.save('Save', null, this);\n\t\t})\n\n\t},\n\tmake_comments: function() {\n\t\tthis.frm.timeline = new frappe.ui.form.Timeline({\n\t\t\tparent: this.wrapper.find(\".form-comments\"),\n\t\t\tfrm: this.frm\n\t\t});\n\t},\n\trefresh: function() {\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.parent.addClass(\"hide\");\n\t\t} else {\n\t\t\tthis.parent.removeClass(\"hide\");\n\t\t\tthis.frm.timeline.refresh();\n\t\t}\n\t},\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.Attachments = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t},\n\tmake: function() {\n\t\tvar me = this;\n\t\tthis.parent.find(\".add-attachment\").click(function() {\n\t\t\tme.new_attachment();\n\t\t});\n\t\tthis.add_attachment_wrapper = this.parent.find(\".add_attachment\").parent();\n\t\tthis.attachments_label = this.parent.find(\".attachments-label\");\n\t},\n\tmax_reached: function() {\n\t\t// no of attachments\n\t\tvar n = Object.keys(this.get_attachments()).length;\n\n\t\t// button if the number of attachments is less than max\n\t\tif(n < this.frm.meta.max_attachments || !this.frm.meta.max_attachments) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\trefresh: function() {\n\t\tvar me = this;\n\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.parent.toggle(false);\n\t\t\treturn;\n\t\t}\n\t\tthis.parent.toggle(true);\n\t\tthis.parent.find(\".attachment-row\").remove();\n\n\t\tvar max_reached = this.max_reached();\n\t\tthis.add_attachment_wrapper.toggleClass(\"hide\", !max_reached);\n\n\t\t// add attachment objects\n\t\tvar attachments = this.get_attachments();\n\t\tif(attachments.length) {\n\t\t\tattachments.forEach(function(attachment) {\n\t\t\t\tme.add_attachment(attachment)\n\t\t\t});\n\t\t} else {\n\t\t\tthis.attachments_label.removeClass(\"has-attachments\");\n\t\t}\n\n\t},\n\tget_attachments: function() {\n\t\treturn this.frm.get_docinfo().attachments;\n\t},\n\tadd_attachment: function(attachment) {\n\t\tvar file_name = attachment.file_name;\n\t\tvar file_url = this.get_file_url(attachment);\n\t\tvar fileid = attachment.name;\n\t\tif (!file_name) {\n\t\t\tfile_name = file_url;\n\t\t}\n\n\t\tvar me = this;\n\n\t\tvar $attach = $(frappe.render_template(\"attachment\", {\n\t\t\t\"file_path\": \"/desk#Form/File/\" + fileid,\n\t\t\t\"icon\": attachment.is_private ? \"fa fa-lock\" : \"fa fa-unlock-alt\",\n\t\t\t\"file_name\": file_name,\n\t\t\t\"file_url\": frappe.urllib.get_full_url(file_url)\n\t\t})).insertAfter(this.attachments_label.addClass(\"has-attachments\"));\n\n\t\tvar $close =\n\t\t\t$attach.find(\".close\")\n\t\t\t.data(\"fileid\", fileid)\n\t\t\t.click(function() {\n\t\t\t\tvar remove_btn = this;\n\t\t\t\tfrappe.confirm(__(\"Are you sure you want to delete the attachment?\"),\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tme.remove_attachment($(remove_btn).data(\"fileid\"))\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn false\n\t\t\t});\n\n\t\tif(!frappe.model.can_write(this.frm.doctype, this.frm.name)) {\n\t\t\t$close.remove();\n\t\t}\n\t},\n\tget_file_url: function(attachment) {\n\t\tvar file_url = attachment.file_url;\n\t\tif (!file_url) {\n\t\t\tif (attachment.file_name.indexOf('files/') === 0) {\n\t\t\t\tfile_url = '/' + attachment.file_name;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfile_url = '/files/' + attachment.file_name;\n\t\t\t}\n\t\t}\n\t\t// hash is not escaped, https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI\n\t\treturn encodeURI(file_url).replace(/#/g, '%23');\n\t},\n\tget_file_id_from_file_url: function(file_url) {\n\t\tvar fid;\n\t\t$.each(this.get_attachments(), function(i, attachment) {\n\t\t\tif (attachment.file_url === file_url) {\n\t\t\t\tfid = attachment.name;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn fid;\n\t},\n\tremove_attachment_by_filename: function(filename, callback) {\n\t\tthis.remove_attachment(this.get_file_id_from_file_url(filename), callback);\n\t},\n\tremove_attachment: function(fileid, callback) {\n\t\tif (!fileid) {\n\t\t\tif (callback) callback();\n\t\t\treturn;\n\t\t}\n\n\t\tvar me = this;\n\t\treturn frappe.call({\n\t\t\tmethod: 'frappe.desk.form.utils.remove_attach',\n\t\t\targs: {\n\t\t\t\tfid: fileid,\n\t\t\t\tdt: me.frm.doctype,\n\t\t\t\tdn: me.frm.docname\n\t\t\t},\n\t\t\tcallback: function(r,rt) {\n\t\t\t\tif(r.exc) {\n\t\t\t\t\tif(!r._server_messages)\n\t\t\t\t\t\tfrappe.msgprint(__(\"There were errors\"));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tme.remove_fileid(fileid);\n\t\t\t\tme.frm.reload_docinfo();\n\t\t\t\tif (callback) callback();\n\t\t\t}\n\t\t});\n\t},\n\tnew_attachment: function(fieldname) {\n\t\tvar me = this;\n\t\tif (this.dialog) {\n\t\t\t// remove upload dialog\n\t\t\tthis.dialog.$wrapper.remove();\n\t\t}\n\n\t\tnew frappe.ui.FileUploader({\n\t\t\tdoctype: this.frm.doctype,\n\t\t\tdocname: this.frm.docname,\n\t\t\ton_success: (file_doc) => {\n\t\t\t\tthis.attachment_uploaded(file_doc);\n\t\t\t}\n\t\t});\n\t},\n\tget_args: function() {\n\t\treturn {\n\t\t\tfrom_form: 1,\n\t\t\tdoctype: this.frm.doctype,\n\t\t\tdocname: this.frm.docname,\n\t\t}\n\t},\n\tattachment_uploaded:  function(attachment) {\n\t\tthis.dialog && this.dialog.hide();\n\t\tthis.update_attachment(attachment);\n\t\tthis.frm.reload_docinfo();\n\n\t\tif(this.fieldname) {\n\t\t\tthis.frm.set_value(this.fieldname, attachment.file_url);\n\t\t}\n\t},\n\tupdate_attachment: function(attachment) {\n\t\tif(attachment.name) {\n\t\t\tthis.add_to_attachments(attachment);\n\t\t\tthis.refresh();\n\t\t}\n\t},\n\tadd_to_attachments: function (attachment) {\n\t\tvar form_attachments = this.get_attachments();\n\t\tfor(var i in form_attachments) {\n\t\t\t// prevent duplicate\n\t\t\tif(form_attachments[i][\"name\"] === attachment.name) return;\n\t\t}\n\t\tform_attachments.push(attachment);\n\t},\n\tremove_fileid: function(fileid) {\n\t\tvar attachments = this.get_attachments();\n\t\tvar new_attachments = [];\n\t\t$.each(attachments, function(i, attachment) {\n\t\t\tif(attachment.name!=fileid) {\n\t\t\t\tnew_attachments.push(attachment);\n\t\t\t}\n\t\t});\n\t\tthis.frm.get_docinfo().attachments = new_attachments;\n\t\tthis.refresh();\n\t}\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.timeline');\nfrappe.separator_element = '<div>---</div>';\n\nfrappe.ui.form.Timeline = class Timeline {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tvar me = this;\n\t\tthis.wrapper = $(frappe.render_template(\"timeline\",\n\t\t\t{doctype: me.frm.doctype, allow_events_in_timeline: me.frm.meta.allow_events_in_timeline})).appendTo(me.parent);\n\n\t\tthis.list = this.wrapper.find(\".timeline-items\");\n\n\t\tthis.comment_area = frappe.ui.form.make_control({\n\t\t\tparent: this.wrapper.find('.timeline-head'),\n\t\t\tdf: {\n\t\t\t\tfieldtype: 'Comment',\n\t\t\t\tfieldname: 'comment',\n\t\t\t\tlabel: 'Comment'\n\t\t\t},\n\t\t\tmentions: this.get_names_for_mentions(),\n\t\t\trender_input: true,\n\t\t\tonly_input: true,\n\t\t\ton_submit: (val) => {\n\t\t\t\tval && this.insert_comment(val, this.comment_area.button);\n\t\t\t}\n\t\t});\n\n\t\tthis.setup_email_button();\n\t\tthis.setup_interaction_button();\n\n\t\tthis.list.on(\"click\", \".toggle-blockquote\", function() {\n\t\t\t$(this).parent().siblings(\"blockquote\").toggleClass(\"hidden\");\n\t\t});\n\n\t\tthis.setup_comment_like();\n\n\t\tthis.list.on(\"click\", \".btn-more\", function() {\n\t\t\tvar communications = me.get_communications();\n\t\t\tfrappe.call({\n\t\t\t\tbtn: this,\n\t\t\t\tmethod: \"frappe.desk.form.load.get_communications\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: me.frm.doc.doctype,\n\t\t\t\t\tname: me.frm.doc.name,\n\t\t\t\t\tstart: communications.length\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\tvar new_communications = r.message;\n\t\t\t\t\t\t\tvar communications = me.get_communications().concat(new_communications);\n\t\t\t\t\t\t\tfrappe.model.set_docinfo(me.frm.doc.doctype, me.frm.doc.name, \"communications\", communications);\n\n\t\t\t\t\t\t\tif (new_communications.length < 20) {\n\t\t\t\t\t\t\t\tme.more = false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme.more = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t}\n\n\tsetup_email_button() {\n\t\tvar me = this;\n\t\tvar selector = this.frm.doctype === \"Communication\"? \".btn-reply-email\": \".btn-new-email\";\n\t\tthis.email_button = this.wrapper.find(selector)\n\t\t\t.on(\"click\", function() {\n\t\t\t\tconst $btn = $(this);\n\t\t\t\tlet is_a_reply = true;\n\t\t\t\tif ($btn.is('.btn-new-email')) {\n\t\t\t\t\tis_a_reply = false;\n\t\t\t\t}\n\n\t\t\t\tvar args = {\n\t\t\t\t\tdoc: me.frm.doc,\n\t\t\t\t\tfrm: me.frm,\n\t\t\t\t\trecipients: me.get_recipient(),\n\t\t\t\t\tis_a_reply\n\t\t\t\t}\n\n\t\t\t\tif(me.frm.doctype === \"Communication\") {\n\t\t\t\t\t$.extend(args, {\n\t\t\t\t\t\ttxt: \"\",\n\t\t\t\t\t\tlast_email: me.frm.doc,\n\t\t\t\t\t\trecipients: me.frm.doc.sender,\n\t\t\t\t\t\tsubject: __(\"Re: {0}\", [me.frm.doc.subject]),\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst comment_value = frappe.markdown(me.comment_area.get_value());\n\t\t\t\t\t$.extend(args, {\n\t\t\t\t\t\ttxt: strip_html(comment_value) ? comment_value : ''\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tnew frappe.views.CommunicationComposer(args)\n\t\t\t});\n\t}\n\n\tsetup_interaction_button() {\n\t\tvar me = this;\n\t\tvar selector = \".btn-new-interaction\";\n\t\tthis.activity_button = this.wrapper.find(selector)\n\t\t\t.on(\"click\", function() {\n\t\t\t\tvar args = {\n\t\t\t\t\tdoc: me.frm.doc,\n\t\t\t\t\tfrm: me.frm,\n\t\t\t\t\trecipients: me.get_recipient()\n\t\t\t\t}\n\t\t\t\t$.extend(args, {\n\t\t\t\t\ttxt: frappe.markdown(me.comment_area.get_value())\n\t\t\t\t});\n\t\t\t\tnew frappe.views.InteractionComposer(args);\n\t\t\t});\n\t}\n\n\tsetup_editing_area() {\n\t\tthis.$editing_area = $('<div class=\"timeline-editing-area\">');\n\n\t\tthis.editing_area = new frappe.ui.CommentArea({\n\t\t\tparent: this.$editing_area,\n\t\t\tmentions: this.get_names_for_mentions(),\n\t\t\tno_wrapper: true\n\t\t});\n\n\t\tthis.editing_area.destroy();\n\t}\n\n\trefresh(scroll_to_end) {\n\t\tvar me = this;\n\t\tthis.last_type = \"Comment\";\n\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.wrapper.toggle(false);\n\t\t\treturn;\n\t\t}\n\t\tthis.wrapper.toggle(true);\n\t\tthis.list.empty();\n\t\tthis.comment_area.set_value('');\n\n\t\t// get all communications\n\t\tlet communications = this.get_communications(true);\n\n\t\t// append views\n\t\tvar views = this.get_view_logs();\n\t\tvar timeline = communications.concat(views);\n\n\t\t// append comments\n\t\ttimeline = timeline.concat(this.get_comments());\n\n\t\t// append energy point logs\n\t\ttimeline = timeline.concat(this.get_energy_point_logs());\n\n\t\t// append milestones\n\t\ttimeline = timeline.concat(this.get_milestones());\n\n\t\t// sort\n\t\ttimeline\n\t\t\t.filter(a => a.content)\n\t\t\t.sort((b, c) => me.compare_dates(b, c))\n\t\t\t.forEach(d => {\n\t\t\t\td.frm = me.frm;\n\t\t\t\tme.render_timeline_item(d);\n\t\t\t});\n\n\n\n\t\t// more btn\n\t\tif (this.more===undefined && timeline.length===20) {\n\t\t\tthis.more = true;\n\t\t}\n\n\t\tif (this.more) {\n\t\t\t$('<div class=\"timeline-item\">\\\n\t\t\t\t<button class=\"btn btn-default btn-xs btn-more\">More</button>\\\n\t\t\t</div>').appendTo(me.list);\n\t\t}\n\n\t\t// created\n\t\tme.render_timeline_item({\n\t\t\tcontent: __(\"created\"),\n\t\t\tcomment_type: \"Created\",\n\t\t\tcommunication_type: \"Comment\",\n\t\t\tsender: this.frm.doc.owner,\n\t\t\tcommunication_date: this.frm.doc.creation,\n\t\t\tcreation: this.frm.doc.creation,\n\t\t\tfrm: this.frm\n\t\t});\n\n\t\tthis.wrapper.find(\".is-email\").prop(\"checked\", this.last_type===\"Email\").change();\n\n\t\tthis.frm.sidebar.refresh_comments();\n\n\t\tthis.frm.trigger('timeline_refresh');\n\t}\n\n\tcompare_dates(b, c) {\n\t\tlet b_date = b.communication_date ? b.communication_date : b.creation;\n\t\tlet c_date = c.communication_date ? c.communication_date : c.creation;\n\t\tlet comparison = new Date(b_date) > new Date(c_date) ? -1 : 1;\n\t\treturn comparison;\n\t}\n\n\tmake_editing_area(container) {\n\t\treturn frappe.ui.form.make_control({\n\t\t\tparent: container,\n\t\t\tdf: {\n\t\t\t\tfieldtype: 'Comment',\n\t\t\t\tfieldname: 'comment',\n\t\t\t\tlabel: 'Comment'\n\t\t\t},\n\t\t\tmentions: this.get_names_for_mentions(),\n\t\t\trender_input: true,\n\t\t\tonly_input: true,\n\t\t\tno_wrapper: true\n\t\t});\n\t}\n\n\trender_timeline_item(c) {\n\t\tvar me = this;\n\t\tthis.prepare_timeline_item(c);\n\t\tvar $timeline_item = $(frappe.render_template(\"timeline_item\", {data:c, frm:this.frm}))\n\t\t\t.appendTo(me.list)\n\t\t\t.on(\"click\", \".delete-comment\", function() {\n\t\t\t\tvar name = $timeline_item.data('name');\n\t\t\t\tme.delete_comment(name);\n\t\t\t\treturn false;\n\t\t\t})\n\t\t\t.on('click', '.edit-comment', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar name = $timeline_item.data('name');\n\n\t\t\t\tif($timeline_item.hasClass('is-editing')) {\n\t\t\t\t\tme.current_editing_area.submit();\n\t\t\t\t} else {\n\t\t\t\t\tconst $edit_btn = $(this);\n\t\t\t\t\tconst $timeline_content = $timeline_item.find('.timeline-item-content');\n\t\t\t\t\tconst $timeline_edit = $timeline_item.find('.timeline-item-edit');\n\t\t\t\t\tconst content = $timeline_content.html();\n\n\t\t\t\t\t// update state\n\t\t\t\t\t$edit_btn\n\t\t\t\t\t\t.text(__(\"Save\"))\n\t\t\t\t\t\t.find('i')\n\t\t\t\t\t\t.removeClass('octicon-pencil')\n\t\t\t\t\t\t.addClass('octicon-check');\n\t\t\t\t\t$timeline_content.hide();\n\t\t\t\t\t$timeline_item.addClass('is-editing');\n\n\t\t\t\t\t// initialize editing area\n\t\t\t\t\tme.current_editing_area = me.make_editing_area($timeline_edit);\n\t\t\t\t\tme.current_editing_area.set_value(content);\n\n\t\t\t\t\t// submit handler\n\t\t\t\t\tme.current_editing_area.on_submit = (value) => {\n\t\t\t\t\t\t$timeline_edit.empty();\n\t\t\t\t\t\t$timeline_content.show();\n\n\t\t\t\t\t\t// set content to new val so that on save and refresh the new content is shown\n\t\t\t\t\t\tc.content = value;\n\t\t\t\t\t\tfrappe.timeline.update_communication(c);\n\t\t\t\t\t\tme.update_comment(name, value);\n\t\t\t\t\t\t// all changes to the timeline_item for editing are reset after calling refresh\n\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\n\t\tif(c.communication_type==\"Communication\" && c.communication_medium===\"Email\") {\n\t\t\tthis.last_type = c.communication_medium;\n\t\t\tthis.add_reply_btn_event($timeline_item, c);\n\t\t}\n\n\t}\n\n\tadd_reply_btn_event($timeline_item, c) {\n\t\tvar me = this;\n\t\t$timeline_item.find(\".reply-link\").on(\"click\", function() {\n\t\t\tvar name = $(this).attr(\"data-name\");\n\t\t\tvar last_email = null;\n\n\t\t\t// find the email tor reply to\n\t\t\tme.get_communications().forEach(function(c) {\n\t\t\t\tif(c.name==name) {\n\t\t\t\t\tlast_email = c;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// make the composer\n\t\t\tnew frappe.views.CommunicationComposer({\n\t\t\t\tdoc: me.frm.doc,\n\t\t\t\ttxt: \"\",\n\t\t\t\ttitle: __('Reply'),\n\t\t\t\tfrm: me.frm,\n\t\t\t\tlast_email: last_email,\n\t\t\t\tis_a_reply: true\n\t\t\t});\n\t\t});\n\t}\n\n\tprepare_timeline_item(c) {\n\t\tif(!c.sender) c.sender = c.owner || 'Guest';\n\n\t\tif(c.sender && c.sender.indexOf(\"<\")!==-1) {\n\t\t\tc.sender = c.sender.split(\"<\")[1].split(\">\")[0];\n\t\t}\n\n\t\tc.user_info = frappe.user_info(c.sender);\n\n\t\tc[\"delete\"] = \"\";\n\t\tc[\"edit\"] = \"\";\n\t\tif(c.communication_type==\"Comment\" && (c.comment_type || \"Comment\") === \"Comment\") {\n\t\t\tif(frappe.model.can_delete(\"Comment\")) {\n\t\t\t\tc[\"delete\"] = '<a class=\"close delete-comment\" title=\"Delete\"  href=\"#\"><i class=\"octicon octicon-x\"></i></a>';\n\t\t\t}\n\n\t\t\tif(frappe.user.name == c.sender || (frappe.user.name == 'Administrator')) {\n\t\t\t\tc[\"edit\"] = '<a class=\"edit-comment text-muted\" title=\"Edit\" href=\"#\">Edit</a>';\n\t\t\t}\n\t\t}\n\t\tlet communication_date = c.communication_date || c.creation;\n\t\tc.comment_on_small = comment_when(communication_date, true);\n\t\tc.comment_on = comment_when(communication_date);\n\t\tc.futur_date = communication_date > frappe.datetime.now_datetime() ? true : false;\n\t\tif(!c.fullname) {\n\t\t\tc.fullname = c.sender_full_name || frappe.user.full_name(c.sender);\n\t\t}\n\n\t\tif(c.attachments && typeof c.attachments===\"string\")\n\t\t\tc.attachments = JSON.parse(c.attachments);\n\n\t\tif(c.communication_type==\"Comment\" && !c.comment_type) {\n\t\t\tc.comment_type = \"Comment\";\n\t\t}\n\n\t\tthis.set_icon_and_color(c);\n\n\t\t// label view\n\t\tif(c.comment_type===\"Workflow\" || c.comment_type===\"Label\") {\n\t\t\tc.comment_html = repl('<span class=\"label label-%(style)s\">%(text)s</span>', {\n\t\t\t\tstyle: frappe.utils.guess_style(c.content),\n\t\t\t\ttext: __(c.content)\n\t\t\t});\n\t\t} else {\n\t\t\tif(c.communication_type==\"Communication\" && c.communication_medium==\"Email\") {\n\t\t\t\tc.content = c.content.split(frappe.separator_element)[0];\n\t\t\t\tc.content = frappe.utils.strip_original_content(c.content);\n\n\t\t\t\tc.original_content = c.content;\n\t\t\t\tc.content = frappe.utils.toggle_blockquote(c.content);\n\t\t\t} else if (c.communication_type===\"Feedback\") {\n\t\t\t\tc.content = frappe.utils.strip_original_content(c.content);\n\n\t\t\t\tc.original_content = c.content;\n\t\t\t\tc.content = frappe.utils.toggle_blockquote(c.content);\n\t\t\t}\n\t\t\tif(!frappe.utils.is_html(c.content)) {\n\t\t\t\tc.content_html = frappe.markdown(__(c.content));\n\t\t\t} else {\n\t\t\t\tc.content_html = c.content;\n\t\t\t\tc.content_html = frappe.utils.strip_whitespace(c.content_html);\n\t\t\t}\n\n\t\t\t// bold @mentions\n\t\t\tif(c.comment_type===\"Comment\" &&\n\t\t\t\t// avoid adding <b> tag a 2nd time\n\t\t\t\t!c.content_html.match(/(^|\\W)<b>(@[^\\s]+)<\\/b>/)\n\t\t\t) {\n\t\t\t\t/*\n\t\t\t\t\tReplace the email ids by only displaying the string which\n\t\t\t\t\toccurs before the second `@` to enhance the mentions.\n\t\t\t\t\tEg.\n\t\t\t\t\t@abc@a-example.com will be converted to\n\t\t\t\t\t@abc with the below line of code.\n\t\t\t\t*/\n\n\t\t\t\tc.content_html = c.content_html.replace(/(<[a][^>]*>)/g, \"\");\n\t\t\t\t// bold the @mentions\n\t\t\t\tc.content_html = c.content_html.replace(/(@[^\\s@]*)@[^\\s@|<]*/g, \"<b>$1</b>\");\n\t\t\t}\n\n\t\t\tif (this.is_communication_or_comment(c)) {\n\t\t\t\tc.user_content = true;\n\t\t\t\tif (!$.isArray(c._liked_by)) {\n\t\t\t\t\tc._liked_by = JSON.parse(c._liked_by || \"[]\");\n\t\t\t\t}\n\n\t\t\t\tc.liked_by_user = c._liked_by.indexOf(frappe.session.user)!==-1;\n\t\t\t}\n\t\t}\n\n\t\t// basic level of XSS protection\n\t\tc.content_html = frappe.dom.remove_script_and_style(c.content_html);\n\n\t\t// subject\n\t\tc.show_subject = false;\n\t\tif(c.subject && c.communication_type===\"Communication\") {\n\t\t\tif(this.frm.doc.subject && !this.frm.doc.subject.includes(c.subject)) {\n\t\t\t\tc.show_subject = true;\n\t\t\t} else if(this.frm.meta.title_field && this.frm.doc[this.frm.meta.title_field]\n\t\t\t\t&& !!this.frm.doc[this.frm.meta.title_field].includes(c.subject)) {\n\t\t\t\tc.show_subject = true;\n\t\t\t} else if(!this.frm.doc.name.includes(c.subject)) {\n\t\t\t\tc.show_subject = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tis_communication_or_comment(c) {\n\t\treturn c.communication_type===\"Communication\"\n\t\t|| c.communication_type===\"Feedback\"\n\t\t|| (c.communication_type===\"Comment\" && (c.comment_type===\"Comment\"||c.comment_type===\"Relinked\"));\n\t}\n\n\tset_icon_and_color(c) {\n\t\tif(c.communication_type == \"Feedback\"){\n\t\t\tc.icon = \"octicon octicon-comment-discussion\"\n\t\t\tc.rating_icons = frappe.render_template(\"rating_icons\", {rating: c.rating, show_label: true})\n\t\t} else {\n\t\t\tc.icon = {\n\t\t\t\t\"Email\": \"octicon octicon-mail\",\n\t\t\t\t\"Chat\": \"octicon octicon-comment-discussion\",\n\t\t\t\t\"Phone\": \"octicon octicon-device-mobile\",\n\t\t\t\t\"SMS\": \"octicon octicon-comment\",\n\t\t\t\t\"Event\": \"fa fa-calendar\",\n\t\t\t\t\"Meeting\": \"octicon octicon-briefcase\",\n\t\t\t\t\"ToDo\": \"fa fa-check\",\n\t\t\t\t\"Submitted\": \"octicon octicon-lock\",\n\t\t\t\t\"Cancelled\": \"octicon octicon-x\",\n\t\t\t\t\"Assigned\": \"octicon octicon-person\",\n\t\t\t\t\"Assignment Completed\": \"octicon octicon-check\",\n\t\t\t\t\"Comment\": \"octicon octicon-comment-discussion\",\n\t\t\t\t\"Milestone\": \"octicon octicon-milestone\",\n\t\t\t\t\"Workflow\": \"octicon octicon-git-branch\",\n\t\t\t\t\"Label\": \"octicon octicon-tag\",\n\t\t\t\t\"Attachment\": \"octicon octicon-cloud-upload\",\n\t\t\t\t\"Attachment Removed\": \"octicon octicon-trashcan\",\n\t\t\t\t\"Shared\": \"octicon octicon-eye\",\n\t\t\t\t\"Unshared\": \"octicon octicon-circle-slash\",\n\t\t\t\t\"Like\": \"octicon octicon-heart\",\n\t\t\t\t\"Edit\": \"octicon octicon-pencil\",\n\t\t\t\t\"Relinked\": \"octicon octicon-check\",\n\t\t\t\t\"Reply\": \"octicon octicon-mail-reply\"\n\t\t\t}[c.comment_type || c.communication_medium]\n\n\t\t\tc.icon_fg = {\n\t\t\t\t\"Attachment Removed\": \"#333\",\n\t\t\t}[c.comment_type || c.communication_medium]\n\n\t\t}\n\t\tif(!c.icon_fg)\n\t\t\tc.icon_fg = \"#fff\";\n\t}\n\n\tget_communications(with_versions) {\n\t\tvar docinfo = this.frm.get_docinfo(),\n\t\t\tme = this,\n\t\t\tout = [].concat(docinfo.communications);\n\t\tif(with_versions) {\n\t\t\tthis.build_version_comments(docinfo, out);\n\t\t}\n\n\t\treturn out;\n\t}\n\n\tget_view_logs(){\n\t\tvar docinfo = this.frm.get_docinfo(),\n\t\t\tme = this,\n\t\t\tout = [];\n\t\tfor (let c of docinfo.views){\n\t\t\tc.content = `<a href=\"#Form/View Log/${c.name}\"> ${__(\"viewed\")}</a>`;\n\t\t\tc.comment_type = \"Info\";\n\t\t\tout.push(c);\n\t\t};\n\t\treturn out;\n\t}\n\n\tget_comments() {\n\t\tlet docinfo = this.frm.get_docinfo();\n\n\t\tfor (let c of docinfo.comments) {\n\t\t\tthis.cast_comment_as_communication(c);\n\t\t}\n\n\t\treturn docinfo.comments;\n\t}\n\n\tget_energy_point_logs() {\n\t\tlet energy_point_logs = this.frm.get_docinfo().energy_point_logs;\n\t\tenergy_point_logs.map(log => {\n\t\t\tlog.comment_type = 'Energy Points';\n\t\t\tlog.content = frappe.energy_points.format_form_log(log);\n\t\t\treturn log;\n\t\t});\n\t\treturn energy_point_logs;\n\t}\n\n\tget_milestones() {\n\t\tlet milestones = this.frm.get_docinfo().milestones;\n\t\tmilestones.map(log => {\n\t\t\tlog.color = 'dark';\n\t\t\tlog.sender = log.owner;\n\t\t\tlog.comment_type = 'Milestone';\n\t\t\tlog.content = __('{0} changed {1} to {2}', [\n\t\t\t\tfrappe.user.full_name(log.owner).bold(),\n\t\t\t\tfrappe.meta.get_label(this.frm.doctype, log.track_field),\n\t\t\t\tlog.value.bold()]);\n\t\t\treturn log;\n\t\t});\n\t\treturn milestones;\n\t}\n\n\tcast_comment_as_communication(c) {\n\t\tc.sender = c.comment_email;\n\t\tc.sender_full_name = c.comment_by;\n\t\tc.communication_type = 'Comment';\n\t}\n\n\tbuild_version_comments(docinfo, out) {\n\t\tvar me = this;\n\t\tdocinfo.versions.forEach(function(version) {\n\t\t\tif(!version.data) return;\n\t\t\tvar data = JSON.parse(version.data);\n\n\t\t\t// comment\n\t\t\tif(data.comment) {\n\t\t\t\tout.push(me.get_version_comment(version, data.comment, data.comment_type));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// value changed in parent\n\t\t\tif(data.changed && data.changed.length) {\n\t\t\t\tvar parts = [];\n\t\t\t\tdata.changed.every(function(p) {\n\t\t\t\t\tif(p[0]==='docstatus') {\n\t\t\t\t\t\tif(p[2]==1) {\n\t\t\t\t\t\t\tout.push(me.get_version_comment(version, __('submitted this document')));\n\t\t\t\t\t\t} else if (p[2]==2) {\n\t\t\t\t\t\t\tout.push(me.get_version_comment(version, __('cancelled this document')));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar df = frappe.meta.get_docfield(me.frm.doctype, p[0], me.frm.docname);\n\n\t\t\t\t\t\tif(df && !df.hidden) {\n\t\t\t\t\t\t\tvar field_display_status = frappe.perm.get_field_display_status(df, null,\n\t\t\t\t\t\t\t\tme.frm.perm);\n\t\t\t\t\t\t\tif(field_display_status === 'Read' || field_display_status === 'Write') {\n\t\t\t\t\t\t\t\tparts.push(__('{0} from {1} to {2}', [\n\t\t\t\t\t\t\t\t\t__(df.label),\n\t\t\t\t\t\t\t\t\t(frappe.ellipsis(frappe.utils.html2text(p[1]), 40) || '\"\"').bold(),\n\t\t\t\t\t\t\t\t\t(frappe.ellipsis(frappe.utils.html2text(p[2]), 40) || '\"\"').bold()\n\t\t\t\t\t\t\t\t]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn parts.length < 3;\n\t\t\t\t});\n\t\t\t\tif(parts.length) {\n\t\t\t\t\tout.push(me.get_version_comment(version, __(\"changed value of {0}\", [parts.join(', ').bold()])));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// value changed in table field\n\t\t\tif(data.row_changed && data.row_changed.length) {\n\t\t\t\tvar parts = [], count = 0;\n\t\t\t\tdata.row_changed.every(function(row) {\n\t\t\t\t\trow[3].every(function(p) {\n\t\t\t\t\t\tvar df = me.frm.fields_dict[row[0]] &&\n\t\t\t\t\t\t\tfrappe.meta.get_docfield(me.frm.fields_dict[row[0]].grid.doctype,\n\t\t\t\t\t\t\t\tp[0], me.frm.docname);\n\n\t\t\t\t\t\tif(df && !df.hidden) {\n\t\t\t\t\t\t\tvar field_display_status = frappe.perm.get_field_display_status(df,\n\t\t\t\t\t\t\t\tnull, me.frm.perm);\n\n\t\t\t\t\t\t\tif(field_display_status === 'Read' || field_display_status === 'Write') {\n\t\t\t\t\t\t\t\tparts.push(__('{0} from {1} to {2} in row #{3}', [\n\t\t\t\t\t\t\t\t\tfrappe.meta.get_label(me.frm.fields_dict[row[0]].grid.doctype,\n\t\t\t\t\t\t\t\t\t\tp[0]),\n\t\t\t\t\t\t\t\t\t(frappe.ellipsis(p[1], 40) || '\"\"').bold(),\n\t\t\t\t\t\t\t\t\t(frappe.ellipsis(p[2], 40) || '\"\"').bold(),\n\t\t\t\t\t\t\t\t\trow[1]\n\t\t\t\t\t\t\t\t]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn parts.length < 3;\n\t\t\t\t\t});\n\t\t\t\t\treturn parts.length < 3;\n\t\t\t\t});\n\t\t\t\tif(parts.length) {\n\t\t\t\t\tout.push(me.get_version_comment(version, __(\"changed values for {0}\",\n\t\t\t\t\t\t[parts.join(', ')])));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// rows added / removed\n\t\t\t// __('added'), __('removed') # for translation, don't remove\n\t\t\t['added', 'removed'].forEach(function(key) {\n\t\t\t\tif(data[key] && data[key].length) {\n\t\t\t\t\tparts = (data[key] || []).map(function(p) {\n\t\t\t\t\t\tvar df = frappe.meta.get_docfield(me.frm.doctype, p[0], me.frm.docname);\n\t\t\t\t\t\tif(df && !df.hidden) {\n\t\t\t\t\t\t\tvar field_display_status = frappe.perm.get_field_display_status(df, null,\n\t\t\t\t\t\t\t\tme.frm.perm);\n\n\t\t\t\t\t\t\tif(field_display_status === 'Read' || field_display_status === 'Write') {\n\t\t\t\t\t\t\t\treturn frappe.meta.get_label(me.frm.doctype, p[0])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tparts = parts.filter(function(p) { return p; });\n\t\t\t\t\tif(parts.length) {\n\t\t\t\t\t\tout.push(me.get_version_comment(version, __(\"{0} rows for {1}\",\n\t\t\t\t\t\t\t[__(key), parts.join(', ')])));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tget_version_comment(version, text, comment_type) {\n\t\tif(!comment_type) {\n\t\t\ttext = '<a href=\"#Form/Version/'+version.name+'\">' + text + '</a>';\n\t\t}\n\t\treturn {\n\t\t\tcomment_type: comment_type || 'Edit',\n\t\t\tcreation: version.creation,\n\t\t\towner: version.owner,\n\t\t\tversion_name: version.name,\n\t\t\tsender: version.owner,\n\t\t\tcomment_by: version.owner,\n\t\t\tcontent: text\n\t\t};\n\t}\n\n\tinsert_comment(comment, btn) {\n\t\tvar me = this;\n\t\treturn frappe.call({\n\t\t\tmethod: \"frappe.desk.form.utils.add_comment\",\n\t\t\targs: {\n\t\t\t\treference_doctype: this.frm.doctype,\n\t\t\t\treference_name: this.frm.docname,\n\t\t\t\tcontent: comment,\n\t\t\t\tcomment_email: frappe.session.user\n\t\t\t},\n\t\t\tbtn: btn,\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tme.comment_area.set_value('');\n\t\t\t\t\tfrappe.utils.play_sound(\"click\");\n\t\t\t\t\tfrappe.timeline.new_communication(r.message);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n\n\tdelete_comment(name) {\n\t\tvar me = this;\n\n\t\tfrappe.confirm(__('Delete comment?'), function() {\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: \"frappe.client.delete\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: \"Comment\",\n\t\t\t\t\tname: name\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tfrappe.utils.play_sound(\"delete\");\n\n\t\t\t\t\t\tme.frm.get_docinfo().communications =\n\t\t\t\t\t\t\t$.map(me.frm.get_docinfo().communications,\n\t\t\t\t\t\t\t\tfunction(v) {\n\t\t\t\t\t\t\t\t\tif(v.name==name) return null;\n\t\t\t\t\t\t\t\t\telse return v;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tme.refresh(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Update comment\n\t *\n\t * @param {string} name\n\t * @param {string} content\n\t *\n\t * @returns {boolean}\n\t */\n\tupdate_comment(name, content){\n\t\treturn frappe.call({\n\t\t\tmethod: 'frappe.desk.form.utils.update_comment',\n\t\t\targs: { name, content },\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tfrappe.utils.play_sound('click');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tget_recipient() {\n\t\tif (this.frm.email_field) {\n\t\t\treturn this.frm.doc[this.frm.email_field];\n\t\t} else {\n\t\t\treturn this.frm.doc.email_id || this.frm.doc.email || \"\";\n\t\t}\n\t}\n\n\tget_last_email(from_recipient) {\n\t\tvar last_email = null,\n\t\t\tcommunications = this.frm.get_docinfo().communications,\n\t\t\temail = this.get_recipient();\n\n\t\t$.each(communications && communications.sort(function(a, b) { return a.creation > b.creation ? -1 : 1 }), function(i, c) {\n\t\t\tif(c.communication_type=='Communication' && c.communication_medium==\"Email\") {\n\t\t\t\tif(from_recipient) {\n\t\t\t\t\tif(c.sender.indexOf(email)!==-1) {\n\t\t\t\t\t\tlast_email = c;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlast_email = c;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn last_email;\n\t}\n\n\tget_names_for_mentions() {\n\t\tvar valid_users = Object.keys(frappe.boot.user_info)\n\t\t\t.filter(user => ![\"Administrator\", \"Guest\"].includes(user));\n\t\tvalid_users = valid_users\n\t\t\t.filter(user => frappe.boot.user_info[user].allowed_in_mentions==1);\n\t\treturn valid_users.map(user => frappe.boot.user_info[user].name);\n\t}\n\n\tsetup_comment_like() {\n\t\tthis.wrapper.on(\"click\", \".comment-likes .octicon-heart\", frappe.ui.click_toggle_like);\n\n\t\tfrappe.ui.setup_like_popover(this.wrapper, \".comment-likes\");\n\t}\n};\n\n$.extend(frappe.timeline, {\n\tnew_communication: function(communication) {\n\t\tif (!communication.communication_type) {\n\t\t\tcommunication.communication_type = 'Comment';\n\t\t}\n\t\tvar docinfo = frappe.model.get_docinfo(communication.reference_doctype, communication.reference_name);\n\t\tif (docinfo && docinfo.communications) {\n\t\t\tvar communications = docinfo.communications;\n\t\t\tvar communication_exists = false;\n\t\t\tfor (var i=0, l=communications.length; i<l; i++) {\n\t\t\t\tif (communications[i].name==communication.name) {\n\t\t\t\t\tcommunication_exists = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!communication_exists) {\n\t\t\t\tdocinfo.communications = communications.concat([communication]);\n\t\t\t}\n\t\t}\n\n\t\tif (cur_frm.doctype === communication.reference_doctype && cur_frm.docname === communication.reference_name) {\n\t\t\tcur_frm.timeline && cur_frm.timeline.refresh();\n\t\t}\n\t},\n\n\tdelete_communication: function(communication) {\n\t\tvar docinfo = frappe.model.get_docinfo(communication.reference_doctype, communication.reference_name);\n\t\tvar index = frappe.timeline.index_of_communication(communication, docinfo);\n\t\tif (index !== -1) {\n\t\t\t// remove it from communications list\n\t\t\tdocinfo.communications.splice(index, 1);\n\t\t}\n\n\t\tif (cur_frm.doctype === communication.reference_doctype && cur_frm.docname === communication.reference_name) {\n\t\t\tcur_frm.timeline && cur_frm.timeline.refresh();\n\t\t}\n\t},\n\n\tupdate_communication: function(communication) {\n\t\tvar docinfo = frappe.model.get_docinfo(communication.reference_doctype, communication.reference_name);\n\t\tvar index = frappe.timeline.index_of_communication(communication, docinfo);\n\n\t\tif (index !== -1) {\n\t\t\t// update\n\t\t\t$.extend(docinfo.communications[index], communication);\n\t\t}\n\n\t\tif (cur_frm.doctype === communication.reference_doctype && cur_frm.docname === communication.reference_name) {\n\t\t\tcur_frm.timeline && cur_frm.timeline.refresh();\n\t\t}\n\t},\n\n\tindex_of_communication: function(communication, docinfo) {\n\t\tvar index = -1;\n\n\t\tif (docinfo && docinfo.communications) {\n\t\t\tvar communications = docinfo.communications;\n\n\t\t\tfor (var i=0, l=communications.length; i<l; i++) {\n\t\t\t\tif (communications[i].name==communication.name) {\n\t\t\t\t\tindex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n})","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.AssignTo = Class.extend({\n\tinit: function(opts) {\n\t\tvar me = this;\n\n\t\t$.extend(this, opts);\n\t\tthis.btn = this.parent.find(\".add-assignment\").on(\"click\", function() { me.add(); });\n\t\tthis.btn_wrapper = this.btn.parent();\n\n\t\tthis.refresh();\n\t},\n\trefresh: function() {\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.parent.toggle(false);\n\t\t\treturn;\n\t\t}\n\t\tthis.parent.toggle(true);\n\t\tthis.render(this.frm.get_docinfo().assignments);\n\t},\n\trender: function(d) {\n\t\tvar me = this;\n\t\tthis.frm.get_docinfo().assignments = d;\n\t\tthis.parent.find(\".assignment-row\").remove();\n\n\t\tif(me.primary_action) {\n\t\t\tme.primary_action.remove();\n\t\t\tme.primary_action = null;\n\t\t}\n\n\t\tif(this.dialog) {\n\t\t\tthis.dialog.hide();\n\t\t}\n\n\t\tif(d && d.length) {\n\t\t\tfor(var i=0; i<d.length; i++) {\n\t\t\t\tvar info = frappe.user_info(d[i].owner);\n\t\t\t\tinfo.assign_to_name = d[i].name\n\t\t\t\tinfo.owner = d[i].owner;\n\t\t\t\tinfo.avatar = frappe.avatar(d[i].owner);\n\t\t\t\tinfo.description = d[i].description || \"\";\n\n\t\t\t\tinfo._fullname = info.fullname;\n\t\t\t\tif(info.fullname.length > 10) {\n\t\t\t\t\tinfo._fullname = info.fullname.substr(0, 10) + '...';\n\t\t\t\t}\n\n\t\t\t\t$(repl('<li class=\"assignment-row\">\\\n\t\t\t\t\t<a class=\"close\" data-owner=\"%(owner)s\">&times;</a>\\\n\t\t\t\t\t%(avatar)s\\\n\t\t\t\t\t<span><a href=\"#Form/ToDo/%(assign_to_name)s\">%(_fullname)s</a></span>\\\n\t\t\t\t</li>', info))\n\t\t\t\t\t.insertBefore(this.parent.find('.add-assignment'));\n\n\t\t\t\tif(d[i].owner===frappe.session.user) {\n\t\t\t\t\tme.primary_action = this.frm.page.add_menu_item(__(\"Assignment Complete\"), function() {\n\t\t\t\t\t\tme.remove(frappe.session.user);\n\t\t\t\t\t}, \"fa fa-check\", \"btn-success\")\n\t\t\t\t}\n\n\t\t\t\tif(!(d[i].owner === frappe.session.user || me.frm.perm[0].write)) {\n\t\t\t\t\tme.parent.find('a.close').remove();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// set remove\n\t\t\tthis.parent.find('a.close').click(function() {\n\t\t\t\tme.remove($(this).attr('data-owner'));\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\t//this.btn_wrapper.addClass(\"hide\");\n\t\t} else {\n\t\t\t//this.btn_wrapper.removeClass(\"hide\");\n\t\t}\n\t},\n\tadd: function() {\n\t\tvar me = this;\n\n\t\tif(this.frm.is_new()) {\n\t\t\tfrappe.throw(__(\"Please save the document before assignment\"));\n\t\t\treturn;\n\t\t}\n\n\t\tif(!me.assign_to) {\n\t\t\tme.assign_to = new frappe.ui.form.AssignToDialog({\n\t\t\t\tobj: me,\n\t\t\t\tmethod: 'frappe.desk.form.assign_to.add',\n\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\tdocname: me.frm.docname,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tme.render(r.message);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tme.assign_to.dialog.clear();\n\n\t\tif(me.frm.meta.title_field) {\n\t\t\tme.assign_to.dialog.set_value(\"description\", me.frm.doc[me.frm.meta.title_field])\n\t\t}\n\n\t\tme.assign_to.dialog.show();\n\t\tme.assign_to = null;\n\t},\n\tremove: function(owner) {\n\t\tvar me = this;\n\n\t\tif(this.frm.is_new()) {\n\t\t\tfrappe.throw(__(\"Please save the document before removing assignment\"));\n\t\t\treturn;\n\t\t}\n\n\t\tfrappe.call({\n\t\t\tmethod:'frappe.desk.form.assign_to.remove',\n\t\t\targs: {\n\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\tname: me.frm.docname,\n\t\t\t\tassign_to: owner\n\t\t\t},\n\t\t\tcallback:function(r,rt) {\n\t\t\t\tme.render(r.message);\n\t\t\t}\n\t\t});\n\t}\n});\n\n\nfrappe.ui.form.AssignToDialog = Class.extend({\n\tinit: function(opts){\n\t\tvar me = this\n\t\tvar dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Add to To Do'),\n\t\t\tfields: [\n\t\t\t\t{ fieldtype: 'Link', fieldname: 'assign_to', options: 'User', label: __(\"Assign To\"), reqd: true, filters: { 'user_type': 'System User' }},\n\t\t\t\t{ fieldtype: 'Check', fieldname: 'myself', label: __(\"Assign to me\"), \"default\": 0 },\n\t\t\t\t{ fieldtype: 'Small Text', fieldname: 'description', label: __(\"Comment\") },\n\t\t\t\t{ fieldtype: 'Section Break' },\n\t\t\t\t{ fieldtype: 'Column Break' },\n\t\t\t\t{ fieldtype: 'Date', fieldname: 'date', label: __(\"Complete By\") },\n\t\t\t\t{ fieldtype: 'Check', fieldname: 'notify', label: __(\"Notify by Email\") },\n\t\t\t\t{ fieldtype: 'Column Break' },\n\t\t\t\t{ fieldtype: 'Select', fieldname: 'priority', label: __(\"Priority\"),\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{ value: 'Low', label: __('Low') },\n\t\t\t\t\t\t{ value: 'Medium', label: __('Medium') },\n\t\t\t\t\t\t{ value: 'High', label: __('High') }\n\t\t\t\t\t],\n\t\t\t\t\t// Pick up priority from the source document, if it exists and is available in ToDo\n\t\t\t\t\t'default': [\"Low\", \"Medium\", \"High\"].includes(opts.obj.frm && opts.obj.frm.doc.priority\n\t\t\t\t\t\t? opts.obj.frm.doc.priority : 'Medium')\n\t\t\t\t},\n\t\t\t],\n\t\t\tprimary_action: function() { frappe.ui.add_assignment(opts, this) },\n\t\t\tprimary_action_label: __(\"Add\")\n\t\t})\n\t\t$.extend(me, dialog);\n\n\t\tme.dialog = dialog;\n\n\t\tme.dialog.fields_dict.assign_to.get_query = \"frappe.core.doctype.user.user.user_query\";\n\n\t\tvar myself = me.dialog.get_input(\"myself\").on(\"click\", function() {\n\t\t\tme.toggle_myself(this);\n\t\t});\n\t\tme.toggle_myself(myself);\n\t},\n\ttoggle_myself: function(myself) {\n\t\tvar me = this;\n\t\tif($(myself).prop(\"checked\")) {\n\t\t\tme.dialog.set_value(\"assign_to\", frappe.session.user);\n\t\t\tme.dialog.set_value(\"notify\", 0);\n\t\t\tme.dialog.get_field(\"notify\").$wrapper.toggle(false);\n\t\t\tme.dialog.get_field(\"assign_to\").$wrapper.toggle(false);\n\t\t} else {\n\t\t\tme.dialog.set_value(\"assign_to\", \"\");\n\t\t\tme.dialog.get_field(\"notify\").$wrapper.toggle(true);\n\t\t\tme.dialog.get_field(\"assign_to\").$wrapper.toggle(true);\n\t\t}\n\t},\n\n});\n\nfrappe.ui.add_assignment = function(opts, dialog) {\n\tvar assign_to = dialog.fields_dict.assign_to.get_value();\n\tvar args = dialog.get_values();\n\tif(args && assign_to) {\n\t\tdialog.set_message('Assigning...');\n\t\treturn frappe.call({\n\t\t\tmethod: opts.method,\n\t\t\targs: $.extend(args, {\n\t\t\t\tdoctype: opts.doctype,\n\t\t\t\tname: opts.docname,\n\t\t\t\tassign_to: assign_to,\n\t\t\t\tbulk_assign:  opts.bulk_assign || false,\n\t\t\t\tre_assign: opts.re_assign || false\n\t\t\t}),\n\t\t\tbtn: dialog.get_primary_btn(),\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tif(opts.callback){\n\t\t\t\t\t\topts.callback(r);\n\t\t\t\t\t}\n\t\t\t\t\tdialog && dialog.hide();\n\t\t\t\t} else {\n\t\t\t\t\tdialog.clear_message();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n}\n","frappe.provide('frappe.ui.form');\n\nfrappe.quick_edit = function(doctype, name) {\n\tfrappe.db.get_doc(doctype, name).then(doc => {\n\t\tfrappe.ui.form.make_quick_entry(doctype, null, null, doc);\n\t});\n};\n\nfrappe.ui.form.make_quick_entry = (doctype, after_insert, init_callback, doc) => {\n\tvar trimmed_doctype = doctype.replace(/ /g, '');\n\tvar controller_name = \"QuickEntryForm\";\n\n\tif(frappe.ui.form[trimmed_doctype + \"QuickEntryForm\"]){\n\t\tcontroller_name = trimmed_doctype + \"QuickEntryForm\";\n\t}\n\n\tfrappe.quick_entry = new frappe.ui.form[controller_name](doctype, after_insert, init_callback, doc);\n\treturn frappe.quick_entry.setup();\n};\n\nfrappe.ui.form.QuickEntryForm = Class.extend({\n\tinit: function(doctype, after_insert, init_callback, doc) {\n\t\tthis.doctype = doctype;\n\t\tthis.after_insert = after_insert;\n\t\tthis.init_callback = init_callback;\n\t\tthis.doc = doc;\n\t},\n\n\tsetup: function() {\n\t\tlet me = this;\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.model.with_doctype(this.doctype, function() {\n\t\t\t\tme.set_meta_and_mandatory_fields();\n\t\t\t\tif(me.is_quick_entry()) {\n\t\t\t\t\tme.render_dialog();\n\t\t\t\t\tresolve(me);\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.quick_entry = null;\n\t\t\t\t\tfrappe.set_route('Form', me.doctype, me.doc.name)\n\t\t\t\t\t\t.then(() => resolve(me));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tset_meta_and_mandatory_fields: function(){\n\t\tlet fields = frappe.get_meta(this.doctype).fields;\n\t\tif (fields.length < 7) {\n\t\t\t// if less than 7 fields, then show everything\n\t\t\tthis.mandatory = fields;\n\t\t} else {\n\t\t\t// prepare a list of mandatory and bold fields\n\t\t\tthis.mandatory = $.map(fields,\n\t\t\t\tfunction(d) { return ((d.reqd || d.bold || d.allow_in_quick_entry) && !d.read_only) ? $.extend({}, d) : null; });\n\t\t}\n\t\tthis.meta = frappe.get_meta(this.doctype);\n\t\tif (!this.doc) {\n\t\t\tthis.doc = frappe.model.get_new_doc(this.doctype, null, null, true);\n\t\t}\n\t},\n\n\tis_quick_entry: function(){\n\t\tif(this.meta.quick_entry != 1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.validate_for_prompt_autoname();\n\n\t\tif (this.has_child_table()\n\t\t\t|| !this.mandatory.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\ttoo_many_mandatory_fields: function(){\n\t\tif(this.mandatory.length > 7) {\n\t\t\t// too many fields, show form\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\thas_child_table: function(){\n\t\tif($.map(this.mandatory, function(d) {\n\t\t\treturn d.fieldtype==='Table' ? d : null; }).length) {\n\t\t\t// has mandatory table, quit!\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tvalidate_for_prompt_autoname: function(){\n\t\tif(this.meta.autoname && this.meta.autoname.toLowerCase()==='prompt') {\n\t\t\tthis.mandatory = [{fieldname:'__newname', label:__('{0} Name', [this.meta.name]),\n\t\t\t\treqd: 1, fieldtype:'Data'}].concat(this.mandatory);\n\t\t}\n\t},\n\n\trender_dialog: function(){\n\t\tvar me = this;\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"New {0}\", [__(this.doctype)]),\n\t\t\tfields: this.mandatory,\n\t\t});\n\t\tthis.dialog.doc = this.doc;\n\n\t\tthis.register_primary_action();\n\t\tthis.render_edit_in_full_page_link();\n\t\t// ctrl+enter to save\n\t\tthis.dialog.wrapper.keydown(function(e) {\n\t\t\tif((e.ctrlKey || e.metaKey) && e.which==13) {\n\t\t\t\tif(!frappe.request.ajax_count) {\n\t\t\t\t\t// not already working -- double entry\n\t\t\t\t\tme.dialog.get_primary_btn().trigger(\"click\");\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.dialog.onhide = () => frappe.quick_entry = null;\n\t\tthis.dialog.show();\n\n\t\tthis.dialog.refresh_dependency();\n\t\tthis.set_defaults();\n\n\t\tif (this.init_callback) {\n\t\t\tthis.init_callback(this.dialog);\n\t\t}\n\t},\n\n\tregister_primary_action: function(){\n\t\tvar me = this;\n\t\tthis.dialog.set_primary_action(__('Save'), function() {\n\t\t\tif(me.dialog.working) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar data = me.dialog.get_values();\n\n\t\t\tif(data) {\n\t\t\t\tme.dialog.working = true;\n\t\t\t\tme.dialog.set_message(__('Saving...'));\n\t\t\t\tme.insert().then(() => {\n\t\t\t\t\tme.dialog.clear_message();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tinsert: function() {\n\t\tlet me = this;\n\t\treturn new Promise(resolve => {\n\t\t\tme.update_doc();\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.client.save\",\n\t\t\t\targs: {\n\t\t\t\t\tdoc: me.dialog.doc\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tme.dialog.hide();\n\t\t\t\t\t// delete the old doc\n\t\t\t\t\tfrappe.model.clear_doc(me.dialog.doc.doctype, me.dialog.doc.name);\n\t\t\t\t\tme.dialog.doc = r.message;\n\t\t\t\t\tif(frappe._from_link) {\n\t\t\t\t\t\tfrappe.ui.form.update_calling_link(me.dialog.doc);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(me.after_insert) {\n\t\t\t\t\t\t\tme.after_insert(me.dialog.doc);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme.open_form_if_not_list();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function() {\n\t\t\t\t\tme.open_doc();\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tme.dialog.working = false;\n\t\t\t\t\tresolve(me.dialog.doc);\n\t\t\t\t},\n\t\t\t\tfreeze: true\n\t\t\t});\n\t\t});\n\t},\n\n\topen_form_if_not_list: function() {\n\t\tlet route = frappe.get_route();\n\t\tlet doc = this.dialog.doc;\n\t\tif (route && !(route[0]==='List' && route[1]===doc.doctype)) {\n\t\t\tfrappe.run_serially([\n\t\t\t\t() => frappe.set_route('Form', doc.doctype, doc.name)\n\t\t\t]);\n\t\t}\n\t},\n\n\tupdate_doc: function(){\n\t\tvar me = this;\n\t\tvar data = this.dialog.get_values(true);\n\t\t$.each(data, function(key, value) {\n\t\t\tif(key==='__newname') {\n\t\t\t\tme.dialog.doc.name = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(!is_null(value)) {\n\t\t\t\t\tme.dialog.doc[key] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn this.dialog.doc;\n\t},\n\n\topen_doc: function(){\n\t\tthis.dialog.hide();\n\t\tthis.update_doc();\n\t\tfrappe.set_route('Form', this.doctype, this.doc.name);\n\t},\n\n\trender_edit_in_full_page_link: function(){\n\t\tvar me = this;\n\t\tvar $link = $('<div style=\"padding-left: 7px; padding-top: 30px; padding-bottom: 10px;\">' +\n\t\t\t'<button class=\"edit-full btn-default btn-sm\">' + __(\"Edit in full page\") + '</button></div>').appendTo(this.dialog.body);\n\n\t\t$link.find('.edit-full').on('click', function() {\n\t\t\t// edit in form\n\t\t\tme.open_doc();\n\t\t});\n\t},\n\n\tset_defaults: function(){\n\t\tvar me = this;\n\t\t// set defaults\n\t\t$.each(this.dialog.fields_dict, function(fieldname, field) {\n\t\t\tfield.doctype = me.doc.doctype;\n\t\t\tfield.docname = me.doc.name;\n\n\t\t\tif(!is_null(me.doc[fieldname])) {\n\t\t\t\tfield.set_input(me.doc[fieldname]);\n\t\t\t}\n\t\t});\n\t}\n});\n","frappe.provide('frappe.ui.form');\nfrappe.provide('frappe.success_action');\n\nfrappe.ui.form.SuccessAction = class SuccessAction {\n\tconstructor(form) {\n\t\tthis.form = form;\n\t\tthis.load_setting();\n\t}\n\n\tload_setting() {\n\t\tthis.setting = frappe.boot.success_action\n\t\t\t.find(setting => setting.ref_doctype === this.form.doctype);\n\t}\n\n\tshow() {\n\t\tif (!this.setting) return;\n\t\tif (this.form.doc.docstatus === 0 && !this.form.is_first_creation()) return;\n\n\t\tthis.prepare_dom();\n\t\tthis.show_alert();\n\t}\n\n\tprepare_dom() {\n\t\tthis.container = $(document.body).find('.success-container');\n\t\tif (!this.container.length) {\n\t\t\tthis.container = $('<div class=\"success-container\">').appendTo(document.body);\n\t\t}\n\t}\n\n\tshow_alert() {\n\t\tfrappe.db.count(this.form.doctype)\n\t\t\t.then(count => {\n\t\t\t\tconst setting = this.setting;\n\t\t\t\tlet message = count === 1 ?\n\t\t\t\t\tsetting.first_success_message :\n\t\t\t\t\tsetting.message;\n\n\t\t\t\tconst $buttons = this.get_actions().map(action => {\n\t\t\t\t\tconst $btn = $(`<button class=\"next-action\"><span>${action.label}</span></button>`);\n\t\t\t\t\t$btn.click(() => action.action(this.form));\n\t\t\t\t\treturn $btn;\n\t\t\t\t});\n\n\t\t\t\tconst next_action_container = $(`<div class=\"next-action-container\"></div>`);\n\t\t\t\tnext_action_container.append($buttons);\n\t\t\t\tconst html = next_action_container;\n\n\t\t\t\tfrappe.show_alert({\n\t\t\t\t\tmessage: message,\n\t\t\t\t\tbody: html,\n\t\t\t\t\tindicator: 'green',\n\t\t\t\t}, setting.action_timeout);\n\t\t\t});\n\t}\n\n\tget_actions() {\n\t\tconst actions = [];\n\t\tconst checked_actions = this.setting.next_actions.split(\"\\n\");\n\t\tchecked_actions\n\t\t\t.forEach(action => {\n\t\t\t\tif (typeof action === 'string' && this.default_actions[action]) {\n\t\t\t\t\tactions.push(this.default_actions[action]);\n\t\t\t\t} else if (typeof action === 'object') {\n\t\t\t\t\tactions.push(action);\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn actions;\n\t}\n\n\tget default_actions() {\n\t\treturn {\n\t\t\t'new': {\n\t\t\t\tlabel: __('New'),\n\t\t\t\taction: (frm) => frappe.new_doc(frm.doctype)\n\t\t\t},\n\t\t\t'print': {\n\t\t\t\tlabel: __('Print'),\n\t\t\t\taction: (frm) => frm.print_doc()\n\t\t\t},\n\t\t\t'email': {\n\t\t\t\tlabel: __('Email'),\n\t\t\t\taction: (frm) => frm.email_doc()\n\t\t\t},\n\t\t\t'list': {\n\t\t\t\tlabel: __('View All'),\n\t\t\t\taction: (frm) => {\n\t\t\t\t\tfrappe.set_route('List', frm.doctype);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n};\n","frappe.provide('frappe.model');\nfrappe.provide('frappe.utils');\n\n/**\n * Opens the Website Meta Tag form if it exists for {route}\n * or creates a new doc and opens the form\n */\nfrappe.utils.set_meta_tag = function(route) {\n\tfrappe.db.exists('Website Route Meta', route)\n\t\t.then(exists => {\n\t\t\tif (exists) {\n\t\t\t\tfrappe.set_route('Form', 'Website Route Meta', route);\n\t\t\t} else {\n\t\t\t\t// new doc\n\t\t\t\tconst doc = frappe.model.get_new_doc('Website Route Meta');\n\t\t\t\tdoc.__newname = route;\n\t\t\t\tfrappe.set_route('Form', doc.doctype, doc.name);\n\t\t\t}\n\t\t});\n};\n"],"names":["const","this","let","progress_chart"],"mappings":"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"}